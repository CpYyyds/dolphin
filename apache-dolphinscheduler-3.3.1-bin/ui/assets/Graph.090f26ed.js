import{i as d}from"./index.8ac5dcc4.js";import{d as w,r as b,u as p,c as m}from"./index.02a17cf1.js";const S={height:{type:[String,Number],default:window.innerHeight-174},width:{type:[String,Number],default:"100%"},seriesData:{type:Array,default:()=>[]},links:{default:()=>[]},labelShow:{type:Boolean,default:!0}},y=w({name:"GraphChart",props:S,setup(l){const a=b(null),{t:o}=p(),s=[{color:"#2D8DF0",name:o("project.workflow.online")},{color:"#f37373",name:o("project.workflow.workflow_offline")},{color:"#ba3e3e",name:o("project.workflow.schedule_offline")}],u=(e,r)=>{switch(!0){case r===0:return 1;case(r===1&&e===0):return 2;case(r===1&&e===1):default:return 0}},i={tooltip:{confine:!0,formatter:e=>{if(!e.data.name)return!1;const{name:r,scheduleStartTime:t,scheduleEndTime:c,crontab:n,workFlowPublishStatus:f,schedulePublishStatus:h}=e.data;return`
            ${o("project.workflow.workflow_name")}\uFF1A${r}<br/>
            ${o("project.workflow.schedule_start_time")}\uFF1A${t}<br/>
            ${o("project.workflow.schedule_end_time")}\uFF1A${c}<br/>
            ${o("project.workflow.crontab_expression")}\uFF1A${n||" - "}<br/>
            ${o("project.workflow.workflow_publish_status")}\uFF1A${f}<br/>
            ${o("project.workflow.schedule_publish_status")}\uFF1A${h}<br/>
          `}},legend:{data:s==null?void 0:s.map(e=>({name:e.name,itemStyle:{color:e.color}}))},series:[{type:"graph",layout:"force",draggable:!0,force:{repulsion:300,edgeLength:200},symbol:"roundRect",symbolSize:70,roam:!0,label:{show:l.labelShow,formatter:e=>{let r="";const t=e.data.name.split("");for(let c=0,n;n=t[c++];)r+=n,c%10||(r+=`
`);return r.length>60?r.slice(0,60)+"...":r}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{fontSize:20},data:l.seriesData.map(e=>{const r=u(Number(e.schedulePublishStatus),Number(e.workFlowPublishStatus)),t={color:""};return r===1?t.color="#f37373":r===2?t.color="#ba3e3e":r===0&&(t.color="#2D8DF0"),{name:e.name,id:e.id,category:r,workFlowPublishStatus:Number(e.workFlowPublishStatus)===0?o("project.workflow.offline"):o("project.workflow.online"),schedulePublishStatus:Number(e.schedulePublishStatus)===0?o("project.workflow.offline"):o("project.workflow.online"),crontab:e.crontab,scheduleStartTime:e.scheduleStartTime?e.scheduleStartTime:"-",scheduleEndTime:e.scheduleEndTime?e.scheduleEndTime:"-",itemStyle:t}}),links:l.links,lineStyle:{opacity:.9,width:2,curveness:0},nodeScaleRatio:0,zoom:1,categories:s}]};return d(a,i),{graphChartRef:a}},render(){const{height:l,width:a}=this;return m("div",{ref:"graphChartRef",style:{height:typeof l=="number"?l+"px":l,width:typeof a=="number"?a+"px":a}},null)}});export{y as default};
