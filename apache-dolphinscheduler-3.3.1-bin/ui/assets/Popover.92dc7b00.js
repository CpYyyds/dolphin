import{o as be,V as oe,W as Ce,U as j,r as O,a1 as te,d as ne,R as Z,G as We,J as se,aa as Le,H as Q,Y as H,ag as Ae,h as $,a3 as Ve,ax as He,aJ as Xe,k as P,l as _,$ as de,p as ue,n as le,aK as Ye,b as Ke,e as we,a2 as Oe,g as R,t as Ue,T as Je,aL as Ge,L as qe,an as Qe,F as Ze,av as Re,B as et}from"./index.02a17cf1.js";import{d as Ee,p as Ie,a as Te,b as tt,e as ge,L as ot,z as ke,c as ye,F as nt,g as $e,k as rt}from"./index.8a81335d.js";import{b as it,a as at}from"./_baseMap.d8d47059.js";import{o as J,a as X,g as xe,X as lt}from"./Scrollbar.988383de.js";import{c as st,a as re}from"./cssr.f561ccf0.js";import{i as dt}from"./utils.eff12f29.js";import{f as fe}from"./format-length.a6a40b1f.js";import{i as Me,r as ce,c as ie}from"./resolve-slot.92499a18.js";import{u as ut}from"./use-merged-state.2bdc3563.js";import{u as ft}from"./use-compitable.cd47f4ac.js";import{b as ct}from"./next-frame-once.50ecadf2.js";let he;function ht(){return he===void 0&&(he=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),he}let G,ee;const pt=()=>{var e,t;G=dt?(t=(e=document)===null||e===void 0?void 0:e.fonts)===null||t===void 0?void 0:t.ready:void 0,ee=!1,G!==void 0?G.then(()=>{ee=!0}):ee=!0};pt();function vt(e){if(ee)return;let t=!1;be(()=>{ee||G==null||G.then(()=>{t||e()})}),oe(()=>{t=!0})}const Rt=Ce("n-internal-select-menu"),mt=Ce("n-internal-select-menu-body"),_e="__disabled__";function q(e){const t=j(Te,null),o=j(Ee,null),n=j(Ie,null),l=j(mt,null),c=O();if(typeof document<"u"){c.value=document.fullscreenElement;const u=()=>{c.value=document.fullscreenElement};be(()=>{J("fullscreenchange",document,u)}),oe(()=>{X("fullscreenchange",document,u)})}return te(()=>{var u;const{to:i}=e;return i!==void 0?i===!1?_e:i===!0?c.value||"body":i:t!=null&&t.value?(u=t.value.$el)!==null&&u!==void 0?u:t.value:o!=null&&o.value?o.value:n!=null&&n.value?n.value:l!=null&&l.value?l.value:i!=null?i:c.value||"body"})}q.tdkey=_e;q.propTo={type:[String,Object,Boolean],default:void 0};let N=null;function Fe(){if(N===null&&(N=document.getElementById("v-binder-view-measurer"),N===null)){N=document.createElement("div"),N.id="v-binder-view-measurer";const{style:e}=N;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(N)}return N.getBoundingClientRect()}function bt(e,t){const o=Fe();return{top:t,left:e,height:0,width:0,right:o.width-e,bottom:o.height-t}}function pe(e){const t=e.getBoundingClientRect(),o=Fe();return{left:t.left-o.left,top:t.top-o.top,bottom:o.height+o.top-t.bottom,right:o.width+o.left-t.right,width:t.width,height:t.height}}function wt(e){return e.nodeType===9?null:e.parentNode}function Ne(e){if(e===null)return null;const t=wt(e);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:o,overflowX:n,overflowY:l}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(o+l+n))return t}return Ne(t)}const gt=ne({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var t;Z("VBinder",(t=We())===null||t===void 0?void 0:t.proxy);const o=j("VBinder",null),n=O(null),l=d=>{n.value=d,o&&e.syncTargetWithParent&&o.setTargetRef(d)};let c=[];const u=()=>{let d=n.value;for(;d=Ne(d),d!==null;)c.push(d);for(const x of c)J("scroll",x,S,!0)},i=()=>{for(const d of c)X("scroll",d,S,!0);c=[]},r=new Set,m=d=>{r.size===0&&u(),r.has(d)||r.add(d)},w=d=>{r.has(d)&&r.delete(d),r.size===0&&i()},S=()=>{ct(a)},a=()=>{r.forEach(d=>d())},h=new Set,b=d=>{h.size===0&&J("resize",window,y),h.has(d)||h.add(d)},f=d=>{h.has(d)&&h.delete(d),h.size===0&&X("resize",window,y)},y=()=>{h.forEach(d=>d())};return oe(()=>{X("resize",window,y),i()}),{targetRef:n,setTargetRef:l,addScrollListener:m,removeScrollListener:w,addResizeListener:b,removeResizeListener:f}},render(){return tt("binder",this.$slots)}}),yt=gt,$t=ne({name:"Target",setup(){const{setTargetRef:e,syncTarget:t}=j("VBinder");return{syncTarget:t,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:t}=this;return e?se(ge("follower",this.$slots),[[t]]):ge("follower",this.$slots)}}),U="@@mmoContext",xt={mounted(e,{value:t}){e[U]={handler:void 0},typeof t=="function"&&(e[U].handler=t,J("mousemoveoutside",e,t))},updated(e,{value:t}){const o=e[U];typeof t=="function"?o.handler?o.handler!==t&&(X("mousemoveoutside",e,o.handler),o.handler=t,J("mousemoveoutside",e,t)):(e[U].handler=t,J("mousemoveoutside",e,t)):o.handler&&(X("mousemoveoutside",e,o.handler),o.handler=void 0)},unmounted(e){const{handler:t}=e[U];t&&X("mousemoveoutside",e,t),e[U].handler=void 0}},Mt=xt,ae={top:"bottom",bottom:"top",left:"right",right:"left"},Se={start:"end",center:"center",end:"start"},ve={top:"height",bottom:"height",left:"width",right:"width"},St={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Bt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},zt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},Be={top:!0,bottom:!1,left:!0,right:!1},ze={top:"end",bottom:"start",left:"end",right:"start"};function Ct(e,t,o,n,l,c){if(!l||c)return{placement:e,top:0,left:0};const[u,i]=e.split("-");let r=i!=null?i:"center",m={top:0,left:0};const w=(h,b,f)=>{let y=0,d=0;const x=o[h]-t[b]-t[h];return x>0&&n&&(f?d=Be[b]?x:-x:y=Be[b]?x:-x),{left:y,top:d}},S=u==="left"||u==="right";if(r!=="center"){const h=zt[e],b=ae[h],f=ve[h];if(o[f]>t[f]){if(t[h]+t[f]<o[f]){const y=(o[f]-t[f])/2;t[h]<y||t[b]<y?t[h]<t[b]?(r=Se[i],m=w(f,b,S)):m=w(f,h,S):r="center"}}else o[f]<t[f]&&t[b]<0&&t[h]>t[b]&&(r=Se[i])}else{const h=u==="bottom"||u==="top"?"left":"top",b=ae[h],f=ve[h],y=(o[f]-t[f])/2;(t[h]<y||t[b]<y)&&(t[h]>t[b]?(r=ze[h],m=w(f,h,S)):(r=ze[b],m=w(f,b,S)))}let a=u;return t[u]<o[ve[u]]&&t[u]<t[ae[u]]&&(a=ae[u]),{placement:r!=="center"?`${a}-${r}`:a,left:m.left,top:m.top}}function At(e,t){return t?Bt[e]:St[e]}function Ot(e,t,o,n,l,c){if(c)switch(e){case"bottom-start":return{top:`${Math.round(o.top-t.top+o.height)}px`,left:`${Math.round(o.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(o.top-t.top+o.height)}px`,left:`${Math.round(o.left-t.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(o.top-t.top)}px`,left:`${Math.round(o.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(o.top-t.top)}px`,left:`${Math.round(o.left-t.left+o.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(o.top-t.top)}px`,left:`${Math.round(o.left-t.left+o.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(o.top-t.top+o.height)}px`,left:`${Math.round(o.left-t.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-t.top)}px`,left:`${Math.round(o.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(o.top-t.top+o.height)}px`,left:`${Math.round(o.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(o.top-t.top)}px`,left:`${Math.round(o.left-t.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-t.top+o.height/2)}px`,left:`${Math.round(o.left-t.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-t.top+o.height/2)}px`,left:`${Math.round(o.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(o.top-t.top+o.height)}px`,left:`${Math.round(o.left-t.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(o.top-t.top+o.height+n)}px`,left:`${Math.round(o.left-t.left+l)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-t.top+o.height+n)}px`,left:`${Math.round(o.left-t.left+o.width+l)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-t.top+n)}px`,left:`${Math.round(o.left-t.left+l)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-t.top+n)}px`,left:`${Math.round(o.left-t.left+o.width+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-t.top+n)}px`,left:`${Math.round(o.left-t.left+o.width+l)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-t.top+o.height+n)}px`,left:`${Math.round(o.left-t.left+o.width+l)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-t.top+n)}px`,left:`${Math.round(o.left-t.left+l)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-t.top+o.height+n)}px`,left:`${Math.round(o.left-t.left+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-t.top+n)}px`,left:`${Math.round(o.left-t.left+o.width/2+l)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-t.top+o.height/2+n)}px`,left:`${Math.round(o.left-t.left+o.width+l)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-t.top+o.height/2+n)}px`,left:`${Math.round(o.left-t.left+l)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(o.top-t.top+o.height+n)}px`,left:`${Math.round(o.left-t.left+o.width/2+l)}px`,transform:"translateX(-50%)"}}}const Et=re([re(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),re(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[re("> *",{pointerEvents:"all"})])]),It=ne({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const t=j("VBinder"),o=te(()=>e.enabled!==void 0?e.enabled:e.show),n=O(null),l=O(null),c=()=>{const{syncTrigger:a}=e;a.includes("scroll")&&t.addScrollListener(r),a.includes("resize")&&t.addResizeListener(r)},u=()=>{t.removeScrollListener(r),t.removeResizeListener(r)};be(()=>{o.value&&(r(),c())});const i=Le();Et.mount({id:"vueuc/binder",head:!0,anchorMetaName:st,ssr:i}),oe(()=>{u()}),vt(()=>{o.value&&r()});const r=()=>{if(!o.value)return;const a=n.value;if(a===null)return;const h=t.targetRef,{x:b,y:f,overlap:y}=e,d=b!==void 0&&f!==void 0?bt(b,f):pe(h);a.style.setProperty("--v-target-width",`${Math.round(d.width)}px`),a.style.setProperty("--v-target-height",`${Math.round(d.height)}px`);const{width:x,minWidth:D,placement:W,internalShift:L,flip:V}=e;a.setAttribute("v-placement",W),y?a.setAttribute("v-overlap",""):a.removeAttribute("v-overlap");const{style:p}=a;x==="target"?p.width=`${d.width}px`:x!==void 0?p.width=x:p.width="",D==="target"?p.minWidth=`${d.width}px`:D!==void 0?p.minWidth=D:p.minWidth="";const B=pe(a),z=pe(l.value),{left:v,top:F,placement:I}=Ct(W,d,B,L,V,y),E=At(I,y),{left:s,top:g,transform:C}=Ot(I,z,d,F,v,y);a.setAttribute("v-placement",I),a.style.setProperty("--v-offset-left",`${Math.round(v)}px`),a.style.setProperty("--v-offset-top",`${Math.round(F)}px`),a.style.transform=`translateX(${s}) translateY(${g}) ${C}`,a.style.setProperty("--v-transform-origin",E),a.style.transformOrigin=E};Q(o,a=>{a?(c(),m()):u()});const m=()=>{Ve().then(r).catch(a=>console.error(a))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(a=>{Q(H(e,a),r)}),["teleportDisabled"].forEach(a=>{Q(H(e,a),m)}),Q(H(e,"syncTrigger"),a=>{a.includes("resize")?t.addResizeListener(r):t.removeResizeListener(r),a.includes("scroll")?t.addScrollListener(r):t.removeScrollListener(r)});const w=Ae(),S=te(()=>{const{to:a}=e;if(a!==void 0)return a;w.value});return{VBinder:t,mergedEnabled:o,offsetContainerRef:l,followerRef:n,mergedTo:S,syncPosition:r}},render(){return $(ot,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,t;const o=$("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[$("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e))]);return this.zindexable?se(o,[[ke,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):o}})}});function Tt(e,t){var o=He(e)?Xe:it;return o(e,at(t))}const me={top:"bottom",bottom:"top",left:"right",right:"left"},M="var(--n-arrow-height) * 1.414",kt=P([_("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 `,[P(">",[_("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),de("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[de("scrollable",[de("show-header-or-footer","padding: var(--n-padding);")])]),ue("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),ue("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),le("scrollable, show-header-or-footer",[ue("content",`
 padding: var(--n-padding);
 `)])]),_("popover-shared",`
 transform-origin: inherit;
 `,[_("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[_("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${M});
 height: calc(${M});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),P("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),P("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),P("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),P("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),A("top-start",`
 top: calc(${M} / -2);
 left: calc(${k("top-start")} - var(--v-offset-left));
 `),A("top",`
 top: calc(${M} / -2);
 transform: translateX(calc(${M} / -2)) rotate(45deg);
 left: 50%;
 `),A("top-end",`
 top: calc(${M} / -2);
 right: calc(${k("top-end")} + var(--v-offset-left));
 `),A("bottom-start",`
 bottom: calc(${M} / -2);
 left: calc(${k("bottom-start")} - var(--v-offset-left));
 `),A("bottom",`
 bottom: calc(${M} / -2);
 transform: translateX(calc(${M} / -2)) rotate(45deg);
 left: 50%;
 `),A("bottom-end",`
 bottom: calc(${M} / -2);
 right: calc(${k("bottom-end")} + var(--v-offset-left));
 `),A("left-start",`
 left: calc(${M} / -2);
 top: calc(${k("left-start")} - var(--v-offset-top));
 `),A("left",`
 left: calc(${M} / -2);
 transform: translateY(calc(${M} / -2)) rotate(45deg);
 top: 50%;
 `),A("left-end",`
 left: calc(${M} / -2);
 bottom: calc(${k("left-end")} + var(--v-offset-top));
 `),A("right-start",`
 right: calc(${M} / -2);
 top: calc(${k("right-start")} - var(--v-offset-top));
 `),A("right",`
 right: calc(${M} / -2);
 transform: translateY(calc(${M} / -2)) rotate(45deg);
 top: 50%;
 `),A("right-end",`
 right: calc(${M} / -2);
 bottom: calc(${k("right-end")} + var(--v-offset-top));
 `),...Tt({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(e,t)=>{const o=["right","left"].includes(t),n=o?"width":"height";return e.map(l=>{const c=l.split("-")[1]==="end",i=`calc((${`var(--v-target-${n}, 0px)`} - ${M}) / 2)`,r=k(l);return P(`[v-placement="${l}"] >`,[_("popover-shared",[le("center-arrow",[_("popover-arrow",`${t}: calc(max(${i}, ${r}) ${c?"+":"-"} var(--v-offset-${o?"left":"top"}));`)])])])})})]);function k(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function A(e,t){const o=e.split("-")[0],n=["top","bottom"].includes(o)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return P(`[v-placement="${e}"] >`,[_("popover-shared",`
 margin-${me[o]}: var(--n-space);
 `,[le("show-arrow",`
 margin-${me[o]}: var(--n-space-arrow);
 `),le("overlap",`
 margin: 0;
 `),Ye("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${o}: 100%;
 ${me[o]}: auto;
 ${n}
 `,[_("popover-arrow",t)])])])}const Pe=Object.assign(Object.assign({},we.props),{to:q.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number}),_t=({arrowStyle:e,clsPrefix:t})=>$("div",{key:"__popover-arrow__",class:`${t}-popover-arrow-wrapper`},$("div",{class:`${t}-popover-arrow`,style:e})),Ft=ne({name:"PopoverBody",inheritAttrs:!1,props:Pe,setup(e,{slots:t,attrs:o}){const{namespaceRef:n,mergedClsPrefixRef:l,inlineThemeDisabled:c}=Ke(e),u=we("Popover","-popover",kt,Ge,e,l),i=O(null),r=j("NPopover"),m=O(null),w=O(e.show),S=O(!1);Oe(()=>{const{show:p}=e;p&&!ht()&&!e.internalDeactivateImmediately&&(S.value=!0)});const a=R(()=>{const{trigger:p,onClickoutside:B}=e,z=[],{positionManuallyRef:{value:v}}=r;return v||(p==="click"&&!B&&z.push([ye,W,void 0,{capture:!0}]),p==="hover"&&z.push([Mt,D])),B&&z.push([ye,W,void 0,{capture:!0}]),(e.displayDirective==="show"||e.animated&&S.value)&&z.push([qe,e.show]),z}),h=R(()=>{const p=e.width==="trigger"?void 0:fe(e.width),B=[];p&&B.push({width:p});const{maxWidth:z,minWidth:v}=e;return z&&B.push({maxWidth:fe(z)}),v&&B.push({maxWidth:fe(v)}),c||B.push(b.value),B}),b=R(()=>{const{common:{cubicBezierEaseInOut:p,cubicBezierEaseIn:B,cubicBezierEaseOut:z},self:{space:v,spaceArrow:F,padding:I,fontSize:E,textColor:s,dividerColor:g,color:C,boxShadow:Y,borderRadius:K,arrowHeight:T,arrowOffset:je,arrowOffsetVertical:De}}=u.value;return{"--n-box-shadow":Y,"--n-bezier":p,"--n-bezier-ease-in":B,"--n-bezier-ease-out":z,"--n-font-size":E,"--n-text-color":s,"--n-color":C,"--n-divider-color":g,"--n-border-radius":K,"--n-arrow-height":T,"--n-arrow-offset":je,"--n-arrow-offset-vertical":De,"--n-padding":I,"--n-space":v,"--n-space-arrow":F}}),f=c?Ue("popover",void 0,b,e):void 0;r.setBodyInstance({syncPosition:y}),oe(()=>{r.setBodyInstance(null)}),Q(H(e,"show"),p=>{e.animated||(p?w.value=!0:w.value=!1)});function y(){var p;(p=i.value)===null||p===void 0||p.syncPosition()}function d(p){e.trigger==="hover"&&e.keepAliveOnHover&&e.show&&r.handleMouseEnter(p)}function x(p){e.trigger==="hover"&&e.keepAliveOnHover&&r.handleMouseLeave(p)}function D(p){e.trigger==="hover"&&!L().contains(xe(p))&&r.handleMouseMoveOutside(p)}function W(p){(e.trigger==="click"&&!L().contains(xe(p))||e.onClickoutside)&&r.handleClickOutside(p)}function L(){return r.getTriggerElement()}Z(Ie,m),Z(Ee,null),Z(Te,null);function V(){if(f==null||f.onRender(),!(e.displayDirective==="show"||e.show||e.animated&&S.value))return null;let B;const z=r.internalRenderBodyRef.value,{value:v}=l;if(z)B=z([`${v}-popover-shared`,f==null?void 0:f.themeClass.value,e.overlap&&`${v}-popover-shared--overlap`,e.showArrow&&`${v}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${v}-popover-shared--center-arrow`],m,h.value,d,x);else{const{value:F}=r.extraClassRef,{internalTrapFocus:I}=e,E=!Me(t.header)||!Me(t.footer),s=()=>{var g;const C=E?$(Ze,null,ce(t.header,T=>T?$("div",{class:`${v}-popover__header`,style:e.headerStyle},T):null),ce(t.default,T=>T?$("div",{class:`${v}-popover__content`,style:e.contentStyle},t):null),ce(t.footer,T=>T?$("div",{class:`${v}-popover__footer`,style:e.footerStyle},T):null)):e.scrollable?(g=t.default)===null||g===void 0?void 0:g.call(t):$("div",{class:`${v}-popover__content`,style:e.contentStyle},t),Y=e.scrollable?$(lt,{contentClass:E?void 0:`${v}-popover__content`,contentStyle:E?void 0:e.contentStyle},{default:()=>C}):C,K=e.showArrow?_t({arrowStyle:e.arrowStyle,clsPrefix:v}):null;return[Y,K]};B=$("div",Qe({class:[`${v}-popover`,`${v}-popover-shared`,f==null?void 0:f.themeClass.value,F.map(g=>`${v}-${g}`),{[`${v}-popover--scrollable`]:e.scrollable,[`${v}-popover--show-header-or-footer`]:E,[`${v}-popover--raw`]:e.raw,[`${v}-popover-shared--overlap`]:e.overlap,[`${v}-popover-shared--show-arrow`]:e.showArrow,[`${v}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:m,style:h.value,onKeydown:r.handleKeydown,onMouseenter:d,onMouseleave:x},o),I?$(nt,{active:e.show,autoFocus:!0},{default:s}):s())}return se(B,a.value)}return{displayed:S,namespace:n,isMounted:r.isMountedRef,zIndex:r.zIndexRef,followerRef:i,adjustedTo:q(e),followerEnabled:w,renderContentNode:V}},render(){return $(It,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===q.tdkey},{default:()=>this.animated?$(Je,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;(e=this.internalOnAfterLeave)===null||e===void 0||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),Nt=Object.keys(Pe),Pt={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function jt(e,t,o){Pt[t].forEach(n=>{e.props?e.props=Object.assign({},e.props):e.props={};const l=e.props[n],c=o[n];l?e.props[n]=(...u)=>{l(...u),c(...u)}:e.props[n]=c})}const Dt=et("").type,Wt={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:q.propTo,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},Lt=Object.assign(Object.assign(Object.assign({},we.props),Wt),{internalOnAfterLeave:Function,internalRenderBody:Function}),eo=ne({name:"Popover",inheritAttrs:!1,props:Lt,__popover__:!0,setup(e){const t=Ae(),o=O(null),n=R(()=>e.show),l=O(e.defaultShow),c=ut(n,l),u=te(()=>e.disabled?!1:c.value),i=()=>{if(e.disabled)return!0;const{getDisabled:s}=e;return!!(s!=null&&s())},r=()=>i()?!1:c.value,m=ft(e,["arrow","showArrow"]),w=R(()=>e.overlap?!1:m.value);let S=null;const a=O(null),h=O(null),b=te(()=>e.x!==void 0&&e.y!==void 0);function f(s){const{"onUpdate:show":g,onUpdateShow:C,onShow:Y,onHide:K}=e;l.value=s,g&&ie(g,s),C&&ie(C,s),s&&Y&&ie(Y,!0),s&&K&&ie(K,!1)}function y(){S&&S.syncPosition()}function d(){const{value:s}=a;s&&(window.clearTimeout(s),a.value=null)}function x(){const{value:s}=h;s&&(window.clearTimeout(s),h.value=null)}function D(){const s=i();if(e.trigger==="focus"&&!s){if(r())return;f(!0)}}function W(){const s=i();if(e.trigger==="focus"&&!s){if(!r())return;f(!1)}}function L(){const s=i();if(e.trigger==="hover"&&!s){if(x(),a.value!==null||r())return;const g=()=>{f(!0),a.value=null},{delay:C}=e;C===0?g():a.value=window.setTimeout(g,C)}}function V(){const s=i();if(e.trigger==="hover"&&!s){if(d(),h.value!==null||!r())return;const g=()=>{f(!1),h.value=null},{duration:C}=e;C===0?g():h.value=window.setTimeout(g,C)}}function p(){V()}function B(s){var g;!r()||(e.trigger==="click"&&(d(),x(),f(!1)),(g=e.onClickoutside)===null||g===void 0||g.call(e,s))}function z(){if(e.trigger==="click"&&!i()){d(),x();const s=!r();f(s)}}function v(s){!e.internalTrapFocus||s.key==="Escape"&&(d(),x(),f(!1))}function F(s){l.value=s}function I(){var s;return(s=o.value)===null||s===void 0?void 0:s.targetRef}function E(s){S=s}return Z("NPopover",{getTriggerElement:I,handleKeydown:v,handleMouseEnter:L,handleMouseLeave:V,handleClickOutside:B,handleMouseMoveOutside:p,setBodyInstance:E,positionManuallyRef:b,isMountedRef:t,zIndexRef:H(e,"zIndex"),extraClassRef:H(e,"internalExtraClass"),internalRenderBodyRef:H(e,"internalRenderBody")}),Oe(()=>{c.value&&i()&&f(!1)}),{binderInstRef:o,positionManually:b,mergedShowConsideringDisabledProp:u,uncontrolledShow:l,mergedShowArrow:w,getMergedShow:r,setShow:F,handleClick:z,handleMouseEnter:L,handleMouseLeave:V,handleFocus:D,handleBlur:W,syncPosition:y}},render(){var e;const{positionManually:t,$slots:o}=this;let n,l=!1;if(!t&&(o.activator?n=$e(o,"activator"):n=$e(o,"trigger"),n)){n=Re(n),n=n.type===Dt?$("span",[n]):n;const c={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((e=n.type)===null||e===void 0)&&e.__popover__)l=!0,n.props||(n.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),n.props.internalSyncTargetWithParent=!0,n.props.internalInheritedEventHandlers?n.props.internalInheritedEventHandlers=[c,...n.props.internalInheritedEventHandlers]:n.props.internalInheritedEventHandlers=[c];else{const{internalInheritedEventHandlers:u}=this,i=[c,...u],r={onBlur:m=>{i.forEach(w=>{w.onBlur(m)})},onFocus:m=>{i.forEach(w=>{w.onFocus(m)})},onClick:m=>{i.forEach(w=>{w.onClick(m)})},onMouseenter:m=>{i.forEach(w=>{w.onMouseenter(m)})},onMouseleave:m=>{i.forEach(w=>{w.onMouseleave(m)})}};jt(n,u?"nested":t?"manual":this.trigger,r)}}return $(yt,{ref:"binderInstRef",syncTarget:!l,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const c=this.getMergedShow();return[this.internalTrapFocus&&c?se($("div",{style:{position:"fixed",inset:0}}),[[ke,{enabled:c,zIndex:this.zIndex}]]):null,t?null:$($t,null,{default:()=>n}),$(Ft,rt(this.$props,Nt,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:c})),{default:()=>{var u,i;return(i=(u=this.$slots).default)===null||i===void 0?void 0:i.call(u)},header:()=>{var u,i;return(i=(u=this.$slots).header)===null||i===void 0?void 0:i.call(u)},footer:()=>{var u,i;return(i=(u=this.$slots).footer)===null||i===void 0?void 0:i.call(u)}})]}})}});export{eo as N,yt as V,mt as a,$t as b,It as c,Rt as i,vt as o,Wt as p,_t as r,q as u};
