import{u as i,E as u,r as d,O as n}from"./index.02a17cf1.js";import{g as c}from"./index.2cf2fa64.js";function K(r){const{t}=i(),s={type:"MYSQL",label:"MYSQL",name:"",note:"",host:"",port:o.MYSQL.defaultPort,principal:"",javaSecurityKrb5Conf:"",loginUserKeytabUsername:"",loginUserKeytabPath:"",mode:"",userName:"",password:"",database:"",connectType:"",other:"",endpoint:"",MSIClientId:"",dbUser:"",datawarehouse:""},e=u({detailFormRef:d(),detailForm:{...s},requiredDataBase:!0,showHost:!0,showPort:!0,showAwsRegion:!1,showRestEndpoint:!1,showCompatibleMode:!1,showConnectType:!1,showPrincipal:!1,showMode:!1,showDataBaseName:!0,showJDBCConnectParameters:!0,showPublicKey:!1,showNamespace:!1,showKubeConfig:!1,showAccessKeyId:!1,showAccessKeySecret:!1,showRegionId:!1,showEndpoint:!1,rules:{name:{trigger:["input"],validator(){if(!e.detailForm.name)return new Error(t("datasource.datasource_name_tips"))}},host:{trigger:["input"],validator(){if(!e.detailForm.host&&e.showHost)return new Error(t("datasource.ip_tips"))}},port:{trigger:["input"],validator(){if(!(e.showMode&&e.detailForm.mode==="IAM-accessKey")&&!e.detailForm.port&&e.showPort)return new Error(t("datasource.port_tips"))}},principal:{trigger:["input"],validator(){if(!e.detailForm.principal&&e.showPrincipal)return new Error(t("datasource.principal_tips"))}},mode:{trigger:["blur"],validator(){if(!e.detailForm.mode&&e.showMode)return new Error(t("datasource.mode_tips"))}},userName:{trigger:["input"],validator(){if(!e.detailForm.userName&&e.detailForm.type!=="AZURESQL"&&e.detailForm.type!=="K8S"&&e.detailForm.type!=="ALIYUN_SERVERLESS_SPARK")return new Error(t("datasource.user_name_tips"))}},awsRegion:{trigger:["input"],validator(){if(!e.detailForm.awsRegion&&e.showAwsRegion)return new Error(t("datasource.aws_region_tips"))}},database:{trigger:["input"],validator(){if(!e.detailForm.database&&e.requiredDataBase)return new Error(t("datasource.database_name_tips"))}},datawarehouse:{trigger:["input"],validator(){if(!e.detailForm.datawarehouse)return new Error(t("datasource.datawarehouse_tips"))}},connectType:{trigger:["update"],validator(){if(!e.detailForm.connectType&&e.showConnectType)return new Error(t("datasource.oracle_connect_type_tips"))}},other:{trigger:["input","blur"],validator(){if(e.detailForm.other&&!n.isJson(e.detailForm.other))return new Error(t("datasource.jdbc_format_tips"))}},endpoint:{trigger:["input"],validator(){if(!e.detailForm.endpoint&&e.detailForm.type==="AZURESQL"&&e.detailForm.mode==="accessToken")return new Error(t("datasource.endpoint_tips"))}},dbUser:{trigger:["input"],validator(){if(!e.detailForm.dbUser&&e.showMode&&e.detailForm.mode==="IAM-accessKey"&&e.detailForm.type!="SAGEMAKER")return new Error(t("datasource.IAM-accessKey"))}}},modeOptions:[{label:"SqlPassword",value:"SqlPassword"},{label:"ActiveDirectoryPassword",value:"ActiveDirectoryPassword"},{label:"ActiveDirectoryMSI",value:"ActiveDirectoryMSI"},{label:"ActiveDirectoryServicePrincipal",value:"ActiveDirectoryServicePrincipal"},{label:"accessToken",value:"accessToken"}],redShiftModeOptions:[{label:"password",value:"password"},{label:"IAM-accessKey",value:"IAM-accessKey"}],sagemakerModeOption:[{label:"IAM-accessKey",value:"IAM-accessKey"}]});return{state:e,changeType:async(a,l)=>{e.detailForm.port=l.previousPort||l.defaultPort,e.detailForm.type=a,e.requiredDataBase=a!=="POSTGRESQL"&&a!=="ATHENA"&&a!=="DOLPHINDB",e.showHost=a!=="ATHENA",e.showPort=a!=="ATHENA",e.showAwsRegion=a==="ATHENA"||a==="SAGEMAKER",e.showMode=["AZURESQL","REDSHIFT","SAGEMAKER"].includes(a),a==="ORACLE"&&!r&&(e.detailForm.connectType="ORACLE_SERVICE_NAME"),e.showConnectType=a==="ORACLE",e.showCompatibleMode=a=="OCEANBASE",a==="HIVE"||a==="SPARK"?e.showPrincipal=await c():e.showPrincipal=!1,a==="SSH"||a==="ZEPPELIN"||a==="SAGEMAKER"||a==="K8S"||a==="ALIYUN_SERVERLESS_SPARK"||a==="DOLPHINDB"?(e.showDataBaseName=!1,e.requiredDataBase=!1,e.showJDBCConnectParameters=!1,e.showPublicKey=!1,a==="DOLPHINDB"&&(e.showJDBCConnectParameters=!0,e.showPublicKey=!1),a==="SSH"&&(e.showPublicKey=!0),a==="ZEPPELIN"?(e.showHost=!1,e.showPort=!1,e.showRestEndpoint=!0):e.showRestEndpoint=!1,(a==="SAGEMAKER"||a==="K8S"||a=="ALIYUN_SERVERLESS_SPARK")&&(e.showHost=!1,e.showPort=!1),a==="K8S"?(e.showNamespace=!0,e.showKubeConfig=!0):(e.showNamespace=!1,e.showKubeConfig=!1),a==="ALIYUN_SERVERLESS_SPARK"?(e.showAccessKeyId=!0,e.showAccessKeySecret=!0,e.showRegionId=!0,e.showEndpoint=!0):(e.showAccessKeyId=!1,e.showAccessKeySecret=!1,e.showRegionId=!1,e.showEndpoint=!1)):(e.showDataBaseName=!0,e.requiredDataBase=!0,e.showJDBCConnectParameters=!0,e.showPublicKey=!1,e.showRestEndpoint=!1,e.showNamespace=!1,e.showKubeConfig=!1,e.showAccessKeyId=!1,e.showAccessKeySecret=!1,e.showRegionId=!1,e.showEndpoint=!1)},changePort:async()=>{if(!e.detailForm.type)return;const a=o[e.detailForm.type];a.previousPort=e.detailForm.port},resetFieldsValue:()=>{e.detailForm={...s}},setFieldsValue:a=>{e.detailForm={...e.detailForm,...a,other:a.other?JSON.stringify(a.other):a.other}},getFieldsValue:()=>e.detailForm}}const o={MYSQL:{value:"MYSQL",label:"MYSQL",defaultPort:3306},POSTGRESQL:{value:"POSTGRESQL",label:"POSTGRESQL",defaultPort:5432},HIVE:{value:"HIVE",label:"HIVE/IMPALA",defaultPort:1e4},KYUUBI:{value:"KYUUBI",label:"KYUUBI",defaultPort:1e4},SPARK:{value:"SPARK",label:"SPARK",defaultPort:10015},CLICKHOUSE:{value:"CLICKHOUSE",label:"CLICKHOUSE",defaultPort:8123},ORACLE:{value:"ORACLE",label:"ORACLE",defaultPort:1521},SQLSERVER:{value:"SQLSERVER",label:"SQLSERVER",defaultPort:1433},DB2:{value:"DB2",label:"DB2",defaultPort:5e4},VERTICA:{value:"VERTICA",label:"VERTICA",defaultPort:5433},PRESTO:{value:"PRESTO",label:"PRESTO",defaultPort:8080},REDSHIFT:{value:"REDSHIFT",label:"REDSHIFT",defaultPort:5439},ATHENA:{value:"ATHENA",label:"ATHENA",defaultPort:0},TRINO:{value:"TRINO",label:"TRINO",defaultPort:8080},AZURESQL:{value:"AZURESQL",label:"AZURESQL",defaultPort:1433},STARROCKS:{value:"STARROCKS",label:"STARROCKS",defaultPort:9030},DAMENG:{value:"DAMENG",label:"DAMENG",defaultPort:5236},OCEANBASE:{value:"OCEANBASE",label:"OCEANBASE",defaultPort:2881},SNOWFLAKE:{value:"SNOWFLAKE",label:"SNOWFLAKE",defaultPort:3306},SSH:{value:"SSH",label:"SSH",defaultPort:22},DATABEND:{value:"DATABEND",label:"DATABEND",defaultPort:8e3},HANA:{value:"HANA",label:"HANA",defaultPort:30015},ZEPPELIN:{value:"ZEPPELIN",label:"ZEPPELIN",defaultPort:8080},DORIS:{value:"DORIS",label:"DORIS",defaultPort:9030},SAGEMAKER:{value:"SAGEMAKER",label:"SAGEMAKER",defaultPort:0},K8S:{value:"K8S",label:"K8S",defaultPort:6443},ALIYUN_SERVERLESS_SPARK:{value:"ALIYUN_SERVERLESS_SPARK",label:"ALIYUN_SERVERLESS_SPARK",defaultPort:0},DOLPHINDB:{value:"DOLPHINDB",label:"DOLPHINDB",defaultPort:8848}},I=Object.values(o).map(r=>(r.class="options-datasource-type",r)),E="_content_r9ujz_17",S="_itemBox_r9ujz_21",A="_typeBox_r9ujz_33",f="_disabledBox_r9ujz_48",v={content:E,itemBox:S,typeBox:A,"text-color":"_text-color_r9ujz_43",disabledBox:f};export{I as a,o as d,v as s,K as u};
