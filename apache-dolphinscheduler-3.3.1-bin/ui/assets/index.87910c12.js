import{aP as V,aA as g,d as C,r as R,g as F,o as D,a2 as T,u as O,c as n}from"./index.02a17cf1.js";import{q}from"./index.455b91d3.js";import{u as E}from"./index.9b0cc109.js";import{C as d}from"./index.ef447d1d.js";import{R as G}from"./index.bfc434f6.js";import{C as P}from"./CheckCircleOutlined.b15d9580.js";import{C as $}from"./CloseCircleOutlined.d6e82e31.js";import{u as k}from"./use-locale.47aab0f5.js";import{t as I}from"./toNumber.f676da43.js";import{a as f,N as B}from"./Grid.1918be0a.js";import{N as w}from"./Icon.0cd298dd.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./Card.f8db533a.js";import"./resolve-slot.92499a18.js";import"./index.5f9a33e7.js";import"./keysOf.843c523b.js";import"./utils.eff12f29.js";import"./is-browser.e7afaa57.js";import"./VResizeObserver.f80d6e55.js";import"./flatten.8ad131a2.js";import"./get-slot.eeb09d52.js";import"./next-frame-once.50ecadf2.js";import"./format-length.a6a40b1f.js";var y=1/0,L=17976931348623157e292;function U(t){if(!t)return t===0?t:0;if(t=I(t),t===y||t===-y){var e=t<0?-1:1;return e*L}return t===t?t:0}function j(t){var e=U(t),o=e%1;return e===e?o?e-o:e:0}var z=V.isFinite,X=Math.min;function Y(t){var e=Math[t];return function(o,a){if(o=I(o),a=a==null?0:X(j(a),292),a&&z(o)){var s=(g(o)+"e").split("e"),i=e(s[0]+"e"+(+s[1]+a));return s=(g(i)+"e").split("e"),+(s[0]+"e"+(+s[1]-a))}return e(o)}}var H=Y("round");const J=H,K=t=>1-Math.pow(1-t,5);function Q(t){const{from:e,to:o,duration:a,onUpdate:s,onFinish:i}=t,u=()=>{const c=performance.now(),m=Math.min(c-h,a),p=e+(o-e)*K(m/a);if(m===a){i();return}s(p),requestAnimationFrame(u)},h=performance.now();u()}const W={to:{type:Number,default:0},precision:{type:Number,default:0},showSeparator:Boolean,locale:String,from:{type:Number,default:0},active:{type:Boolean,default:!0},duration:{type:Number,default:2e3},onFinish:Function},v=C({name:"NumberAnimation",props:W,setup(t){const{localeRef:e}=k("name"),{duration:o}=t,a=R(t.from),s=F(()=>{const{locale:r}=t;return r!==void 0?r:e.value});let i=!1;const u=r=>{a.value=r},h=()=>{var r;a.value=t.to,i=!1,(r=t.onFinish)===null||r===void 0||r.call(t)},c=(r=t.from,_=t.to)=>{i=!0,a.value=t.from,r!==_&&Q({from:r,to:_,duration:o,onUpdate:u,onFinish:h})},m=F(()=>{var r;const b=J(a.value,t.precision).toFixed(t.precision).split("."),N=new Intl.NumberFormat(s.value),M=(r=N.formatToParts(.5).find(A=>A.type==="decimal"))===null||r===void 0?void 0:r.value,x=t.showSeparator?N.format(Number(b[0])):b[0],S=b[1];return{integer:x,decimal:S,decimalSeparator:M}});function p(){i||c()}return D(()=>{T(()=>{t.active&&c()})}),Object.assign({formattedValue:m},{play:p})},render(){const{formattedValue:{integer:t,decimal:e,decimalSeparator:o}}=this;return[t,e?o:null,e]}});function Z(){return{getDatabase:()=>{const{state:e}=E(q(),[]);return e}}}const tt="_health_1mwhu_17",et="_connections_1mwhu_33",l={health:tt,"health-success":"_health-success_1mwhu_25","health-error":"_health-error_1mwhu_29",connections:et},xt=C({name:"db",setup(){const{t}=O(),{getDatabase:e}=Z(),o=R(e());return{t,databaseRef:o}},render(){const{t,databaseRef:e}=this;return e.length<1?n(G,{title:t("monitor.db.db_no_data_result_title"),description:t("monitor.db.db_no_data_result_desc"),status:"info",size:"medium"},null):n(B,{"x-gap":"12","y-gap":"8",cols:"2 2xl:4",responsive:"screen"},{default:()=>[n(f,null,{default:()=>[n(d,{title:t("monitor.db.health_state")},{default:()=>[n("div",{class:l.health},[e[0]&&(e[0].state?n(w,{class:l["health-success"]},{default:()=>[n(P,null,null)]}):n(w,{class:l["health-error"]},{default:()=>[n($,null,null)]}))])]})]}),n(f,null,{default:()=>[n(d,{title:`${t("monitor.db.max_connections")}${e[0]?" - "+e[0].date:""}`},{default:()=>[n("div",{class:l.connections},[e[0]&&n(v,{from:0,to:e[0].maxConnections},null)])]})]}),n(f,null,{default:()=>[n(d,{title:t("monitor.db.threads_connections")},{default:()=>[n("div",{class:l.connections},[e[0]&&n(v,{from:0,to:e[0].threadsConnections},null)])]})]}),n(f,null,{default:()=>[n(d,{title:t("monitor.db.threads_running_connections")},{default:()=>[n("div",{class:l.connections},[e[0]&&n(v,{from:0,to:e[0].threadsRunningConnections},null)])]})]})]})}});export{xt as default};
