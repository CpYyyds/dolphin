import{d as Be,aE as Ne,aF as Ve,k as y,X as Ae,l as ie,n as de,p as le,e as He,b as Ge,f as qe,r as R,g as x,a2 as Je,o as Ke,V as Qe,t as Ze,h as z,F as en,aG as nn,T as Se,an as tn}from"./index.02a17cf1.js";import{V as Re}from"./VResizeObserver.f80d6e55.js";function on(t){return t.composedPath()[0]||null}const xe=Be({render(){var t,a;return(a=(t=this.$slots).default)===null||a===void 0?void 0:a.call(t)}});function ae(t){return t.composedPath()[0]}const rn={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function ln(t,a,s){if(t==="mousemoveoutside"){const f=l=>{a.contains(ae(l))||s(l)};return{mousemove:f,touchstart:f}}else if(t==="clickoutside"){let f=!1;const l=g=>{f=!a.contains(ae(g))},h=g=>{!f||a.contains(ae(g))||s(g)};return{mousedown:l,mouseup:h,touchstart:l,touchend:h}}return console.error(`[evtd/create-trap-handler]: name \`${t}\` is invalid. This could be a bug of evtd.`),{}}function ye(t,a,s){const f=rn[t];let l=f.get(a);l===void 0&&f.set(a,l=new WeakMap);let h=l.get(s);return h===void 0&&l.set(s,h=ln(t,a,s)),h}function an(t,a,s,f){if(t==="mousemoveoutside"||t==="clickoutside"){const l=ye(t,a,s);return Object.keys(l).forEach(h=>{oe(h,document,l[h],f)}),!0}return!1}function sn(t,a,s,f){if(t==="mousemoveoutside"||t==="clickoutside"){const l=ye(t,a,s);return Object.keys(l).forEach(h=>{q(h,document,l[h],f)}),!0}return!1}function cn(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const t=new WeakMap,a=new WeakMap;function s(){t.set(this,!0)}function f(){t.set(this,!0),a.set(this,!0)}function l(n,o,c){const u=n[o];return n[o]=function(){return c.apply(n,arguments),u.apply(n,arguments)},n}function h(n,o){n[o]=Event.prototype[o]}const g=new WeakMap,O=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function C(){var n;return(n=g.get(this))!==null&&n!==void 0?n:null}function M(n,o){O!==void 0&&Object.defineProperty(n,"currentTarget",{configurable:!0,enumerable:!0,get:o!=null?o:O.get})}const m={bubble:{},capture:{}},p={};function I(){const n=function(o){const{type:c,eventPhase:u,bubbles:b}=o,E=ae(o);if(u===2)return;const P=u===1?"capture":"bubble";let B=E;const S=[];for(;B===null&&(B=window),S.push(B),B!==window;)B=B.parentNode||null;const W=m.capture[c],L=m.bubble[c];if(l(o,"stopPropagation",s),l(o,"stopImmediatePropagation",f),M(o,C),P==="capture"){if(W===void 0)return;for(let $=S.length-1;$>=0&&!t.has(o);--$){const U=S[$],V=W.get(U);if(V!==void 0){g.set(o,U);for(const X of V){if(a.has(o))break;X(o)}}if($===0&&!b&&L!==void 0){const X=L.get(U);if(X!==void 0)for(const re of X){if(a.has(o))break;re(o)}}}}else if(P==="bubble"){if(L===void 0)return;for(let $=0;$<S.length&&!t.has(o);++$){const U=S[$],V=L.get(U);if(V!==void 0){g.set(o,U);for(const X of V){if(a.has(o))break;X(o)}}}}h(o,"stopPropagation"),h(o,"stopImmediatePropagation"),M(o)};return n.displayName="evtdUnifiedHandler",n}function j(){const n=function(o){const{type:c,eventPhase:u}=o;if(u!==2)return;const b=p[c];b!==void 0&&b.forEach(E=>E(o))};return n.displayName="evtdUnifiedWindowEventHandler",n}const _=I(),F=j();function k(n,o){const c=m[n];return c[o]===void 0&&(c[o]=new Map,window.addEventListener(o,_,n==="capture")),c[o]}function N(n){return p[n]===void 0&&(p[n]=new Set,window.addEventListener(n,F)),p[n]}function J(n,o){let c=n.get(o);return c===void 0&&n.set(o,c=new Set),c}function Z(n,o,c,u){const b=m[o][c];if(b!==void 0){const E=b.get(n);if(E!==void 0&&E.has(u))return!0}return!1}function ee(n,o){const c=p[n];return!!(c!==void 0&&c.has(o))}function ne(n,o,c,u){let b;if(typeof u=="object"&&u.once===!0?b=W=>{T(n,o,b,u),c(W)}:b=c,an(n,o,b,u))return;const P=u===!0||typeof u=="object"&&u.capture===!0?"capture":"bubble",B=k(P,n),S=J(B,o);if(S.has(b)||S.add(b),o===window){const W=N(n);W.has(b)||W.add(b)}}function T(n,o,c,u){if(sn(n,o,c,u))return;const E=u===!0||typeof u=="object"&&u.capture===!0,P=E?"capture":"bubble",B=k(P,n),S=J(B,o);if(o===window&&!Z(o,E?"bubble":"capture",n,c)&&ee(n,c)){const L=p[n];L.delete(c),L.size===0&&(window.removeEventListener(n,F),p[n]=void 0)}S.has(c)&&S.delete(c),S.size===0&&B.delete(o),B.size===0&&(window.removeEventListener(n,_,P==="capture"),m[P][n]=void 0)}return{on:ne,off:T}}const{on:oe,off:q}=cn(),un=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function dn(){return un}function fn(t){const a={isDeactivated:!1};let s=!1;return Ne(()=>{if(a.isDeactivated=!1,!s){s=!0;return}t()}),Ve(()=>{a.isDeactivated=!0,s||(s=!0)}),a}const{cubicBezierEaseInOut:Te}=Ae;function hn({name:t="fade-in",enterDuration:a="0.2s",leaveDuration:s="0.2s",enterCubicBezier:f=Te,leaveCubicBezier:l=Te}={}){return[y(`&.${t}-transition-enter-active`,{transition:`all ${a} ${f}!important`}),y(`&.${t}-transition-leave-active`,{transition:`all ${s} ${l}!important`}),y(`&.${t}-transition-enter-from, &.${t}-transition-leave-to`,{opacity:0}),y(`&.${t}-transition-leave-from, &.${t}-transition-enter-to`,{opacity:1})]}const vn=ie("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[y(">",[ie("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[y("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),y(">",[ie("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),y(">, +",[ie("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 -webkit-user-select: none;
 `,[de("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[y(">",[le("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),de("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[y(">",[le("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),de("disabled",[y(">",[le("scrollbar",{pointerEvents:"none"})])]),y(">",[le("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[hn(),y("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),bn=Object.assign(Object.assign({},He.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),Ee=Be({name:"Scrollbar",props:bn,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:a,inlineThemeDisabled:s,mergedRtlRef:f}=Ge(t),l=qe("Scrollbar",f,a),h=R(null),g=R(null),O=R(null),C=R(null),M=R(null),m=R(null),p=R(null),I=R(null),j=R(null),_=R(null),F=R(null),k=R(0),N=R(0),J=R(!1),Z=R(!1);let ee=!1,ne=!1,T,n,o=0,c=0,u=0,b=0;const E=dn(),P=x(()=>{const{value:e}=I,{value:r}=m,{value:i}=_;return e===null||r===null||i===null?0:Math.min(e,i*e/r+t.size*1.5)}),B=x(()=>`${P.value}px`),S=x(()=>{const{value:e}=j,{value:r}=p,{value:i}=F;return e===null||r===null||i===null?0:i*e/r+t.size*1.5}),W=x(()=>`${S.value}px`),L=x(()=>{const{value:e}=I,{value:r}=k,{value:i}=m,{value:d}=_;if(e===null||i===null||d===null)return 0;{const w=i-e;return w?r/w*(d-P.value):0}}),$=x(()=>`${L.value}px`),U=x(()=>{const{value:e}=j,{value:r}=N,{value:i}=p,{value:d}=F;if(e===null||i===null||d===null)return 0;{const w=i-e;return w?r/w*(d-S.value):0}}),V=x(()=>`${U.value}px`),X=x(()=>{const{value:e}=I,{value:r}=m;return e!==null&&r!==null&&r>e}),re=x(()=>{const{value:e}=j,{value:r}=p;return e!==null&&r!==null&&r>e}),Pe=x(()=>{const{trigger:e}=t;return e==="none"||J.value}),ze=x(()=>{const{trigger:e}=t;return e==="none"||Z.value}),A=x(()=>{const{container:e}=t;return e?e():g.value}),Me=x(()=>{const{content:e}=t;return e?e():O.value}),fe=fn(()=>{t.container||he({top:k.value,left:N.value})}),We=()=>{fe.isDeactivated||G()},$e=e=>{if(fe.isDeactivated)return;const{onResize:r}=t;r&&r(e),G()},he=(e,r)=>{if(!t.scrollable)return;if(typeof e=="number"){K(r!=null?r:0,e,0,!1,"auto");return}const{left:i,top:d,index:w,elSize:H,position:D,behavior:v,el:Y,debounce:te=!0}=e;(i!==void 0||d!==void 0)&&K(i!=null?i:0,d!=null?d:0,0,!1,v),Y!==void 0?K(0,Y.offsetTop,Y.offsetHeight,te,v):w!==void 0&&H!==void 0?K(0,w*H,H,te,v):D==="bottom"?K(0,Number.MAX_SAFE_INTEGER,0,!1,v):D==="top"&&K(0,0,0,!1,v)},Ce=(e,r)=>{if(!t.scrollable)return;const{value:i}=A;!i||(typeof e=="object"?i.scrollBy(e):i.scrollBy(e,r||0))};function K(e,r,i,d,w){const{value:H}=A;if(!!H){if(d){const{scrollTop:D,offsetHeight:v}=H;if(r>D){r+i<=D+v||H.scrollTo({left:e,top:r+i-v,behavior:w});return}}H.scrollTo({left:e,top:r,behavior:w})}}function ke(){Ye(),Oe(),G()}function Le(){se()}function se(){Xe(),De()}function Xe(){n!==void 0&&window.clearTimeout(n),n=window.setTimeout(()=>{Z.value=!1},t.duration)}function De(){T!==void 0&&window.clearTimeout(T),T=window.setTimeout(()=>{J.value=!1},t.duration)}function Ye(){T!==void 0&&window.clearTimeout(T),J.value=!0}function Oe(){n!==void 0&&window.clearTimeout(n),Z.value=!0}function Ie(e){const{onScroll:r}=t;r&&r(e),ve()}function ve(){const{value:e}=A;e&&(k.value=e.scrollTop,N.value=e.scrollLeft*(l!=null&&l.value?-1:1))}function je(){const{value:e}=Me;e&&(m.value=e.offsetHeight,p.value=e.offsetWidth);const{value:r}=A;r&&(I.value=r.offsetHeight,j.value=r.offsetWidth);const{value:i}=M,{value:d}=C;i&&(F.value=i.offsetWidth),d&&(_.value=d.offsetHeight)}function be(){const{value:e}=A;e&&(k.value=e.scrollTop,N.value=e.scrollLeft*(l!=null&&l.value?-1:1),I.value=e.offsetHeight,j.value=e.offsetWidth,m.value=e.scrollHeight,p.value=e.scrollWidth);const{value:r}=M,{value:i}=C;r&&(F.value=r.offsetWidth),i&&(_.value=i.offsetHeight)}function G(){!t.scrollable||(t.useUnifiedContainer?be():(je(),ve()))}function we(e){var r;return!(!((r=h.value)===null||r===void 0)&&r.contains(on(e)))}function Ue(e){e.preventDefault(),e.stopPropagation(),ne=!0,oe("mousemove",window,pe,!0),oe("mouseup",window,ge,!0),c=N.value,u=l!=null&&l.value?window.innerWidth-e.clientX:e.clientX}function pe(e){if(!ne)return;T!==void 0&&window.clearTimeout(T),n!==void 0&&window.clearTimeout(n);const{value:r}=j,{value:i}=p,{value:d}=S;if(r===null||i===null)return;const H=(l!=null&&l.value?window.innerWidth-e.clientX-u:e.clientX-u)*(i-r)/(r-d),D=i-r;let v=c+H;v=Math.min(D,v),v=Math.max(v,0);const{value:Y}=A;if(Y){Y.scrollLeft=v*(l!=null&&l.value?-1:1);const{internalOnUpdateScrollLeft:te}=t;te&&te(v)}}function ge(e){e.preventDefault(),e.stopPropagation(),q("mousemove",window,pe,!0),q("mouseup",window,ge,!0),ne=!1,G(),we(e)&&se()}function _e(e){e.preventDefault(),e.stopPropagation(),ee=!0,oe("mousemove",window,ce,!0),oe("mouseup",window,ue,!0),o=k.value,b=e.clientY}function ce(e){if(!ee)return;T!==void 0&&window.clearTimeout(T),n!==void 0&&window.clearTimeout(n);const{value:r}=I,{value:i}=m,{value:d}=P;if(r===null||i===null)return;const H=(e.clientY-b)*(i-r)/(r-d),D=i-r;let v=o+H;v=Math.min(D,v),v=Math.max(v,0);const{value:Y}=A;Y&&(Y.scrollTop=v)}function ue(e){e.preventDefault(),e.stopPropagation(),q("mousemove",window,ce,!0),q("mouseup",window,ue,!0),ee=!1,G(),we(e)&&se()}Je(()=>{const{value:e}=re,{value:r}=X,{value:i}=a,{value:d}=M,{value:w}=C;d&&(e?d.classList.remove(`${i}-scrollbar-rail--disabled`):d.classList.add(`${i}-scrollbar-rail--disabled`)),w&&(r?w.classList.remove(`${i}-scrollbar-rail--disabled`):w.classList.add(`${i}-scrollbar-rail--disabled`))}),Ke(()=>{t.container||G()}),Qe(()=>{T!==void 0&&window.clearTimeout(T),n!==void 0&&window.clearTimeout(n),q("mousemove",window,ce,!0),q("mouseup",window,ue,!0)});const Fe=He("Scrollbar","-scrollbar",vn,nn,t,a),me=x(()=>{const{common:{cubicBezierEaseInOut:e,scrollbarBorderRadius:r,scrollbarHeight:i,scrollbarWidth:d},self:{color:w,colorHover:H}}=Fe.value;return{"--n-scrollbar-bezier":e,"--n-scrollbar-color":w,"--n-scrollbar-color-hover":H,"--n-scrollbar-border-radius":r,"--n-scrollbar-width":d,"--n-scrollbar-height":i}}),Q=s?Ze("scrollbar",void 0,me,t):void 0;return Object.assign(Object.assign({},{scrollTo:he,scrollBy:Ce,sync:G,syncUnifiedContainer:be,handleMouseEnterWrapper:ke,handleMouseLeaveWrapper:Le}),{mergedClsPrefix:a,rtlEnabled:l,containerScrollTop:k,wrapperRef:h,containerRef:g,contentRef:O,yRailRef:C,xRailRef:M,needYBar:X,needXBar:re,yBarSizePx:B,xBarSizePx:W,yBarTopPx:$,xBarLeftPx:V,isShowXBar:Pe,isShowYBar:ze,isIos:E,handleScroll:Ie,handleContentResize:We,handleContainerResize:$e,handleYScrollMouseDown:_e,handleXScrollMouseDown:Ue,cssVars:s?void 0:me,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender})},render(){var t;const{$slots:a,mergedClsPrefix:s,triggerDisplayManually:f,rtlEnabled:l,internalHoistYRail:h}=this;if(!this.scrollable)return(t=a.default)===null||t===void 0?void 0:t.call(a);const g=this.trigger==="none",O=()=>z("div",{ref:"yRailRef",class:[`${s}-scrollbar-rail`,`${s}-scrollbar-rail--vertical`],"data-scrollbar-rail":!0,style:this.verticalRailStyle,"aria-hidden":!0},z(g?xe:Se,g?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?z("div",{class:`${s}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),C=()=>{var m,p;return(m=this.onRender)===null||m===void 0||m.call(this),z("div",tn(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${s}-scrollbar`,this.themeClass,l&&`${s}-scrollbar--rtl`],style:this.cssVars,onMouseenter:f?void 0:this.handleMouseEnterWrapper,onMouseleave:f?void 0:this.handleMouseLeaveWrapper}),[this.container?(p=a.default)===null||p===void 0?void 0:p.call(a):z("div",{role:"none",ref:"containerRef",class:[`${s}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},z(Re,{onResize:this.handleContentResize},{default:()=>z("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${s}-scrollbar-content`,this.contentClass]},a)})),h?null:O(),this.xScrollable&&z("div",{ref:"xRailRef",class:[`${s}-scrollbar-rail`,`${s}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},z(g?xe:Se,g?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?z("div",{class:`${s}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:l?this.xBarLeftPx:void 0,left:l?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},M=this.container?C():z(Re,{onResize:this.handleContainerResize},{default:C});return h?z(en,null,M,O()):M}}),mn=Ee,Sn=Ee;export{mn as N,xe as W,Sn as X,q as a,hn as f,on as g,oe as o,fn as u};
