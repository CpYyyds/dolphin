import{u as g,E as C,r as S,bs as w,d as V,bI as _,bH as j,H as x,I as E,c as t,i as I}from"./index.02a17cf1.js";import{u as P,a as D,b as q}from"./use-table.14d22a8a.js";import{C as k}from"./index.ef447d1d.js";import{M as z}from"./index.7b2dcdb8.js";import{s as h}from"./index.module.9c9bd97f.js";import{N as M}from"./Form.de76c832.js";import{N as O}from"./FormItem.aeb1ee46.js";import{N as a}from"./Space.8a344b95.js";import{N as p}from"./Button.1b3ea9f7.js";import{N as H}from"./Spin.4db05d4b.js";import"./index.9b0cc109.js";import"./index.b0aa157e.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./common.a16f92ec.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./EditOutlined.8be88705.js";import"./index.8474b6bf.js";import"./table-action.65f20e21.js";import"./FormOutlined.0c6aa81a.js";import"./UploadOutlined.bbed6507.js";import"./DownloadOutlined.bd8b049e.js";import"./DeleteOutlined.d3b97bbb.js";import"./Tooltip.76a430fa.js";import"./Popover.92dc7b00.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./_baseMap.d8d47059.js";import"./get.852d0cd9.js";import"./cssr.f561ccf0.js";import"./utils.eff12f29.js";import"./format-length.a6a40b1f.js";import"./resolve-slot.92499a18.js";import"./use-merged-state.2bdc3563.js";import"./use-compitable.cd47f4ac.js";import"./next-frame-once.50ecadf2.js";import"./Icon.0cd298dd.js";import"./Popconfirm.98866df0.js";import"./use-locale.47aab0f5.js";import"./keysOf.843c523b.js";import"./index.fe057c74.js";import"./column-width-config.03ebcd18.js";import"./Ellipsis.eed9f363.js";import"./Card.f8db533a.js";import"./index.5f9a33e7.js";import"./use-form-item.96cfc8ba.js";import"./is-browser.e7afaa57.js";import"./get-slot.eeb09d52.js";const R=()=>({content:""});function U(){const{t:e}=g(),r=()=>{o.fileForm=Object.assign(w(o.fileForm),R())},o=C({fileFormRef:S(),fileForm:R(),rules:{content:{required:!0,trigger:["input","blur"],validator(){if(o.fileForm.content==="")return new Error(e("resource.file.enter_content_tips"))}}}});return{state:o,resetForm:r}}function c(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!I(e)}const $t=V({name:"ResourceEdit",setup(){const e=_(),r=j(),o=P(),i=D();i.$reset();const l=e.name,u=String(r.currentRoute.value.query.prefix||""),m=String(r.currentRoute.value.query.tenantCode||""),N=String(r.currentRoute.value.query.alias||""),{state:n}=U(),{getResourceView:v,handleUpdateContent:b}=q(n),F=()=>{n.fileForm.content=s.state.value.content,b(u,m),f()},y=()=>{f(),r.go(-1)},f=()=>{i.setIsDetailPage(!0);const d=u.split("/");d.pop(),o.fullName=d.join("/"),o.tenantCode=m},s=v(u,m);return x(()=>s.state.value.content,()=>n.fileForm.content=s.state.value.content),{componentName:l,resourceViewRef:s,alias:N,handleReturn:y,handleFileContent:F,...E(n)}},render(){let e,r,o;const{t:i}=g();return t(k,{title:i("resource.file.file_details")},{default:()=>[this.resourceViewRef.isReady.value?t("div",{class:h["file-edit-content"]},[t("h2",null,[t("span",null,[this.alias])]),t(M,{rules:this.rules,ref:"fileFormRef",class:h["form-content"],disabled:this.componentName!=="resource-file-edit"},{default:()=>[t(O,{path:"content"},{default:()=>[t(z,{value:this.resourceViewRef.state.value.content,"onUpdate:value":l=>this.resourceViewRef.state.value.content=l},null)]}),t(a,null,{default:()=>[t(p,{type:"info",size:"small",text:!0,style:{marginRight:"15px"},onClick:this.handleReturn,class:"btn-cancel"},c(e=i("resource.file.return"))?e:{default:()=>[e]}),this.componentName==="resource-file-edit"&&t(p,{type:"info",size:"small",round:!0,onClick:()=>this.handleFileContent(),class:"btn-submit"},c(r=i("resource.file.save"))?r:{default:()=>[r]})]})]})]):t(a,{justify:"center"},{default:()=>[t(a,{vertical:!0},{default:()=>[t(H,{show:!0},null),t(a,null,{default:()=>[t(p,{type:"info",size:"small",text:!0,style:{marginRight:"15px"},onClick:this.handleReturn,class:"btn-cancel"},c(o=i("resource.file.return"))?o:{default:()=>[o]})]})]})]})]})}});export{$t as default};
