import k from"./detail.6337fd02.js";import{C as z}from"./index.ef447d1d.js";import{z as w,u as I,h as l,E as D,d as R,r as C,G as A,o as U,H as j,I as L,c as a,i as V}from"./index.02a17cf1.js";import{E as b}from"./EditOutlined.8be88705.js";import{D as x}from"./DeleteOutlined.d3b97bbb.js";import{N as M}from"./Tooltip.76a430fa.js";import{N as y}from"./Button.1b3ea9f7.js";import{N as v}from"./Icon.0cd298dd.js";import{N as E}from"./Popconfirm.98866df0.js";import{N as p}from"./Space.8a344b95.js";import{d as H,a as O}from"./index.22550073.js";import{p as P}from"./common.a16f92ec.js";import{k as T}from"./index.8474b6bf.js";import{S as q}from"./index.0da29625.js";import{S as B}from"./SearchOutlined.280f9205.js";import{N as G,a as $}from"./DataTable.ddc5a79d.js";import"./lodash.3a74b132.js";import"./index.e05b7da6.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./index.08dd828f.js";import"./index.fe057c74.js";import"./Modal.920fa101.js";import"./keysOf.843c523b.js";import"./Card.f8db533a.js";import"./resolve-slot.92499a18.js";import"./index.5f9a33e7.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./utils.eff12f29.js";import"./is-browser.e7afaa57.js";import"./index.21198e00.js";import"./get-elements-by-json.9f02e085.js";import"./Form.de76c832.js";import"./FormItem.aeb1ee46.js";import"./use-form-item.96cfc8ba.js";import"./format-length.a6a40b1f.js";import"./get.852d0cd9.js";import"./Grid.1918be0a.js";import"./get-slot.eeb09d52.js";import"./next-frame-once.50ecadf2.js";import"./Spin.4db05d4b.js";import"./use-compitable.cd47f4ac.js";import"./Input.59461546.js";import"./use-locale.47aab0f5.js";import"./use-merged-state.2bdc3563.js";import"./Suffix.62982c61.js";import"./Radio.4578e023.js";import"./RadioGroup.7b709552.js";import"./index.7b2dcdb8.js";import"./Switch.a01ace9e.js";import"./InputNumber.cad532d0.js";import"./Add.a9b5dac9.js";import"./Select.51d2f90f.js";import"./cssr.f561ccf0.js";import"./Popover.92dc7b00.js";import"./_baseMap.d8d47059.js";import"./Empty.249462a1.js";import"./Checkbox.c8f5c3b1.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./ArrowDown.fd6213c2.js";import"./Dropdown.de4044d8.js";import"./ChevronRight.d1d16011.js";import"./use-keyboard.8f9f6db8.js";import"./Ellipsis.eed9f363.js";import"./Forward.b8f2636c.js";function F(){return{IS_ADMIN:w().getUserInfo.userType==="ADMIN_USER"}}function J(e){const{t}=I();return{getColumns:()=>[{title:"#",key:"index",render:(n,s)=>s+1},{title:t("security.alarm_instance.alarm_instance_name"),key:"instanceName"},{title:t("security.alarm_instance.alarm_plugin_name"),key:"alertPluginName"},{title:t("security.alarm_instance.create_time"),key:"createTime"},{title:t("security.alarm_instance.update_time"),key:"updateTime"},{title:t("security.alarm_instance.operation"),key:"operation",width:150,render:n=>l(p,null,{default:()=>[l(M,null,{trigger:()=>l(y,{circle:!0,type:"info",size:"small",onClick:()=>void e(n,"edit")},{default:()=>l(v,null,{default:()=>l(b)})}),default:()=>t("security.alarm_instance.edit")}),l(M,null,{trigger:()=>l(E,{onPositiveClick:()=>void e(n,"delete"),negativeText:t("security.alarm_instance.cancel"),positiveText:t("security.alarm_instance.confirm")},{trigger:()=>l(y,{circle:!0,type:"error",size:"small"},{default:()=>l(v,null,{default:()=>l(x)})}),default:()=>t("security.alarm_instance.delete_confirm")}),default:()=>t("security.alarm_instance.delete")})]})}]}}function K(){const e=D({page:1,pageSize:10,itemCount:0,searchVal:"",list:[],loading:!1}),t=async()=>{if(e.loading)return;e.loading=!0;const{totalList:r,total:u}=await O({pageNo:e.page,pageSize:e.pageSize,searchVal:e.searchVal});if(e.loading=!1,!r)throw Error();e.list=r.map(o=>(o.createTime=o.createTime?T(P(o.createTime),"yyyy-MM-dd HH:mm:ss"):"",o.updateTime=o.updateTime?T(P(o.updateTime),"yyyy-MM-dd HH:mm:ss"):"",o)),e.itemCount=u},i=()=>{e.list.length===1&&e.page>1&&--e.page,t()};return{data:e,changePage:r=>{e.page=r,t()},changePageSize:r=>{e.page=1,e.pageSize=r,t()},deleteRecord:async r=>{await H(r),i()},updateList:i}}function Q(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!V(e)}const gt=R({name:"alarm-instance-manage",setup(){var g;const{t:e}=I(),t=C(!1),i=C(),n=C(),{IS_ADMIN:s}=F(),{data:d,changePage:r,changePageSize:u,deleteRecord:o,updateList:_}=K(),{getColumns:f}=J((m,N)=>{N==="edit"?(t.value=!0,i.value=m):o(m.id)}),h=()=>{i.value=null,t.value=!0},S=()=>{t.value=!1,i.value={}},c=(g=A())==null?void 0:g.appContext.config.globalProperties.trim;return U(()=>{r(1),n.value=f()}),j(I().locale,()=>{n.value=f()}),{t:e,IS_ADMIN:s,showDetailModal:t,currentRecord:i,columns:n,...L(d),changePage:r,changePageSize:u,onCreate:h,onCloseModal:S,onUpdatedList:_,trim:c}},render(){const{t:e,IS_ADMIN:t,currentRecord:i,showDetailModal:n,columns:s,list:d,page:r,pageSize:u,itemCount:o,loading:_,changePage:f,changePageSize:h,onCreate:S,onUpdatedList:c,onCloseModal:g}=this;return a(p,{vertical:!0},{default:()=>[a(z,null,{default:()=>{let m;return a(p,{justify:"space-between"},{default:()=>[t&&a(y,{onClick:S,type:"primary",size:"small"},Q(m=e("security.alarm_instance.create_alarm_instance"))?m:{default:()=>[m]}),a(p,{justify:"end",wrap:!1},{default:()=>[a(q,{value:this.searchVal,"onUpdate:value":N=>this.searchVal=N,placeholder:`${e("security.alarm_instance.search_input_tips")}`,onSearch:c},null),a(y,{type:"primary",size:"small",onClick:c},{default:()=>[a(v,null,{default:()=>[a(B,null,null)]})]})]})]})}}),a(z,{title:e("menu.alarm_instance_manage")},{default:()=>[a(p,{vertical:!0},{default:()=>[a(G,{columns:s,data:d,loading:_,striped:!0},null),a(p,{justify:"center"},{default:()=>[a($,{page:r,"page-size":u,"item-count":o,"show-quick-jumper":!0,"on-update:page":f,"on-update:page-size":h},null)]})]})]}),t&&a(k,{show:n,currentRecord:i,onCancel:g,onUpdate:c},null)]})}});export{gt as default};
