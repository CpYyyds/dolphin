import{d as w,bu as b,bI as _,u as D,r as e,o as v,c as d}from"./index.02a17cf1.js";import I from"./index.d6fde15d.js";import{b as N,u as S}from"./index.8587fc8e.js";import{u as J}from"./dag-auto-layout-modal.a03ef1a7.js";import"./dag-toolbar.91545edf.js";import"./dag.module.806bc1a0.js";import"./index.7d2218cd.js";import"./toNumber.f676da43.js";import"./_baseMap.d8d47059.js";import"./get.852d0cd9.js";import"./debounce.aab20534.js";import"./lodash.3a74b132.js";import"./index.9b0cc109.js";import"./dag-context-menu.4080e7eb.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./common.a16f92ec.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./EditOutlined.8be88705.js";import"./index.8474b6bf.js";import"./use-dependencies.c18c5099.js";import"./index.b889db2d.js";import"./Button.1b3ea9f7.js";import"./is-browser.e7afaa57.js";import"./use-form-item.96cfc8ba.js";import"./resolve-slot.92499a18.js";import"./task-type.618fb0da.js";import"./gForce.e00398bc.js";import"./typeof.481ce13f.js";import"./use-text-copy.5aaa6a47.js";import"./use-message.66b07366.js";import"./dag-node-status.5341bb4a.js";import"./Icon.0cd298dd.js";import"./format-length.a6a40b1f.js";import"./Spin.4db05d4b.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-compitable.cd47f4ac.js";import"./index.5f9a33e7.js";import"./Tooltip.76a430fa.js";import"./Popover.92dc7b00.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./use-false-until-truthy.e57d8f60.js";import"./cssr.f561ccf0.js";import"./utils.eff12f29.js";import"./use-merged-state.2bdc3563.js";import"./next-frame-once.50ecadf2.js";import"./dag-startup-param.2e925564.js";import"./index.124d1fef.js";import"./index.e5f69831.js";import"./variables-view.9c8f6618.js";import"./index.9cbc470c.js";import"./CopyOutlined.05f74603.js";import"./SearchOutlined.280f9205.js";import"./DownloadOutlined.bd8b049e.js";import"./SyncOutlined.d69d028f.js";import"./DeleteOutlined.d3b97bbb.js";import"./FullscreenOutlined.f113d9e5.js";import"./InfoCircleOutlined.ab212e51.js";import"./text.856015a6.js";import"./Select.51d2f90f.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./use-locale.47aab0f5.js";import"./Empty.249462a1.js";import"./Suffix.62982c61.js";import"./index.21198e00.js";import"./dag-canvas.47760e6d.js";import"./dag-config.e2eb20b1.js";import"./dag-sidebar.26619340.js";import"./ChevronRight.d1d16011.js";import"./StarOutlined.bba1a3a2.js";import"./detail-modal.d43b66ed.js";import"./index.08dd828f.js";import"./index.fe057c74.js";import"./Modal.920fa101.js";import"./keysOf.843c523b.js";import"./Card.f8db533a.js";import"./Space.8a344b95.js";import"./get-slot.eeb09d52.js";import"./detail.cc97a982.js";import"./get-elements-by-json.9f02e085.js";import"./Form.de76c832.js";import"./FormItem.aeb1ee46.js";import"./Grid.1918be0a.js";import"./Input.59461546.js";import"./Radio.4578e023.js";import"./RadioGroup.7b709552.js";import"./index.7b2dcdb8.js";import"./Switch.a01ace9e.js";import"./InputNumber.cad532d0.js";import"./Add.a9b5dac9.js";import"./Checkbox.c8f5c3b1.js";import"./index.module.a7688846.js";import"./ArrowUpOutlined.5d908421.js";import"./index.7552dd4e.js";import"./index.e3e49908.js";import"./index.a8939d99.js";import"./index.b0aa157e.js";import"./index.747658f4.js";import"./index.2cf2fa64.js";import"./index.d2c86bbc.js";import"./Ellipsis.eed9f363.js";import"./index.1f780a3d.js";import"./ProfileOutlined.14374bcc.js";import"./version-modal.8b7bf837.js";import"./use-modal.c59c2056.js";import"./index.bcd2e05d.js";import"./index.0bedecf2.js";import"./Popconfirm.98866df0.js";import"./DataTable.ddc5a79d.js";import"./ArrowDown.fd6213c2.js";import"./Dropdown.de4044d8.js";import"./use-keyboard.8f9f6db8.js";import"./Forward.b8f2636c.js";import"./dag-save-modal.631fc24b.js";/* empty css                 */import"./DynamicInput.728c18a6.js";import"./ButtonGroup.1b8a381d.js";import"./start-modal.3068e161.js";import"./RadioButton.2774fa7f.js";import"./DatePicker.d4b2a484.js";import"./index.61e15cc7.js";import"./throttle.1d7e3cbb.js";import"./dependencies-modal.425ef74a.js";const j="_container_w4ea7_17",C="_dark_w4ea7_26",O="_light_w4ea7_31",a={container:j,dark:C,light:O},Zo=w({name:"WorkflowInstanceDetails",setup(){const f=b(),n=_(),{t:g}=D(),r=Number(n.params.projectCode),m=Number(n.params.id),s=e(),c=e(),u=e(),l=()=>{N(m,r).then(t=>{c.value=t,t.dagData.workflowDefinition.locations||setTimeout(()=>{const o=u.value,{submit:p}=J({graph:o});p()},1e3),t.dagData&&(s.value=t.dagData)})},h=({taskDefinitions:t,saveForm:o,connects:p,locations:y})=>{const k=o.globalParams.map(i=>({prop:i.key,value:i.value,direct:i.direct,type:i.type}));S({syncDefine:o.sync,globalParams:JSON.stringify(k),locations:JSON.stringify(y),taskDefinitionJson:JSON.stringify(t),taskRelationJson:JSON.stringify(p),timeout:o.timeoutFlag?o.timeout:0},m,r).then(i=>{window.$message.success(g("project.dag.success")),window.location.reload()})};return v(()=>{!m||!r||l()}),()=>d("div",{class:[a.container,f.darkTheme?a.dark:a.light]},[d(I,{ref:u,instance:c.value,definition:s.value,onRefresh:l,projectCode:r,onSave:h},null)])}});export{Zo as default};
