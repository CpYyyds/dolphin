import{u as g,bH as P,E as C,r as l,h as m,d as D,o as N,H as b,I as z,c as r,i as R}from"./index.02a17cf1.js";import{q as T,d as S,D as w,P as k}from"./parameter-modal.1c6b5b78.js";import{D as _,C as s,c as M}from"./column-width-config.03ebcd18.js";import{E as v}from"./EditOutlined.8be88705.js";import{D as U}from"./DeleteOutlined.d3b97bbb.js";import{N as j}from"./Tooltip.76a430fa.js";import{N as h}from"./Button.1b3ea9f7.js";import{N as V}from"./Popconfirm.98866df0.js";import{N as c}from"./Space.8a344b95.js";import{C as y}from"./index.ef447d1d.js";import{S as O}from"./SearchOutlined.280f9205.js";import{N as W}from"./Input.59461546.js";import{N as I}from"./Select.51d2f90f.js";import{N as q}from"./Icon.0cd298dd.js";import{N as E,a as L}from"./DataTable.ddc5a79d.js";import"./index.08dd828f.js";import"./index.fe057c74.js";import"./Modal.920fa101.js";import"./keysOf.843c523b.js";import"./Card.f8db533a.js";import"./resolve-slot.92499a18.js";import"./index.5f9a33e7.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./utils.eff12f29.js";import"./is-browser.e7afaa57.js";import"./index.21198e00.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./Form.de76c832.js";import"./FormItem.aeb1ee46.js";import"./use-form-item.96cfc8ba.js";import"./format-length.a6a40b1f.js";import"./get.852d0cd9.js";import"./Popover.92dc7b00.js";import"./_baseMap.d8d47059.js";import"./cssr.f561ccf0.js";import"./use-merged-state.2bdc3563.js";import"./use-compitable.cd47f4ac.js";import"./next-frame-once.50ecadf2.js";import"./use-locale.47aab0f5.js";import"./get-slot.eeb09d52.js";import"./Suffix.62982c61.js";import"./Empty.249462a1.js";import"./ArrowDown.fd6213c2.js";import"./Checkbox.c8f5c3b1.js";import"./RadioGroup.7b709552.js";import"./Radio.4578e023.js";import"./Dropdown.de4044d8.js";import"./ChevronRight.d1d16011.js";import"./use-keyboard.8f9f6db8.js";import"./Ellipsis.eed9f363.js";import"./Forward.b8f2636c.js";function x(){const{t:e}=g(),i=P(),a=C({columns:[],tableWidth:_,row:{},tableData:[],projectCode:l(Number(i.currentRoute.value.params.projectCode)),page:l(1),pageSize:l(10),searchVal:l(),projectParameterDataType:l(),totalPage:l(1),showRef:l(!1),statusRef:l(0),loadingRef:l(!1)}),o=t=>{t.columns=[{title:"#",key:"id",...s.index,render:(p,f)=>f+1},{title:e("project.parameter.name"),key:"paramName",...s.name},{title:e("project.parameter.value"),key:"paramValue",...s.name},{title:e("project.parameter.data_type"),key:"paramDataType",...s.name},{title:e("project.parameter.create_user"),key:"createUser",...s.name},{title:e("project.parameter.modify_user"),key:"modifyUser",...s.name},{title:e("project.parameter.create_time"),key:"createTime",...s.time},{title:e("project.parameter.update_time"),key:"updateTime",...s.time},{title:e("project.parameter.operation"),key:"operation",...s.operation(3),render:p=>m(c,null,{default:()=>[m(j,{},{trigger:()=>m(h,{circle:!0,type:"info",size:"small",onClick:()=>{u(p)}},{icon:()=>m(v)}),default:()=>e("project.parameter.edit")}),m(V,{onPositiveClick:()=>{d(p.code)}},{trigger:()=>m(j,{},{trigger:()=>m(h,{circle:!0,type:"error",size:"small"},{icon:()=>m(U)}),default:()=>e("project.parameter.delete")}),default:()=>e("project.parameter.delete_confirm")})]})}],t.tableWidth&&(t.tableWidth=M(t.columns))},u=t=>{a.showRef=!0,a.statusRef=1,a.row=t},n=t=>{a.loadingRef||(a.loadingRef=!0,T({...t},a.projectCode).then(p=>{a.totalPage=p.totalPage,a.tableData=p.totalList.map(f=>({...f})),a.loadingRef=!1}))},d=t=>{a.tableData.length===1&&a.page>1&&(a.page-=1),S({code:t},a.projectCode).then(()=>{window.$message.success(e("project.parameter.success")),n({pageSize:a.pageSize,pageNo:a.page,searchVal:a.searchVal,projectParameterDataType:a.projectParameterDataType})})};return{variables:a,createColumns:o,getTableData:n}}function A(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!R(e)}const Xe=D({name:"ProjectParameterList",setup(){const{variables:e,createColumns:i,getTableData:a}=x(),o=()=>{a({pageSize:e.pageSize,pageNo:e.page,searchVal:e.searchVal,projectParameterDataType:e.projectParameterDataType,projectCode:e.projectCode})},u=()=>{o()},n=()=>{e.page=1,o()},d=()=>{e.page=1,o()},t=()=>{e.showRef=!1},p=()=>{e.showRef=!1,o()},f=()=>{e.showRef=!0,e.statusRef=0};return N(()=>{i(e),o()}),b(g().locale,()=>{i(e)}),{requestData:o,handleSearch:n,handleUpdateList:u,handleChangePageSize:d,onCreateParameter:f,onCancelModal:t,onConfirmModal:p,...z(e)}},render(){let e;const{t:i}=g(),{loadingRef:a,handleSearch:o,onCreateParameter:u,onConfirmModal:n,onCancelModal:d}=this;return r(c,{vertical:!0},{default:()=>[r(y,null,{default:()=>[r(c,{justify:"space-between"},{default:()=>[r(h,{size:"small",type:"primary",onClick:u},A(e=i("project.parameter.create_parameter"))?e:{default:()=>[e]}),r(c,null,{default:()=>[r(W,{size:"small",clearable:!0,value:this.searchVal,"onUpdate:value":t=>this.searchVal=t,placeholder:i("project.parameter.name")},null),r(I,{value:this.projectParameterDataType,"onUpdate:value":t=>this.projectParameterDataType=t,size:"small",options:Object.keys(w).map(t=>({value:t,label:t})),placeholder:i("project.parameter.data_type_tips"),style:{width:"180px"},clearable:!0},null),r(h,{size:"small",type:"primary",onClick:o},{default:()=>[r(q,null,{default:()=>[r(O,null,null)]})]})]})]})]}),r(y,{title:i("project.parameter.parameter_manage")},{default:()=>[r(c,{vertical:!0},{default:()=>[r(E,{loading:a,columns:this.columns,data:this.tableData,striped:!0,size:"small",scrollX:this.tableWidth},null),r(c,{justify:"center"},{default:()=>[r(L,{page:this.page,"onUpdate:page":t=>this.page=t,"page-size":this.pageSize,"onUpdate:page-size":t=>this.pageSize=t,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:this.requestData,onUpdatePageSize:this.handleChangePageSize},null)]})]})]}),r(k,{showModalRef:this.showRef,statusRef:this.statusRef,row:this.row,onCancelModal:d,onConfirmModal:n},null)]})}});export{Xe as default};
