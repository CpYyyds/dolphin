import{d as w,bb as M,b9 as I,ba as C,r as _,u as j,bH as K,R as F,g as U,o as V,H as J,c as O,a3 as d,h as x}from"./index.02a17cf1.js";import{M as B}from"./index.08dd828f.js";import W from"./detail.cc97a982.js";import{l as q}from"./lodash.3a74b132.js";import{q as Q}from"./index.8587fc8e.js";import{u as z}from"./task-type.618fb0da.js";import{q as Y}from"./index.1f780a3d.js";import{P as G}from"./ProfileOutlined.14374bcc.js";import{N as $}from"./Icon.0cd298dd.js";const X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Z=C("path",{d:"M740 161c-61.8 0-112 50.2-112 112c0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1c0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1c0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0 0 34.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2c0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0 1 96 0a48.01 48.01 0 0 1-96 0zm96 600a48.01 48.01 0 0 1-96 0a48.01 48.01 0 0 1 96 0zm408-491a48.01 48.01 0 0 1 0-96a48.01 48.01 0 0 1 0 96z",fill:"currentColor"},null,-1),ee=[Z],re=w({name:"BranchesOutlined",render:function(s,r){return M(),I("svg",X,ee)}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},te=C("path",{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 0 0 3 14.1zm167.7 301.1l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1c-17.8 42.1-43.3 80-75.9 112.5a353 353 0 0 1-112.5 75.9a352.18 352.18 0 0 1-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 0 1-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 0 1 171 512c0-47.8 9.3-94.2 27.8-137.8c17.8-42.1 43.3-80 75.9-112.5a353 353 0 0 1 112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 0 1 775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82C285 82.1 92.6 276.7 95 516.4C97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3c1.5-4.2-.7-8.9-4.9-10.4z",fill:"currentColor"},null,-1),ie=[te],oe=w({name:"HistoryOutlined",render:function(s,r){return M(),I("svg",se,ie)}}),ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},le=C("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z","fill-opacity":".8",fill:"currentColor"},null,-1),ae=C("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40s40 17.9 40 40s-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 0 0-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9c12.9-18.6 30.9-32.8 52.1-40.9c34-13.1 56-41.6 56-72.7c0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z","fill-opacity":".1",fill:"currentColor"},null,-1),ce=C("path",{d:"M472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c0-39.3-17.2-76-48.4-103.3z","fill-opacity":".8",fill:"currentColor"},null,-1),me=[le,ae,ce],ue=w({name:"QuestionCircleTwotone",render:function(s,r){return M(),I("svg",ne,me)}});function Ne(e){var k,a,c,f,P,p;const s=_(["MYSQL","ORACLE","SQLSERVER","HANA"]),r={};if(e.taskType==="SUB_WORKFLOW"&&(r.workflowDefinitionCode=e.workflowDefinitionCode),e.taskType==="JAVA"&&(r.runType=e.runType,r.mainArgs=e.mainArgs,r.jvmArgs=e.jvmArgs,r.isModulePath=e.isModulePath,r.mainClass=e.mainClass,(e.runType==="FAT_JAR"||e.runType==="NORMAL_JAR")&&e.mainJar&&(r.mainJar={resourceName:e.mainJar})),e.taskType&&["SPARK","MR","FLINK","FLINK_STREAM"].includes(e.taskType)&&(r.programType=e.programType,r.mainClass=e.mainClass,e.mainJar&&(r.mainJar={resourceName:e.mainJar}),r.deployMode=e.deployMode,r.appName=e.appName,r.mainArgs=e.mainArgs,r.others=e.others,e.namespace&&(r.namespace=e.namespace),r.yarnQueue=e.yarnQueue),e.taskType==="SPARK"&&(r.master=e.master,r.driverCores=e.driverCores,r.driverMemory=e.driverMemory,r.numExecutors=e.numExecutors,r.executorMemory=e.executorMemory,r.executorCores=e.executorCores,r.sqlExecutionType=e.sqlExecutionType),(e.taskType==="FLINK"||e.taskType==="FLINK_STREAM")&&(r.flinkVersion=e.flinkVersion,r.jobManagerMemory=e.jobManagerMemory,r.taskManagerMemory=e.taskManagerMemory,r.slot=e.slot,r.taskManager=e.taskManager,r.parallelism=e.parallelism),e.taskType==="HTTP"&&(r.httpMethod=e.httpMethod,r.httpBody=e.httpBody,r.httpCheckCondition=e.httpCheckCondition,r.httpParams=e.httpParams,r.url=e.url,r.condition=e.condition,r.connectTimeout=e.connectTimeout,r.socketTimeout=e.socketTimeout),e.taskType==="SQOOP")if(r.jobType=e.isCustomTask?"CUSTOM":"TEMPLATE",r.localParams=e.localParams,e.isCustomTask)r.customShell=e.customShell;else{r.jobName=e.jobName,r.hadoopCustomParams=e.hadoopCustomParams,r.sqoopAdvancedParams=e.sqoopAdvancedParams,r.concurrency=e.concurrency,r.splitBy=e.splitBy,r.modelType=e.modelType,r.sourceType=e.sourceType,r.targetType=e.targetType;let i={},m={};e.targetType==="HIVE"?i={hiveDatabase:e.targetHiveDatabase,hiveTable:e.targetHiveTable,createHiveTable:e.targetHiveCreateTable,dropDelimiter:e.targetHiveDropDelimiter,hiveOverWrite:e.targetHiveOverWrite,hiveTargetDir:e.targetHiveTargetDir,replaceDelimiter:e.targetHiveReplaceDelimiter,hivePartitionKey:e.targetHivePartitionKey,hivePartitionValue:e.targetHivePartitionValue}:e.targetType==="HDFS"?i={targetPath:e.targetHdfsTargetPath,deleteTargetDir:e.targetHdfsDeleteTargetDir,compressionCodec:e.targetHdfsCompressionCodec,fileType:e.targetHdfsFileType,fieldsTerminated:e.targetHdfsFieldsTerminated,linesTerminated:e.targetHdfsLinesTerminated}:s.value.some(y=>y===e.targetType)&&(i={targetType:e.targetMysqlType,targetDatasource:e.targetMysqlDatasource,targetTable:e.targetMysqlTable,targetColumns:e.targetMysqlColumns,fieldsTerminated:e.targetMysqlFieldsTerminated,linesTerminated:e.targetMysqlLinesTerminated,isUpdate:e.targetMysqlIsUpdate,targetUpdateKey:e.targetMysqlTargetUpdateKey,targetUpdateMode:e.targetMysqlUpdateMode}),s.value.some(y=>y===e.sourceType)?m={srcTable:e.srcQueryType==="1"?"":e.srcTable,srcColumnType:e.srcQueryType==="1"?"0":e.srcColumnType,srcColumns:e.srcQueryType==="1"||e.srcColumnType==="0"?"":e.srcColumns,srcQuerySql:e.srcQueryType==="0"?"":e.sourceMysqlSrcQuerySql,srcQueryType:e.srcQueryType,srcType:e.sourceMysqlType,srcDatasource:e.sourceMysqlDatasource,mapColumnHive:e.mapColumnHive,mapColumnJava:e.mapColumnJava}:e.sourceType==="HDFS"?m={exportDir:e.sourceHdfsExportDir}:e.sourceType==="HIVE"&&(m={hiveDatabase:e.sourceHiveDatabase,hiveTable:e.sourceHiveTable,hivePartitionKey:e.sourceHivePartitionKey,hivePartitionValue:e.sourceHivePartitionValue}),r.targetParams=JSON.stringify(i),r.sourceParams=JSON.stringify(m)}e.taskType==="SQL"&&(r.type=e.type,r.datasource=e.datasource,r.sql=e.sql,r.sqlType=e.sqlType,r.preStatements=e.preStatements,r.postStatements=e.postStatements,r.sendEmail=e.sendEmail,r.displayRows=e.displayRows,e.sqlType==="0"&&e.sendEmail&&(r.title=e.title,r.groupId=e.groupId)),e.taskType==="PROCEDURE"&&(r.type=e.type,r.datasource=e.datasource,r.method=e.method),e.taskType==="SEATUNNEL"&&(r.startupScript=e.startupScript,r.useCustom=e.useCustom,e.useCustom||(r.rawScript=""),(k=e.startupScript)!=null&&k.includes("flink")&&(r.runMode=e.runMode,r.others=e.others),(a=e.startupScript)!=null&&a.includes("spark")&&(r.deployMode=e.deployMode,r.master=e.master,r.masterUrl=e.masterUrl),e.startupScript==="seatunnel.sh"&&(r.deployMode=e.deployMode,r.others=e.others)),e.taskType==="SWITCH"&&(r.switchResult={},r.switchResult.dependTaskList=e.dependTaskList,r.switchResult.nextNode=e.nextNode),e.taskType==="CONDITIONS"&&(r.dependence={relation:e.relation,dependTaskList:e.dependTaskList},r.conditionResult={},e.successBranch&&(r.conditionResult.successNode=[e.successBranch]),e.failedBranch&&(r.conditionResult.failedNode=[e.failedBranch])),e.taskType==="DATAX"&&(r.customConfig=e.customConfig?1:0,r.customConfig===0?(r.dsType=e.dsType,r.dataSource=e.dataSource,r.dtType=e.dtType,r.dataTarget=e.dataTarget,r.sql=e.sql,r.targetTable=e.targetTable,r.jobSpeedByte=e.jobSpeedByte,r.jobSpeedRecord=e.jobSpeedRecord,r.preStatements=e.preStatements,r.postStatements=e.postStatements):(r.json=e.json,(c=e==null?void 0:e.localParams)==null||c.map(i=>{i.direct="IN",i.type="VARCHAR"})),r.xms=e.xms,r.xmx=e.xmx),e.taskType==="DEPENDENT"&&(r.dependence={checkInterval:e.checkInterval,failurePolicy:e.failurePolicy,failureWaitingTime:e.failureWaitingTime,relation:e.relation,dependTaskList:e.dependTaskList}),e.taskType==="EMR"&&(r.type=e.type,r.programType=e.programType,r.jobFlowDefineJson=e.jobFlowDefineJson,r.stepsDefineJson=e.stepsDefineJson),e.taskType==="ZEPPELIN"&&(r.noteId=e.noteId,r.paragraphId=e.paragraphId,r.restEndpoint=e.restEndpoint,r.username=e.username,r.password=e.password,r.productionNoteDirectory=e.productionNoteDirectory,r.parameters=e.parameters,r.datasource=e.datasource,r.type=e.type),e.taskType==="ALIYUN_SERVERLESS_SPARK"&&(r.workspaceId=e.workspaceId,r.resourceQueueId=e.resourceQueueId,r.codeType=e.codeType,r.jobName=e.jobName,r.engineReleaseVersion=e.engineReleaseVersion,r.templateId=e.templateId,r.entryPoint=e.entryPoint,r.entryPointArguments=e.entryPointArguments,r.sparkSubmitParameters=e.sparkSubmitParameters,r.isProduction=e.isProduction,r.type=e.type,r.datasource=e.datasource),e.taskType==="K8S"&&(r.namespace=e.namespace,r.minCpuCores=e.minCpuCores,r.minMemorySpace=e.minMemorySpace,r.image=e.image,r.imagePullPolicy=e.imagePullPolicy,r.command=e.command,r.args=e.args,r.customizedLabels=e.customizedLabels,r.nodeSelectors=e.nodeSelectors,r.datasource=e.datasource,r.type=e.type,r.kubeConfig=e.kubeConfig,r.pullSecret=e.pullSecret),e.taskType==="JUPYTER"&&(r.condaEnvName=e.condaEnvName,r.inputNotePath=e.inputNotePath,r.outputNotePath=e.outputNotePath,r.parameters=e.parameters,r.kernel=e.kernel,r.engine=e.engine,r.executionTimeout=e.executionTimeout,r.startTimeout=e.startTimeout,r.others=e.others),e.taskType==="MLFLOW"&&(r.algorithm=e.algorithm,r.params=e.params,r.searchParams=e.searchParams,r.dataPath=e.dataPath,r.experimentName=e.experimentName,r.modelName=e.modelName,r.mlflowTrackingUri=e.mlflowTrackingUri,r.mlflowJobType=e.mlflowJobType,r.automlTool=e.automlTool,r.registerModel=e.registerModel,r.mlflowTaskType=e.mlflowTaskType,r.deployType=e.deployType,r.deployPort=e.deployPort,r.deployModelKey=e.deployModelKey,r.mlflowProjectRepository=e.mlflowProjectRepository,r.mlflowProjectVersion=e.mlflowProjectVersion),e.taskType==="DVC"&&(r.dvcTaskType=e.dvcTaskType,r.dvcRepository=e.dvcRepository,r.dvcVersion=e.dvcVersion,r.dvcDataLocation=e.dvcDataLocation,r.dvcMessage=e.dvcMessage,r.dvcLoadSaveDataPath=e.dvcLoadSaveDataPath,r.dvcStoreUrl=e.dvcStoreUrl),e.taskType==="SAGEMAKER"&&(r.sagemakerRequestJson=e.sagemakerRequestJson,r.username=e.username,r.password=e.password,r.datasource=e.datasource,r.type=e.type,r.awsRegion=e.awsRegion),e.taskType==="PYTORCH"&&(r.script=e.script,r.scriptParams=e.scriptParams,r.pythonPath=e.pythonPath,r.isCreateEnvironment=e.isCreateEnvironment,r.pythonLauncher=e.pythonLauncher,r.pythonEnvTool=e.pythonEnvTool,r.requirements=e.requirements,r.condaPythonVersion=e.condaPythonVersion),e.taskType==="DINKY"&&(r.address=e.address,r.taskId=e.taskId,r.online=e.online),e.taskType==="OPENMLDB"&&(r.zk=e.zk,r.zkPath=e.zkPath,r.executeMode=e.executeMode,r.sql=e.sql),e.taskType==="CHUNJUN"&&(r.customConfig=e.customConfig?1:0,r.json=e.json,r.deployMode=e.deployMode,r.others=e.others),e.taskType==="HIVECLI"&&(r.hiveCliTaskExecutionType=e.hiveCliTaskExecutionType,r.hiveSqlScript=e.hiveSqlScript,r.hiveCliOptions=e.hiveCliOptions),e.taskType==="DMS"&&(r.isRestartTask=e.isRestartTask,r.isJsonFormat=e.isJsonFormat,r.jsonData=e.jsonData,r.migrationType=e.migrationType,r.replicationTaskIdentifier=e.replicationTaskIdentifier,r.sourceEndpointArn=e.sourceEndpointArn,r.targetEndpointArn=e.targetEndpointArn,r.replicationInstanceArn=e.replicationInstanceArn,r.tableMappings=e.tableMappings,r.replicationTaskArn=e.replicationTaskArn),e.taskType==="DATASYNC"&&(r.jsonFormat=e.jsonFormat,r.json=e.json,r.destinationLocationArn=e.destinationLocationArn,r.sourceLocationArn=e.sourceLocationArn,r.name=e.name,r.cloudWatchLogGroupArn=e.cloudWatchLogGroupArn),e.taskType==="KUBEFLOW"&&(r.yamlContent=e.yamlContent,r.namespace=e.namespace),e.taskType==="LINKIS"&&(r.useCustom=e.useCustom,r.paramScript=e.paramScript,r.rawScript=e.rawScript),e.taskType==="DATA_FACTORY"&&(r.factoryName=e.factoryName,r.resourceGroupName=e.resourceGroupName,r.pipelineName=e.pipelineName),e.taskType==="REMOTESHELL"&&(r.type=e.type,r.datasource=e.datasource);let u="";e.timeoutNotifyStrategy&&(e.timeoutNotifyStrategy.length===1&&(u=e.timeoutNotifyStrategy[0]),e.timeoutNotifyStrategy.length===2&&(u="WARNFAILED"));const l={workflowDefinitionCode:e.workflowDefinitionName?String(e.workflowDefinitionName):"",upstreamCodes:(f=e==null?void 0:e.preTasks)==null?void 0:f.join(","),taskDefinitionJsonObj:{code:e.code,delayTime:e.delayTime?String(e.delayTime):"0",description:e.description,environmentCode:e.environmentCode||-1,failRetryInterval:e.failRetryInterval?String(e.failRetryInterval):"0",failRetryTimes:e.failRetryTimes?String(e.failRetryTimes):"0",flag:e.flag,name:e.name,taskGroupId:e.taskGroupId,taskGroupPriority:e.taskGroupPriority,taskParams:{localParams:(P=e.localParams)==null?void 0:P.map(i=>(i.value=i.value||"",i)),initScript:e.initScript,rawScript:e.rawScript,resourceList:(p=e.resourceList)!=null&&p.length?e.resourceList.map(i=>({resourceName:`${i}`})):[],...r},taskPriority:e.taskPriority,taskType:e.taskType,timeout:e.timeoutFlag?e.timeout:0,timeoutFlag:e.timeoutFlag?"OPEN":"CLOSE",timeoutNotifyStrategy:e.timeoutFlag?u:"",workerGroup:e.workerGroup,cpuQuota:e.cpuQuota||-1,memoryMax:e.memoryMax||-1,taskExecuteType:e.taskExecuteType}};return e.timeoutFlag||(l.taskDefinitionJsonObj.timeout=0,l.taskDefinitionJsonObj.timeoutNotifyStrategy=""),l}function pe(e){var r,u,l,k,a,c,f,P,p,i,m,y,L,h,D,n,o,v,T,g,N,S,E,b,R,A,H;const s={...q.exports.omit(e,["environmentCode","timeoutFlag","timeoutNotifyStrategy","taskParams"]),...q.exports.omit(e.taskParams,["resourceList","mainJar","localParams"]),environmentCode:e.environmentCode===-1?null:e.environmentCode,timeoutFlag:e.timeoutFlag==="OPEN",timeoutNotifyStrategy:e.timeoutNotifyStrategy?[e.timeoutNotifyStrategy]:[],localParams:((r=e.taskParams)==null?void 0:r.localParams)||[]};if(e.timeoutNotifyStrategy==="WARNFAILED"&&(s.timeoutNotifyStrategy=["WARN","FAILED"]),(u=e.taskParams)!=null&&u.resourceList&&(s.resourceList=e.taskParams.resourceList.map(t=>`${t.resourceName}`)),(l=e.taskParams)!=null&&l.mainJar&&(s.mainJar=(k=e.taskParams)==null?void 0:k.mainJar.resourceName),(a=e.taskParams)!=null&&a.method&&(s.method=(c=e.taskParams)==null?void 0:c.method),(f=e.taskParams)!=null&&f.targetParams){const t=JSON.parse(e.taskParams.targetParams);s.targetType=e.taskParams.targetType,s.targetHiveDatabase=t.hiveDatabase,s.targetHiveTable=t.hiveTable,s.targetHiveCreateTable=t.createHiveTable,s.targetHiveDropDelimiter=t.dropDelimiter,s.targetHiveOverWrite=t.hiveOverWrite===void 0?!0:t.hiveOverWrite,s.targetHiveTargetDir=t.hiveTargetDir,s.targetHiveReplaceDelimiter=t.replaceDelimiter,s.targetHivePartitionKey=t.hivePartitionKey,s.targetHivePartitionValue=t.hivePartitionValue,s.targetHdfsTargetPath=t.targetPath,s.targetHdfsDeleteTargetDir=t.deleteTargetDir===void 0?!0:t.deleteTargetDir,s.targetHdfsCompressionCodec=t.compressionCodec===void 0?"snappy":t.compressionCodec,s.targetHdfsFileType=t.fileType===void 0?"--as-avrodatafile":t.fileType,s.targetHdfsFieldsTerminated=t.fieldsTerminated,s.targetHdfsLinesTerminated=t.linesTerminated,s.targetMysqlType=t.targetType,s.targetMysqlDatasource=t.targetDatasource,s.targetMysqlTable=t.targetTable,s.targetMysqlColumns=t.targetColumns,s.targetMysqlFieldsTerminated=t.fieldsTerminated,s.targetMysqlLinesTerminated=t.linesTerminated,s.targetMysqlIsUpdate=t.isUpdate,s.targetMysqlTargetUpdateKey=t.targetUpdateKey,s.targetMysqlUpdateMode=t.targetUpdateMode===void 0?"allowinsert":t.targetUpdateMode}if((P=e.taskParams)!=null&&P.sourceParams){const t=JSON.parse(e.taskParams.sourceParams);s.srcTable=t.srcTable,s.srcColumnType=t.srcColumnType,s.srcColumns=t.srcColumns,s.sourceMysqlSrcQuerySql=t.srcQuerySql,s.srcQueryType=t.srcQueryType,s.sourceMysqlType=t.srcType,s.sourceMysqlDatasource=t.srcDatasource,s.mapColumnHive=t.mapColumnHive||[],s.mapColumnJava=t.mapColumnJava||[],s.sourceHdfsExportDir=t.exportDir,s.sourceHiveDatabase=t.hiveDatabase,s.sourceHiveTable=t.hiveTable,s.sourceHivePartitionKey=t.hivePartitionKey,s.sourceHivePartitionValue=t.hivePartitionValue}if((p=e.taskParams)!=null&&p.rawScript&&(s.rawScript=(i=e.taskParams)==null?void 0:i.rawScript),(m=e.taskParams)!=null&&m.initScript&&(s.initScript=(y=e.taskParams)==null?void 0:y.initScript),(L=e.taskParams)!=null&&L.switchResult&&(s.switchResult=e.taskParams.switchResult,s.dependTaskList=(h=e.taskParams.switchResult)!=null&&h.dependTaskList?(D=e.taskParams.switchResult)==null?void 0:D.dependTaskList:[],s.nextNode=(n=e.taskParams.switchResult)==null?void 0:n.nextNode),(o=e.taskParams)!=null&&o.dependence){const t=JSON.parse(JSON.stringify(e.taskParams.dependence));s.checkInterval=t.checkInterval,s.failurePolicy=t.failurePolicy,s.failureWaitingTime=t.failureWaitingTime,s.dependTaskList=t.dependTaskList||[],s.relation=t.relation}return(v=e.taskParams)!=null&&v.ruleInputParameter&&(s.check_type=e.taskParams.ruleInputParameter.check_type,s.comparison_execute_sql=e.taskParams.ruleInputParameter.comparison_execute_sql,s.comparison_type=e.taskParams.ruleInputParameter.comparison_type,s.comparison_name=e.taskParams.ruleInputParameter.comparison_name,s.failure_strategy=e.taskParams.ruleInputParameter.failure_strategy,s.operator=e.taskParams.ruleInputParameter.operator,s.src_connector_type=e.taskParams.ruleInputParameter.src_connector_type,s.src_datasource_id=e.taskParams.ruleInputParameter.src_datasource_id,s.src_database=e.taskParams.ruleInputParameter.src_database,s.src_table=e.taskParams.ruleInputParameter.src_table,s.field_length=e.taskParams.ruleInputParameter.field_length,s.begin_time=e.taskParams.ruleInputParameter.begin_time,s.deadline=e.taskParams.ruleInputParameter.deadline,s.datetime_format=e.taskParams.ruleInputParameter.datetime_format,s.target_filter=e.taskParams.ruleInputParameter.target_filter,s.regexp_pattern=e.taskParams.ruleInputParameter.regexp_pattern,s.enum_list=e.taskParams.ruleInputParameter.enum_list,s.src_filter=e.taskParams.ruleInputParameter.src_filter,s.src_field=e.taskParams.ruleInputParameter.src_field,s.statistics_execute_sql=e.taskParams.ruleInputParameter.statistics_execute_sql,s.statistics_name=e.taskParams.ruleInputParameter.statistics_name,s.target_connector_type=e.taskParams.ruleInputParameter.target_connector_type,s.target_datasource_id=e.taskParams.ruleInputParameter.target_datasource_id,s.target_database=e.taskParams.ruleInputParameter.target_database,s.target_table=e.taskParams.ruleInputParameter.target_table,s.threshold=e.taskParams.ruleInputParameter.threshold,e.taskParams.ruleInputParameter.mapping_columns&&(s.mapping_columns=JSON.parse(e.taskParams.ruleInputParameter.mapping_columns))),(T=e.taskParams)!=null&&T.sparkParameters&&(s.deployMode=e.taskParams.sparkParameters.deployMode,s.driverCores=e.taskParams.sparkParameters.driverCores,s.driverMemory=e.taskParams.sparkParameters.driverMemory,s.executorCores=e.taskParams.sparkParameters.executorCores,s.executorMemory=e.taskParams.sparkParameters.executorMemory,s.numExecutors=e.taskParams.sparkParameters.numExecutors,s.others=e.taskParams.sparkParameters.others,s.sqlExecutionType=e.taskParams.sparkParameters.sqlExecutionType),(S=(N=(g=e.taskParams)==null?void 0:g.conditionResult)==null?void 0:N.successNode)!=null&&S.length&&(s.successBranch=e.taskParams.conditionResult.successNode[0]),(R=(b=(E=e.taskParams)==null?void 0:E.conditionResult)==null?void 0:b.failedNode)!=null&&R.length&&(s.failedBranch=e.taskParams.conditionResult.failedNode[0]),((A=e.taskParams)==null?void 0:A.customConfig)!==void 0&&(s.customConfig=e.taskParams.customConfig===1),(H=e.taskParams)!=null&&H.jobType&&(s.isCustomTask=e.taskParams.jobType==="CUSTOM"),s}const ye={JAVA:{alias:"JAVA"},SHELL:{alias:"SHELL"},SUB_WORKFLOW:{alias:"SUB_WORKFLOW"},PROCEDURE:{alias:"PROCEDURE"},SQL:{alias:"SQL"},SPARK:{alias:"SPARK"},FLINK:{alias:"FLINK"},MR:{alias:"MapReduce",helperLinkDisable:!0},PYTHON:{alias:"PYTHON"},DEPENDENT:{alias:"DEPENDENT"},HTTP:{alias:"HTTP"},DATAX:{alias:"DataX"},SQOOP:{alias:"SQOOP",helperLinkDisable:!0},CONDITIONS:{alias:"CONDITIONS"},SWITCH:{alias:"SWITCH"},SEATUNNEL:{alias:"SeaTunnel",helperLinkDisable:!0},EMR:{alias:"AmazonEMR",helperLinkDisable:!0},ZEPPELIN:{alias:"ZEPPELIN",helperLinkDisable:!0},JUPYTER:{alias:"JUPYTER",helperLinkDisable:!0},K8S:{alias:"K8S",helperLinkDisable:!0},MLFLOW:{alias:"MLFLOW",helperLinkDisable:!0},OPENMLDB:{alias:"OPENMLDB",helperLinkDisable:!0},DVC:{alias:"DVC",helperLinkDisable:!0},DINKY:{alias:"DINKY",helperLinkDisable:!0},SAGEMAKER:{alias:"SageMaker",helperLinkDisable:!0},CHUNJUN:{alias:"CHUNJUN",helperLinkDisable:!0},FLINK_STREAM:{alias:"FLINK_STREAM",helperLinkDisable:!0,taskExecuteType:"STREAM"},PYTORCH:{alias:"Pytorch",helperLinkDisable:!0},HIVECLI:{alias:"HIVECLI",helperLinkDisable:!0},DMS:{alias:"DMS",helperLinkDisable:!0},DATASYNC:{alias:"DATASYNC",helperLinkDisable:!0},KUBEFLOW:{alias:"KUBEFLOW",helperLinkDisable:!0},LINKIS:{alias:"LINKIS",helperLinkDisable:!0},DATA_FACTORY:{alias:"DATA_FACTORY",helperLinkDisable:!0},REMOTESHELL:{alias:"REMOTESHELL",helperLinkDisable:!0},ALIYUN_SERVERLESS_SPARK:{alias:"ALIYUN_SERVERLESS_SPARK",helperLinkDisable:!0}},Te={show:{type:Boolean,default:!1},data:{type:Object,default:{code:0,taskType:"SHELL",name:""}},projectCode:{type:Number,required:!0,default:0},readonly:{type:Boolean,default:!1},from:{type:Number,default:0},definition:{type:Object},workflowInstance:{type:Object},taskInstance:{type:Object},saving:{type:Boolean,default:!1}},ke=w({name:"NodeDetailModal",props:Te,emits:["cancel","submit","viewLog"],setup(e,{emit:s}){const{t:r,locale:u}=j(),l=K(),k=z(),a=n=>()=>x($,null,{default:()=>x(n)}),c=_(),f=async()=>{await c.value.value.validate(),s("submit",{data:c.value.value.getValues()})},P=()=>{s("cancel")},p=_([]),i=_({}),m=()=>{e.taskInstance&&s("viewLog",e.taskInstance.id,e.taskInstance.taskType)},y=n=>{Y(n).then(o=>{(o==null?void 0:o.preferences)&&o.state===1&&(i.value=JSON.parse(o.preferences))})},L=n=>{if(!(n!=null&&n.id))for(const o in i.value)i.value[o]!==null&&o in n&&Object.assign(n,{item:i.value[o]})},h=(n,o)=>{var v;p.value=[{text:r("project.node.instructions"),show:!!(o&&!((v=ye[o])!=null&&v.helperLinkDisable)),action:()=>{let T=o==null?void 0:o.toLowerCase().replace("_","-");o==="PROCEDURE"&&(T="stored-procedure");const g="https://dolphinscheduler.apache.org/"+u.value.toLowerCase().replace("_","-")+"/docs/latest/user_doc/guide/task/"+T+".html";window.open(g)},icon:a(ue)},{text:r("project.node.view_history"),show:!!e.taskInstance,action:()=>{l.push({name:"task-instance",query:{taskCode:e.data.code}})},icon:a(oe)},{text:r("project.node.view_log"),show:!!e.taskInstance,action:()=>{m()},icon:a(G)},{text:r("project.node.enter_this_child_node"),show:e.data.taskType==="SUB_WORKFLOW",disabled:!e.data.id||l.currentRoute.value.name==="workflow-instance-detail"&&!e.taskInstance,action:()=>{var T,g;l.currentRoute.value.name==="workflow-instance-detail"?Q({taskId:(T=e.taskInstance)==null?void 0:T.id},{projectCode:e.projectCode}).then(N=>{var S;l.push({name:"workflow-instance-detail",params:{id:N.subWorkflowInstanceId},query:{code:(S=e.data.taskParams)==null?void 0:S.workflowDefinitionCode}})}):l.push({name:"workflow-definition-detail",params:{code:(g=e.data.taskParams)==null?void 0:g.workflowDefinitionCode}})},icon:a(re)}]},D=n=>{e.data.taskType=n,h(e.workflowInstance,e.data.taskType)};return F("data",U(()=>({projectCode:e.projectCode,data:e.data,from:e.from,readonly:e.readonly,definition:e.definition}))),V(()=>{y(e.projectCode)}),J(()=>[e.show,e.data],async()=>{if(!e.show)return;h(e.workflowInstance,e.data.taskType),k.init();const n=pe(e.data);await d(),L(n),c.value.value.setValues(n)}),()=>O(B,{show:e.show,title:e.from===1?`${r("project.task.current_task_settings")}`:`${r("project.node.current_node_settings")}`,onConfirm:f,confirmLoading:e.saving,confirmDisabled:e.readonly,onCancel:P,headerLinks:p},{default:()=>[O(W,{ref:c,onTaskTypeChange:D,key:e.data.taskType},null)]})}}),_e=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{ke as N,_e as d,Ne as f};
