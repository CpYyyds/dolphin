import{u as l,E as p,r as f,bs as d,d as F,G as h,H as g,I as N,c as s}from"./index.02a17cf1.js";import{M as w}from"./index.08dd828f.js";import{g as R}from"./index.b0aa157e.js";import{N as v}from"./Form.de76c832.js";import{N as y}from"./FormItem.aeb1ee46.js";import{N as b}from"./Input.59461546.js";import"./index.fe057c74.js";import"./Button.1b3ea9f7.js";import"./is-browser.e7afaa57.js";import"./use-form-item.96cfc8ba.js";import"./resolve-slot.92499a18.js";import"./Modal.920fa101.js";import"./keysOf.843c523b.js";import"./Card.f8db533a.js";import"./index.5f9a33e7.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./utils.eff12f29.js";import"./index.21198e00.js";import"./Space.8a344b95.js";import"./get-slot.eeb09d52.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./format-length.a6a40b1f.js";import"./get.852d0cd9.js";import"./use-locale.47aab0f5.js";import"./use-merged-state.2bdc3563.js";import"./Suffix.62982c61.js";const c=(e,t="",r="",a="",n="")=>({fullName:t,name:r,type:e,description:a,user_name:n});function C(e,t,r,a,n){const{t:m}=l(),i=()=>{o.renameForm=Object.assign(d(o.renameForm),c(e))},o=p({renameFormRef:f(),renameForm:c(e,t,r,a,n),saving:!1,rules:{name:{required:!0,trigger:["input","blur"],validator(){if(o.renameForm.name==="")return new Error(m("resource.file.enter_name_tips"))}}}});return{state:o,resetForm:i}}function I(e){const{t}=l();return{handleRenameFile:async(a,n,m)=>{if(await e.renameFormRef.validate(),!e.saving){e.saving=!0;try{await R({...e.renameForm,tenantCode:e.renameForm.user_name}),window.$message.success(t("resource.file.success")),e.saving=!1,a("updateList"),n(),m()}catch{e.saving=!1}}}}}const _={show:{type:Boolean,default:!1},resourceType:{type:String,default:void 0},name:{type:String,default:""},description:{type:String,default:""},fullName:{type:String,default:""},userName:{type:String,default:""}},oe=F({name:"ResourceFileRename",props:_,emits:["updateList","update:show"],setup(e,t){var u;const{state:r,resetForm:a}=C(e.resourceType,e.fullName,e.name,e.description,e.userName),{handleRenameFile:n}=I(r),m=()=>{t.emit("update:show",!1)},i=()=>{n(t.emit,m,a)},o=(u=h())==null?void 0:u.appContext.config.globalProperties.trim;return g(()=>e.show,()=>{r.renameForm.fullName=e.fullName,r.renameForm.name=e.name,r.renameForm.description=e.description,r.renameForm.user_name=e.userName}),{hideModal:m,handleFile:i,...N(r),trim:o}},render(){const{t:e}=l();return s(w,{show:this.$props.show,title:e("resource.file.rename"),onCancel:this.hideModal,onConfirm:this.handleFile,confirmClassName:"btn-submit",cancelClassName:"btn-cancel",confirmLoading:this.saving},{default:()=>[s(v,{rules:this.rules,ref:"renameFormRef"},{default:()=>[s(y,{label:e("resource.file.name"),path:"name"},{default:()=>[s(b,{allowInput:this.trim,value:this.renameForm.name,"onUpdate:value":t=>this.renameForm.name=t,placeholder:e("resource.file.enter_name_tips"),class:"input-name"},null)]})]})]})}});export{oe as default};
