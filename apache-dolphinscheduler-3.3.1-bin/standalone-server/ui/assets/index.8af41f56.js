import{C as k}from"./index.ef447d1d.js";import{u as T,h as U,E as N,r as l,d as M,G as O,o as G,I as H,c as a,i as W}from"./index.02a17cf1.js";import{b as q}from"./index.a8939d99.js";import{b as x}from"./index.d2c86bbc.js";import A from"./table-action.1f297383.js";import{_ as L}from"./lodash.3a74b132.js";import{p as y}from"./common.a16f92ec.js";import{C as d,c as B,D as E}from"./column-width-config.03ebcd18.js";import{k as b}from"./index.8474b6bf.js";import F from"./form-modal.c3c15eb1.js";import{S as V}from"./index.0da29625.js";import{S as X}from"./SearchOutlined.280f9205.js";import{N as h}from"./Space.8a344b95.js";import{N as z}from"./Button.1b3ea9f7.js";import{N as Y}from"./Icon.0cd298dd.js";import{N as J,a as K}from"./DataTable.ddc5a79d.js";import"./Card.f8db533a.js";import"./resolve-slot.92499a18.js";import"./index.5f9a33e7.js";import"./keysOf.843c523b.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./EditOutlined.8be88705.js";import"./UnorderedListOutlined.b1f565fb.js";import"./Tooltip.76a430fa.js";import"./Popover.92dc7b00.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./_baseMap.d8d47059.js";import"./get.852d0cd9.js";import"./cssr.f561ccf0.js";import"./utils.eff12f29.js";import"./format-length.a6a40b1f.js";import"./use-merged-state.2bdc3563.js";import"./use-compitable.cd47f4ac.js";import"./next-frame-once.50ecadf2.js";import"./Switch.a01ace9e.js";import"./use-form-item.96cfc8ba.js";import"./is-browser.e7afaa57.js";import"./get-slot.eeb09d52.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./index.08dd828f.js";import"./index.fe057c74.js";import"./Modal.920fa101.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./index.21198e00.js";import"./Form.de76c832.js";import"./FormItem.aeb1ee46.js";import"./Input.59461546.js";import"./use-locale.47aab0f5.js";import"./Suffix.62982c61.js";import"./Select.51d2f90f.js";import"./Empty.249462a1.js";import"./InputNumber.cad532d0.js";import"./Add.a9b5dac9.js";import"./ArrowDown.fd6213c2.js";import"./Checkbox.c8f5c3b1.js";import"./RadioGroup.7b709552.js";import"./Radio.4578e023.js";import"./Dropdown.de4044d8.js";import"./ChevronRight.d1d16011.js";import"./use-keyboard.8f9f6db8.js";import"./Ellipsis.eed9f363.js";import"./Forward.b8f2636c.js";function C(s=(o,n,t,g,i,p)=>{},r=()=>{}){const{t:o}=T(),n=[{title:"#",key:"index",render:(i,p)=>p+1,...d.index},{title:o("resource.task_group_option.name"),key:"name",...d.name},{title:o("resource.task_group_option.project_name"),key:"projectName",...d.name},{title:o("resource.task_group_option.resource_pool_size"),key:"groupSize",width:160},{title:o("resource.task_group_option.resource_used_pool_size"),key:"useSize",width:140},{title:o("resource.task_group_option.desc"),key:"description",...d.note},{title:o("resource.task_group_option.create_time"),key:"createTime",...d.time},{title:o("resource.task_group_option.update_time"),key:"updateTime",...d.time},{title:o("resource.task_group_option.actions"),key:"actions",...d.operation(3),render:i=>U(A,{row:i,onResetTableData:()=>{t.page>1&&t.tableData.length===1&&(t.page-=1),r()},onUpdateItem:(p,e,f,m,u,_)=>{s(p,e,f,m,u,_)}})}],t=N({tableData:[],tableWidth:B(n)||E,page:l(1),pageSize:l(10),name:l(null),totalPage:l(1),loadingRef:l(!1)});return{getTableData:i=>{t.loadingRef||(t.loadingRef=!0,Promise.all([q(i),x()]).then(p=>{t.totalPage=p[0].totalPage,t.tableData=p[0].totalList.map((e,f)=>{let m="";if(p[1]){const u=L.find(p[1],{code:e.projectCode});u&&(m=u.name)}return e.projectName=m,e.createTime=b(y(e.createTime),"yyyy-MM-dd HH:mm:ss"),e.updateTime=b(y(e.updateTime),"yyyy-MM-dd HH:mm:ss"),e.status=e.status=="YES"?1:0,{...e}}),t.loadingRef=!1}))},variables:t,columns:n}}function Q(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!W(s)}const ft=M({name:"taskGroupOption",setup(){var S;const{t:s}=T(),{variables:r,getTableData:o}=C(),n=l(!1),t=l(0),g=l(),i=N({id:0,name:"",projectCode:0,groupSize:0,status:1,description:""}),p=()=>{o({pageSize:r.pageSize,pageNo:r.page,name:r.name})},e=()=>{o({pageSize:r.pageSize,pageNo:r.page,name:r.name})},f=()=>{n.value=!1},m=()=>{n.value=!1,e()},u=()=>{r.page=1,e()},_=(P,I,R,v,w)=>{t.value=1,n.value=!0,i.id=P,i.name=I,i.projectCode=R,i.groupSize=v,i.description=w},c=()=>{e()},D=()=>{t.value=0,n.value=!0},j=(S=O())==null?void 0:S.appContext.config.globalProperties.trim;return G(()=>{p()}),{...H(r),t:s,onCreate:D,onSearch:c,searchParamRef:g,resetTableData:e,onUpdatePageSize:u,updateItem:_,showModalRef:n,modelStatusRef:t,onCancel:f,onConfirm:m,updateItemData:i,trim:j}},render(){let s;const{t:r,showModalRef:o,modelStatusRef:n,onCancel:t,onConfirm:g,updateItemData:i,resetTableData:p,onUpdatePageSize:e,updateItem:f,onSearch:m,loadingRef:u}=this,{columns:_}=C(f,p);return a(h,{vertical:!0},{default:()=>[a(k,null,{default:()=>[a(h,{justify:"space-between"},{default:()=>[a(z,{size:"small",type:"primary",onClick:()=>this.onCreate()},Q(s=r("resource.task_group_option.create"))?s:{default:()=>[s]}),a(h,null,{default:()=>[a(V,{placeholder:r("resource.task_group_option.please_enter_keywords"),value:this.name,"onUpdate:value":c=>this.name=c,onSearch:this.onSearch},null),a(z,{size:"small",type:"primary",onClick:m},{default:()=>[a(Y,null,{default:()=>[a(X,null,null)]})]})]})]})]}),a(k,{title:r("resource.task_group_option.option")},{default:()=>[a(h,{vertical:!0},{default:()=>[a(J,{loading:u,columns:_,size:"small",data:this.tableData,striped:!0,scrollX:this.tableWidth},null),a(h,{justify:"center"},{default:()=>[a(K,{page:this.page,"onUpdate:page":c=>this.page=c,"page-size":this.pageSize,"onUpdate:page-size":c=>this.pageSize=c,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:p,onUpdatePageSize:e},null)]})]})]}),o&&a(F,{show:o,onCancel:t,onConfirm:g,data:i,status:n},null)]})}});export{ft as default};
