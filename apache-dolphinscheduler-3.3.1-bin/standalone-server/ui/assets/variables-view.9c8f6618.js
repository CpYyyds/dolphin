import{d as j,r as x,bI as C,g,o as N,u as V,c as a,B as p,i as $}from"./index.02a17cf1.js";import{v as B}from"./index.8587fc8e.js";import{c as O}from"./index.9cbc470c.js";import{N as b}from"./Button.1b3ea9f7.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./is-browser.e7afaa57.js";import"./use-form-item.96cfc8ba.js";import"./resolve-slot.92499a18.js";const R="_variable_atwg8_17",k="_list_atwg8_21",E="_name_atwg8_32",A="_fa_atwg8_35",o={variable:R,list:k,"var-cont":"_var-cont_atwg8_25",name:E,fa:A,"list-t":"_list-t_atwg8_54","task-name":"_task-name_atwg8_58"};function S(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!$(i)}const G=j({name:"variables-view",emits:["copy"],setup(i,r){const t=x(),m=C(),u=Number(m.params.projectCode),d=Number(m.params.id),f=Number(m.params.code),_=g(()=>t.value&&t.value.globalParams?t.value.globalParams:[]),h=g(()=>t.value&&t.value.localParams?t.value.localParams:{}),w=()=>{Number.isNaN(d)?O(u,f).then(s=>{t.value=s}):B(d,u).then(s=>{t.value=s})},v=s=>{r.emit("copy",s)},y=(s,n)=>{const l=[];return Object.keys(s).forEach(e=>{n==="SQL"||n==="PROCEDURE"?e!=="direct"&&e!=="type"&&l.push(`${e}=${s[e]}`):l.push(`${e}=${s[e]}`)}),l.join(" ")},P=(s,n,l)=>{let e;return a(b,{key:s,type:"primary",style:"margin-right: 10px",onClick:()=>v(y(l,n))},S(e=Object.keys(l).map(c=>n==="SQL"||n==="PROCEDURE"?c!=="direct"&&c!=="type"?a("span",{style:"margin-right: 5px"},[a("strong",{style:"color: #2A455B;"},[c]),p(" = "),l[c]]):"":a("span",{style:"margin-right: 5px"},[a("strong",{style:"color: #2A455B;"},[c]),p(" = "),l[c]])))?e:{default:()=>[e]})};return N(()=>{w()}),{globalParams:_,localParams:h,localButton:P,handleCopy:v}},render(){const{t:i}=V();return a("div",{class:o.variable},[a("div",{class:o.list},[a("div",{class:o.name},[a("em",{class:"ri-code-s-slash-line"},null),a("strong",{style:"padding-top: 3px;display: inline-block"},[i("project.workflow.global_parameters")])]),a("div",{class:o["var-cont"]},[this.globalParams.map((r,t)=>a(b,{key:t,type:"primary",style:{marginRight:"5px"},onClick:()=>this.handleCopy(`${r.prop}=${r.value}`)},{default:()=>[a("strong",{style:"color: #2A455B; margin-right: 4px"},[r.prop])," ",p("= "),r.value]}))])]),a("div",{class:o.list,style:"height: 30px;"},[a("div",{class:o.name},[a("em",{class:"ri-code-s-slash-line"},null),a("strong",{style:"padding-top: 3px;display: inline-block"},[i("project.workflow.local_parameters")])]),a("div",{class:o["var-cont"]},[p("\xA0")])]),Object.keys(this.localParams).map((r,t)=>a("div",{class:`${o.list} ${o["list-t"]}`},[a("div",{class:o["task-name"]},[p("Task("),t,p("): "),r]),a("div",{class:o["var-cont"]},[this.localParams[r].localParamsList.map((m,u)=>this.localButton(u,this.localParams[r].taskType,m))])]))])}});export{G as default};
