import{S as r}from"./dag.module.806bc1a0.js";import{s as _}from"./service.ade35c11.js";import{d as $,h as u,l as y,n as D,p as f,k as P,bT as K,b as A,r as Z,g as R,e as U,R as J,f as q,t as Y,W as G,cn as Q,Y as X,J as k,al as ee,L as le,Z as te,a1 as ae,U as re,bD as oe,a4 as ne,E as se,u as ie,o as ce,c as l}from"./index.02a17cf1.js";import{u as de}from"./use-merged-state.2bdc3563.js";import{c as I,a as j,d as ue}from"./resolve-slot.92499a18.js";import{u as pe}from"./use-false-until-truthy.e57d8f60.js";import{C as me}from"./ChevronRight.d1d16011.js";import{S as C,a as x}from"./StarOutlined.bba1a3a2.js";import{N as b}from"./Icon.0cd298dd.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./format-length.a6a40b1f.js";const fe=$({name:"ChevronLeft",render(){return u("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),ve=y("collapse","width: 100%;",[y("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[D("disabled",[f("header","cursor: not-allowed;",[f("header-main",`
 color: var(--n-title-text-color-disabled);
 `),y("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),y("collapse-item","margin-left: 32px;"),P("&:first-child","margin-top: 0;"),P("&:first-child >",[f("header","padding-top: 0;")]),D("left-arrow-placement",[f("header",[y("collapse-item-arrow","margin-right: 4px;")])]),D("right-arrow-placement",[f("header",[y("collapse-item-arrow","margin-left: 4px;")])]),f("content-wrapper",[f("content-inner","padding-top: 16px;"),K({duration:"0.15s"})]),D("active",[f("header",[D("active",[y("collapse-item-arrow","transform: rotate(90deg);")])])]),P("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),f("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: 16px 0 0 0;
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[f("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),f("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),y("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),ge=Object.assign(Object.assign({},U.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),B=G("n-collapse"),he=$({name:"Collapse",props:ge,setup(o,{slots:i}){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:p}=A(o),n=Z(o.defaultExpandedNames),e=R(()=>o.expandedNames),a=de(e,n),S=U("Collapse","-collapse",ve,Q,o,t);function v(g){const{"onUpdate:expandedNames":c,onUpdateExpandedNames:h,onExpandedNamesChange:F}=o;h&&I(h,g),c&&I(c,g),F&&I(F,g),n.value=g}function m(g){const{onItemHeaderClick:c}=o;c&&I(c,g)}function d(g,c,h){const{accordion:F}=o,{value:E}=a;if(F)g?(v([c]),m({name:c,expanded:!0,event:h})):(v([]),m({name:c,expanded:!1,event:h}));else if(!Array.isArray(E))v([c]),m({name:c,expanded:!0,event:h});else{const L=E.slice(),T=L.findIndex(M=>c===M);~T?(L.splice(T,1),v(L),m({name:c,expanded:!1,event:h})):(L.push(c),v(L),m({name:c,expanded:!0,event:h}))}}J(B,{props:o,mergedClsPrefixRef:t,expandedNamesRef:a,slots:i,toggleItem:d});const H=q("Collapse",p,t),z=R(()=>{const{common:{cubicBezierEaseInOut:g},self:{titleFontWeight:c,dividerColor:h,titleTextColor:F,titleTextColorDisabled:E,textColor:L,arrowColor:T,fontSize:M,titleFontSize:O,arrowColorDisabled:V,itemMargin:W}}=S.value;return{"--n-font-size":M,"--n-bezier":g,"--n-text-color":L,"--n-divider-color":h,"--n-title-font-size":O,"--n-title-text-color":F,"--n-title-text-color-disabled":E,"--n-title-font-weight":c,"--n-arrow-color":T,"--n-arrow-color-disabled":V,"--n-item-margin":W}}),N=s?Y("collapse",void 0,z,o):void 0;return{rtlEnabled:H,mergedTheme:S,mergedClsPrefix:t,cssVars:s?void 0:z,themeClass:N==null?void 0:N.themeClass,onRender:N==null?void 0:N.onRender}},render(){var o;return(o=this.onRender)===null||o===void 0||o.call(this),u("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),ye=$({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(o){return{onceTrue:pe(X(o,"show"))}},render(){return u(ee,null,{default:()=>{const{show:o,displayDirective:i,onceTrue:t,clsPrefix:s}=this,p=i==="show"&&t,n=u("div",{class:`${s}-collapse-item__content-wrapper`},u("div",{class:`${s}-collapse-item__content-inner`},this.$slots));return p?k(n,[[le,o]]):o?n:null}})}}),Ce={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},w=$({name:"CollapseItem",props:Ce,setup(o){const{mergedRtlRef:i}=A(o),t=te(),s=ae(()=>{var d;return(d=o.name)!==null&&d!==void 0?d:t}),p=re(B);p||oe("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:n,props:e,mergedClsPrefixRef:a,slots:S}=p,v=R(()=>{const{value:d}=n;if(Array.isArray(d)){const{value:H}=s;return!~d.findIndex(z=>z===H)}else if(d){const{value:H}=s;return H!==d}return!0});return{rtlEnabled:q("Collapse",i,a),collapseSlots:S,randomName:t,mergedClsPrefix:a,collapsed:v,mergedDisplayDirective:R(()=>{const{displayDirective:d}=o;return d||e.displayDirective}),arrowPlacement:R(()=>e.arrowPlacement),handleClick(d){p&&!o.disabled&&p.toggleItem(v.value,s.value,d)}}},render(){const{collapseSlots:o,$slots:i,arrowPlacement:t,collapsed:s,mergedDisplayDirective:p,mergedClsPrefix:n,disabled:e}=this,a=j(i.header,{collapsed:s},()=>[this.title]),S=i["header-extra"]||o["header-extra"],v=i.arrow||o.arrow;return u("div",{class:[`${n}-collapse-item`,`${n}-collapse-item--${t}-arrow-placement`,e&&`${n}-collapse-item--disabled`,!s&&`${n}-collapse-item--active`]},u("div",{class:[`${n}-collapse-item__header`,!s&&`${n}-collapse-item__header--active`]},u("div",{class:`${n}-collapse-item__header-main`,onClick:this.handleClick},t==="right"&&a,u("div",{class:`${n}-collapse-item-arrow`,key:this.rtlEnabled?0:1},j(v,{collapsed:s},()=>{var m;return[u(ne,{clsPrefix:n},{default:(m=o.expandIcon)!==null&&m!==void 0?m:()=>this.rtlEnabled?u(fe,null):u(me,null)})]})),t==="left"&&a),ue(S,{collapsed:s},m=>u("div",{class:`${n}-collapse-item__header-extra`,onClick:this.handleClick},m))),u(ye,{clsPrefix:n,displayDirective:p,show:!s},i))}});function xe(){return _({url:"/favourite/taskTypes",method:"get"})}function be(o){return _({url:`/favourite/${o}`,method:"post"})}function we(o){return _({url:`/favourite/${o}`,method:"delete"})}const Me=$({name:"workflow-dag-sidebar",emits:["dragStart"],setup(o,i){const t=se({dataList:[],universal:[],cloud:[],logic:[],di:[],dq:[],ml:[],other:[],fav:[]}),{t:s}=ie(),p=()=>{xe().then(e=>{t.dataList=e.map(a=>({...a,starHover:!1,type:a.taskType})),t.universal=t.dataList.filter(a=>a.taskCategory==="Universal"),t.cloud=t.dataList.filter(a=>a.taskCategory==="Cloud"),t.logic=t.dataList.filter(a=>a.taskCategory==="Logic"),t.di=t.dataList.filter(a=>a.taskCategory==="DataIntegration"),t.ml=t.dataList.filter(a=>a.taskCategory==="MachineLearning"),t.other=t.dataList.filter(a=>a.taskCategory==="Other"),t.fav=t.dataList.filter(a=>a.collection===!0)})},n=e=>{e.collection?we(e.taskType).then(()=>{p()}):be(e.taskType).then(()=>{p()}),e.collection=!e.collection};return ce(()=>{p()}),()=>l("div",{class:r.sidebar},[l(he,{"default-expanded-names":"1",accordion:!0},{default:()=>[t.fav.length>0&&l(w,{title:s("project.menu.fav"),name:"0",class:"task-cate-fav"},{default:()=>t.fav.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.universal.length>0&&l(w,{title:s("project.menu.universal"),name:"1",class:"task-cate-universal"},{default:()=>t.universal.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.cloud.length>0&&l(w,{title:s("project.menu.cloud"),name:"2",class:"task-cate-cloud"},{default:()=>t.cloud.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.logic.length>0&&l(w,{title:s("project.menu.logic"),name:"3",class:"task-cate-logic"},{default:()=>t.logic.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.di.length>0&&l(w,{title:s("project.menu.di"),name:"4",class:"task-cate-di"},{default:()=>t.di.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.dq.length>0&&l(w,{title:s("project.menu.dq"),name:"5",class:"task-cate-dq"},{default:()=>t.dq.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.ml.length>0&&l(w,{title:s("project.menu.ml"),name:"6",class:"task-cate-ml"},{default:()=>t.ml.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.other.length>0&&l(w,{title:s("project.menu.other"),name:"7",class:"task-cate-other"},{default:()=>t.other.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))})]})])}});export{Me as default};
