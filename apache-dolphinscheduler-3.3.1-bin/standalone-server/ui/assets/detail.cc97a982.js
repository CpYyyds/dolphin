import{g as we,F as ke}from"./get-elements-by-json.9f02e085.js";import{u as m,r as p,g as y,o as G,H as O,a3 as fe,h as Q,a2 as ne,O as X,bW as ce,bH as ye,E as h,bs as ae,d as Le,c as Ne,U as Pe}from"./index.02a17cf1.js";import{s as K,u as b,a as S,b as E,c as M,d as V}from"./index.module.a7688846.js";import{q as Re}from"./index.a8939d99.js";import{u as $,T as _e}from"./task-type.618fb0da.js";import{s as oe}from"./service.ade35c11.js";import{l as te}from"./lodash.3a74b132.js";import{q as ve,a as ie,b as Ae,g as Me}from"./index.9cbc470c.js";import{a as se,b as Ie}from"./index.b0aa157e.js";import{a as qe}from"./index.9b0cc109.js";import{C as Ce}from"./CopyOutlined.05f74603.js";import{N as De}from"./Button.1b3ea9f7.js";import{N as ge}from"./Icon.0cd298dd.js";import{d as Oe}from"./Select.51d2f90f.js";import{g as Fe}from"./index.747658f4.js";import{e as Te}from"./index.2cf2fa64.js";import{l as xe}from"./index.124d1fef.js";import{a as He}from"./index.d2c86bbc.js";import{t as Ye}from"./common.a16f92ec.js";import{N as re}from"./Ellipsis.eed9f363.js";import"./Form.de76c832.js";import"./FormItem.aeb1ee46.js";import"./use-form-item.96cfc8ba.js";import"./format-length.a6a40b1f.js";import"./get.852d0cd9.js";import"./resolve-slot.92499a18.js";import"./keysOf.843c523b.js";import"./Grid.1918be0a.js";import"./index.5f9a33e7.js";import"./utils.eff12f29.js";import"./is-browser.e7afaa57.js";import"./VResizeObserver.f80d6e55.js";import"./flatten.8ad131a2.js";import"./get-slot.eeb09d52.js";import"./next-frame-once.50ecadf2.js";import"./Spin.4db05d4b.js";import"./Scrollbar.988383de.js";import"./use-compitable.cd47f4ac.js";import"./Input.59461546.js";import"./use-locale.47aab0f5.js";import"./use-merged-state.2bdc3563.js";import"./Suffix.62982c61.js";import"./Radio.4578e023.js";import"./RadioGroup.7b709552.js";import"./Space.8a344b95.js";import"./index.7b2dcdb8.js";import"./DeleteOutlined.d3b97bbb.js";import"./index.8a81335d.js";import"./use-false-until-truthy.e57d8f60.js";import"./Switch.a01ace9e.js";import"./InputNumber.cad532d0.js";import"./Add.a9b5dac9.js";import"./Checkbox.c8f5c3b1.js";import"./Empty.249462a1.js";import"./cssr.f561ccf0.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./index.21198e00.js";import"./Popover.92dc7b00.js";import"./_baseMap.d8d47059.js";import"./ArrowUpOutlined.5d908421.js";import"./index.7552dd4e.js";import"./index.e3e49908.js";import"./ui-setting.7e6814b1.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./EditOutlined.8be88705.js";import"./index.8474b6bf.js";import"./Tooltip.76a430fa.js";function w(e){const{t}=m();return{type:"input",field:"name",class:"input-node-name",name:t(e===1?"project.node.task_name":"project.node.name"),props:{placeholder:t("project.node.name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:t("project.node.name_tips")}}}function k(){const{t:e}=m(),t=[{label:e("project.node.normal"),value:"YES"},{label:e("project.node.prohibition_execution"),value:"NO"}];return{type:"radio",field:"flag",name:e("project.node.run_flag"),options:t}}function L(){const{t:e}=m();return{type:"input",field:"description",name:e("project.node.description"),props:{placeholder:e("project.node.description_tips"),rows:2,type:"textarea"}}}function P(e,t){const{t:n}=m(),a=p([]),r=p(!1),o=y(()=>!e.taskGroupId),i=async()=>{if(r.value)return;r.value=!0;const{totalList:s=[]}=await Re({pageNo:1,pageSize:2147483647,projectCode:t});a.value=s.map(l=>({label:l.name,value:l.id})),r.value=!1};return G(()=>{i()}),O(()=>e.taskGroupId,s=>{s||(e.taskGroupId=null,e.taskGroupPriority=null)}),[{type:"select",field:"taskGroupId",span:12,name:n("project.node.task_group_name"),props:{loading:r,clearable:!0},options:a},{type:"input-number",field:"taskGroupPriority",name:n("project.node.task_group_queue_priority"),props:{max:Math.pow(10,60)-1,disabled:o},span:12}]}function q(e){const{t}=m();return{type:"input-number",field:"delayTime",name:t("project.node.delay_execution_time"),span:12,props:{min:0},slots:{suffix:()=>t("project.node.minute")},value:e.delayTime||0}}function I(e){const{t}=m(),n=y(()=>e.timeoutFlag?12:0),a=[{label:t("project.node.timeout_alarm"),value:"WARN"},{label:t("project.node.timeout_failure"),value:"FAILED"}];return[{type:"switch",field:"timeoutFlag",name:t("project.node.timeout_alarm"),props:{"on-update:value":r=>{r&&(e.timeoutNotifyStrategy.length||(e.timeoutNotifyStrategy=["WARN"]),e.timeout||(e.timeout=30))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:t("project.node.timeout_strategy"),options:a,span:n,validate:{trigger:["input"],validator(r,o){if(e.timeoutFlag&&!o.length)return new Error(t("project.node.timeout_strategy_tips"))}}},{type:"input-number",field:"timeout",name:t("project.node.timeout_period"),span:n,props:{max:Math.pow(10,10)-1},slots:{suffix:()=>t("project.node.minute")},validate:{trigger:["input"],validator(r,o){if(e.timeoutFlag&&!/^[1-9]\d*$/.test(String(o)))return new Error(t("project.node.timeout_period_tips"))}}}]}function N(){const{t:e}=m(),t=$(),n=p(t.getPreTaskOptions);return O(()=>t.getPreTaskOptions,a=>{n.value=a}),{type:"select",field:"preTasks",span:24,class:"pre-tasks-model",name:e("project.node.pre_tasks"),props:{multiple:!0,filterable:!0},options:n}}function z(e,t){const{t:n}=m(),a=["CONDITIONS","SWITCH"],r=Object.keys(_e).map(o=>({label:o,value:o,disabled:a.includes(o)}));return{type:"select",field:"taskType",span:24,name:n("project.node.task_type"),props:{disabled:t||["CONDITIONS","SWITCH"].includes(e.taskType),filterable:!0},options:r,validate:{trigger:["input","blur"],required:!0,message:n("project.node.task_type_tips")},value:e.taskType?e.taskType:"SHELL"}}function Z({model:e,projectCode:t,isCreate:n,from:a,workflowName:r,taskCode:o}){const{t:i}=m(),s=$(),l=p([]),u=p(!1),d=async()=>{if(u.value)return;u.value=!0;const j=await ve(t);l.value=j.map(Y=>({label:Y.name,value:Y.code})),u.value=!1},c=async j=>{if(!j)return;const Y=await ie(j,t);e.definition=Y,s.updateDefinition(Y,o)},v=j=>{c(j)};return G(()=>{a===1&&r&&c(r),d()}),{type:"select",field:"workflowName",span:24,name:i("project.node.workflow_name"),props:{loading:u,disabled:!n,"on-update:value":v},validate:{trigger:["input","blur"],required:!0,validator(j,Y){if(!Y)return new Error(i("project.node.workflow_name_tips"))}},options:l}}function Je({model:e,projectCode:t,from:n,workflowName:a,code:r}){const{t:o}=m(),i=p([]),s=p(!1),l=async()=>{if(s.value)return;s.value=!0;const d=await ve(t);i.value=d.filter(c=>c.code!==r).map(c=>({label:c.name,value:c.code})),s.value=!1},u=async d=>{if(!d)return;const c=await ie(d,t);e.definition=c};return G(()=>{n===1&&a&&u(a),l()}),{type:"select",field:"workflowDefinitionCode",span:24,name:o("project.node.child_node"),props:{loading:s,filterable:!0},options:i,class:"select-child-node",validate:{trigger:["input","blur"],required:!0,validator(d,c){if(!c)return Error(o("project.node.child_node_tips"))}}}}function B(e,t={}){const{t:n}=m(),a=p([]),r=p([]),o=[{id:0,code:"MYSQL",disabled:!1},{id:1,code:"POSTGRESQL",disabled:!1},{id:2,code:"HIVE",disabled:!1},{id:3,code:"SPARK",disabled:!1},{id:4,code:"CLICKHOUSE",disabled:!1},{id:5,code:"ORACLE",disabled:!1},{id:6,code:"SQLSERVER",disabled:!1},{id:7,code:"DB2",disabled:!1},{id:8,code:"PRESTO",disabled:!1},{id:10,code:"REDSHIFT",disabled:!1},{id:11,code:"ATHENA",disabled:!1},{id:12,code:"TRINO",disabled:!1},{id:13,code:"STARROCKS",disabled:!1},{id:14,code:"AZURESQL",disabled:!1},{id:15,code:"DAMENG",disabled:!1},{id:16,code:"OCEANBASE",disabled:!1},{id:17,code:"SSH",disabled:!0},{id:18,code:"KYUUBI",disabled:!1},{id:19,code:"DATABEND",disabled:!1},{id:21,code:"VERTICA",disabled:!1},{id:22,code:"HANA",disabled:!1},{id:23,code:"DORIS",disabled:!1},{id:24,code:"ZEPPELIN",disabled:!1},{id:25,code:"SAGEMAKER",disabled:!1},{id:27,code:"ALIYUN_SERVERLESS_SPARK",disabled:!1},{id:28,code:"DOLPHINDB",disabled:!1}],i=async()=>{a.value=o.filter(u=>u.disabled?!1:t.supportedDatasourceType?te.exports.indexOf(t.supportedDatasourceType,u.code)!==-1:!0).map(u=>({label:u.code,value:u.code}))},s=async()=>{const u={type:e[t.typeField||"type"]},d=await Te(u);r.value=d.map(v=>({label:v.name,value:v.id}));const c=t.sourceField||"datasource";!d.length&&e[c]&&(e[c]=null),d.length&&e[c]&&(te.exports.find(d,{id:e[c]})||(e[c]=null))},l=()=>{s()};return G(async()=>{i(),await fe(),s()}),[{type:"select",field:t.typeField||"type",span:t.span||12,name:n("project.node.datasource_type"),props:{"on-update:value":l},options:a,validate:{trigger:["input","blur"],required:!0}},{type:"select",field:t.sourceField||"datasource",span:t.span||12,name:n("project.node.datasource_instances"),options:r,validate:{trigger:["input","blur"],required:!0,validator(u,d){if(!d&&d!==0)return Error(n("project.node.datasource_instances"))}}}]}function Ue(e){const{t}=m(),n=y(()=>e.sqlType==="0"?6:0),a=y(()=>e.sqlType==="0"&&e.sendEmail?24:0),r=p([]),o=p(!1),i=[{value:"0",label:t("project.node.sql_type_query")},{value:"1",label:t("project.node.sql_type_non_query")}],s=async()=>{if(o.value)return;o.value=!0;const l=await xe();r.value=l.map(u=>({label:u.groupName,value:u.id})),o.value=!1};return G(()=>{s()}),[{type:"select",field:"sqlType",span:6,name:t("project.node.sql_type"),options:i,validate:{trigger:["input","blur"],required:!0}},{type:"switch",field:"sendEmail",span:n,name:t("project.node.send_alarm")},{type:"select",field:"displayRows",span:n,name:t("project.node.log_display"),options:Ge,props:{filterable:!0,tag:!0},validate:{trigger:["input","blur"],validator(l,u){if(!/^\+?[1-9][0-9]*$/.test(u))return new Error(t("project.node.integer_tips"))}}},{type:"custom",field:"displayRowsTips",span:n,widget:Q("div",{class:K["display-rows-tips"]},t("project.node.rows_of_result"))},{type:"input",field:"title",name:t("project.node.title"),props:{placeholder:t("project.node.title_tips")},span:a,validate:{trigger:["input","blur"],required:!0,validator(l,u){if(e.sendEmail&&!u)return new Error(t("project.node.title_tips"))}}},{type:"select",field:"groupId",name:t("project.node.alarm_group"),options:r,span:a,props:{loading:o,placeholder:t("project.node.alarm_group_tips")},validate:{trigger:["input","blur"],required:!0,validator(l,u){if(e.sendEmail&&!u)return new Error(t("project.node.alarm_group_tips"))}}}]}const Ge=[{label:"1",value:1},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}];function We(e){const{t}=m();return[{type:"editor",field:"method",name:t("project.node.procedure_method"),props:{language:"sql",placeholder:t("project.node.procedure_method_tips")},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.procedure_method_tips")}},...D({model:e,field:"localParams",isSimple:e.readonly})]}function D({model:e,field:t,isSimple:n,name:a="custom_parameters",span:r=24}){const{t:o}=m();return[{type:"custom-parameters",field:t,name:o(`project.node.${a}`),class:"btn-custom-parameters",span:r,children:[{type:"input",field:"prop",span:6,class:"input-param-key",props:{placeholder:o("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(i,s){if(!s)return new Error(o("project.node.prop_tips"));if(e[t].filter(u=>u.prop===s).length>1)return new Error(o("project.node.prop_repeat"))}}},{type:"select",field:"direct",span:4,options:Ve,value:"IN",props:{disabled:n}},{type:"select",field:"type",span:6,options:Qe,value:"VARCHAR",props:{disabled:n}},{type:"input",field:"value",span:6,class:"input-param-value",props:{placeholder:o("project.node.value_tips"),maxLength:256}}]}]}const Qe=[{value:"VARCHAR",label:"VARCHAR"},{value:"INTEGER",label:"INTEGER"},{value:"LONG",label:"LONG"},{value:"FLOAT",label:"FLOAT"},{value:"DOUBLE",label:"DOUBLE"},{value:"DATE",label:"DATE"},{value:"TIME",label:"TIME"},{value:"TIMESTAMP",label:"TIMESTAMP"},{value:"BOOLEAN",label:"BOOLEAN"},{value:"LIST",label:"LIST"},{value:"FILE",label:"FILE"}],Ve=[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}];function $e({model:e,field:t,name:n="custom_labels",span:a=24}){const{t:r}=m();return[{type:"custom-parameters",field:t,name:r(`project.node.${n}`),class:"btn-custom-parameters",span:a,children:[{type:"input",field:"label",span:8,class:"customized-label-name",props:{placeholder:r("project.node.label_name_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,i){if(!i)return new Error(r("project.node.label_name_tips"));if(e[t].filter(l=>l.label===i).length>1)return new Error(r("project.node.label_repeat"))}}},{type:"input",field:"value",span:14,class:"customized-label-value",props:{placeholder:r("project.node.label_value_tips"),maxLength:256}}]}]}function Be({model:e,field:t,name:n,span:a=24}){const{t:r}=m();return[{type:"custom-parameters",field:t,name:r(`project.node.${n}`),class:"btn-custom-parameters",span:a,children:[{type:"input",field:"key",span:8,class:"node-selector-label-name",props:{placeholder:r("project.node.expression_name_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,i){if(!i)return new Error(r("project.node.expression_name_tips"));if(e[t].filter(l=>l.label===i).length>1)return new Error(r("project.node.label_repeat"))}}},{type:"select",field:"operator",span:4,options:Ke,value:"In"},{type:"input",field:"values",span:10,class:"node-selector-label-value",props:{placeholder:r("project.node.expression_value_tips"),maxLength:256,disabled:!1}}]}]}const Ke=[{value:"In",label:"In"},{value:"NotIn",label:"NotIn"},{value:"Exists",label:"Exists"},{value:"DoesNotExist",label:"DoesNotExist"},{value:"Gt",label:"Gt"},{value:"Lt",label:"Lt"}];function je(e,t,n,a){const{t:r}=m(),o=p([]),i=p(!1),s=p(["HIVE","HDFS"]),l=async u=>{if(s.value.some(v=>v===u)){i.value=!1;return}i.value=!0,e.modelType==="import"?(e.sourceMysqlDatasource=e.sourceMysqlDatasource?e.sourceMysqlDatasource:"",e.sourceMysqlType=u):(e.sourceMysqlDatasource=e.targetMysqlDatasource?e.targetMysqlDatasource:"",e.targetMysqlType=u);const c=await Te({type:u});o.value=c.map(v=>({label:v.name,value:v.id})),i.value=!1};return G(()=>{l(e.sourceType)}),O(()=>[e.sourceType],()=>{l(e.sourceType)}),O(()=>[e.targetType],()=>{l(e.targetType)}),[{type:"input",field:n,name:r("project.node.datasource"),span:0,validate:{required:!0}},{type:"select",field:a,name:r("project.node.datasource"),span:t,props:{placeholder:r("project.node.datasource_tips"),filterable:!0,loading:i},options:o,validate:{trigger:["blur","input"],validator(u,d){if(!d)return new Error(r("project.node.datasource_tips"))}}}]}function ze(e,t){const{t:n}=m(),a=p(24),r=p(0),o=p(24),i=p(0),s=p(0),l=p(0),u=p(24),d=p(!1),c=p([{label:"MYSQL",value:"MYSQL"},{label:"ORACLE",value:"ORACLE"},{label:"SQLSERVER",value:"SQLSERVER"},{label:"HANA",value:"HANA"}]),v=p([{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]),j=p(),Y=()=>{a.value=t.value&&c.value.some(A=>A.value===e.sourceType)?24:0,r.value=a.value&&e.srcQueryType==="0"?24:0,o.value=a.value&&e.srcQueryType==="1"?24:0,i.value=r.value&&e.srcColumnType==="1"?24:0,s.value=t.value&&e.sourceType==="HIVE"?24:0,l.value=t.value&&e.sourceType==="HDFS"?24:0,u.value=t.value&&c.value.some(A=>A.value===e.sourceType)?24:0},g=()=>{if(!d.value){d.value=!0;return}switch(e.modelType){case"import":e.sourceMysqlDatasource="";break;case"export":e.sourceHiveDatabase="",e.sourceHiveTable="",e.sourceHivePartitionKey="",e.sourceHivePartitionValue="",e.sourceHdfsExportDir="";break;default:e.sourceMysqlDatasource=""}},R=A=>{switch(A){case"import":return c.value;case"export":return v.value;default:return c.value}};return G(()=>{j.value=[...c.value]}),O(()=>e.modelType,A=>{j.value=R(A),e.sourceType=j.value[0].value}),O(()=>[t.value,e.sourceType,e.srcQueryType,e.srcColumnType],()=>{g(),Y()}),[{type:"custom",field:"custom-title-source",span:t,widget:Q("div",{class:K["field-title"]},n("project.node.data_source"))},{type:"select",field:"sourceType",name:n("project.node.type"),span:t,options:j},...je(e,u,"sourceMysqlType","sourceMysqlDatasource"),{type:"radio",field:"srcQueryType",name:n("project.node.model_type"),span:a,options:[{label:n("project.node.form"),value:"0"},{label:"SQL",value:"1"}],props:{"on-update:value":A=>{e.targetType=A==="0"?"HIVE":"HDFS"}}},{type:"input",field:"srcTable",name:n("project.node.table"),span:r,props:{placeholder:n("project.node.table_tips")},validate:{trigger:["input","blur"],required:!0,validator(A,x){if(r.value&&!x)return new Error(n("project.node.table_tips"))}}},{type:"radio",field:"srcColumnType",name:n("project.node.column_type"),span:r,options:[{label:n("project.node.all_columns"),value:"0"},{label:n("project.node.some_columns"),value:"1"}]},{type:"input",field:"srcColumns",name:n("project.node.column"),span:i,props:{placeholder:n("project.node.column_tips")},validate:{trigger:["input","blur"],required:!0,validator(A,x){if(!!i.value&&!x)return new Error(n("project.node.column_tips"))}}},{type:"input",field:"sourceHiveDatabase",name:n("project.node.database"),span:s,props:{placeholder:n("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(A,x){if(s.value&&!x)return new Error(n("project.node.database_tips"))}}},{type:"input",field:"sourceHiveTable",name:n("project.node.table"),span:s,props:{placeholder:n("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(A,x){if(s.value&&!x)return new Error(n("project.node.hive_table_tips"))}}},{type:"input",field:"sourceHivePartitionKey",name:n("project.node.hive_partition_keys"),span:s,props:{placeholder:n("project.node.hive_partition_keys_tips")}},{type:"input",field:"sourceHivePartitionValue",name:n("project.node.hive_partition_values"),span:s,props:{placeholder:n("project.node.hive_partition_values_tips")}},{type:"input",field:"sourceHdfsExportDir",name:n("project.node.export_dir"),span:l,props:{placeholder:n("project.node.export_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(A,x){if(l.value&&!x)return new Error(n("project.node.export_dir_tips"))}}},{type:"editor",field:"sourceMysqlSrcQuerySql",name:n("project.node.sql_statement"),span:o,validate:{trigger:["blur","input"],required:!0,validator(A,x){if(o.value&&!x)return new Error(n("project.node.sql_statement_tips"))}}},...D({model:e,field:"mapColumnHive",name:"map_column_hive",isSimple:!0,span:a}),...D({model:e,field:"mapColumnJava",name:"map_column_java",isSimple:!0,span:a})]}function Ze(e,t){const{t:n}=m(),a=p(24),r=p(0),o=p(0),i=p(0),s=p(0),l=p(!1),u=p([{label:"MYSQL",value:"MYSQL"},{label:"ORACLE",value:"ORACLE"},{label:"SQLSERVER",value:"SQLSERVER"},{label:"HANA",value:"HANA"}]),d=p([{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]),c=p(),v=()=>{a.value=t.value&&e.targetType==="HIVE"?24:0,r.value=t.value&&e.targetType==="HDFS"?24:0,o.value=t.value&&u.value.some(g=>g.value===e.targetType)?24:0,i.value=t.value&&u.value.some(g=>g.value===e.targetType)?24:0,s.value=o.value&&e.targetMysqlIsUpdate?24:0},j=(g,R)=>{switch(g){case"MYSQL":return d.value;case"HDFS":case"HIVE":return u.value;default:return d.value}},Y=()=>{if(!l.value){l.value=!0;return}switch(e.modelType){case"import":e.targetHiveDatabase="",e.targetHiveTable="",e.targetHdfsTargetPath="";break;case"export":e.targetMysqlDatasource="",e.targetMysqlTable="",e.targetMysqlColumns="",e.targetMysqlFieldsTerminated="",e.targetMysqlLinesTerminated="",e.targetMysqlTable="";break;default:e.sourceMysqlDatasource=""}};return G(()=>{c.value=[...d.value]}),O(()=>[e.sourceType,e.srcQueryType],([g,R])=>{c.value=j(g,R),e.targetType=c.value[0].value}),O(()=>[t.value,e.targetType,e.targetMysqlIsUpdate],()=>{Y(),v()}),[{type:"custom",field:"custom-title-target",span:t,widget:Q("div",{class:K["field-title"]},n("project.node.data_target"))},{type:"select",field:"targetType",name:n("project.node.type"),span:t,options:c},{type:"input",field:"targetHiveDatabase",name:n("project.node.database"),span:a,props:{placeholder:n("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(g,R){if(a.value&&!R)return new Error(n("project.node.database_tips"))}}},{type:"input",field:"targetHiveTable",name:n("project.node.table"),span:a,props:{placeholder:n("project.node.table")},validate:{trigger:["blur","input"],required:!0,validator(g,R){if(a.value&&!R)return new Error(n("project.node.table_tips"))}}},{type:"switch",field:"targetHiveCreateTable",span:a,name:n("project.node.create_hive_table")},{type:"switch",field:"targetHiveDropDelimiter",span:a,name:n("project.node.drop_delimiter")},{type:"switch",field:"targetHiveOverWrite",span:a,name:n("project.node.over_write_src")},{type:"input",field:"targetHiveTargetDir",name:n("project.node.hive_target_dir"),span:a,props:{placeholder:n("project.node.hive_target_dir_tips")}},{type:"input",field:"targetHiveReplaceDelimiter",name:n("project.node.replace_delimiter"),span:a,props:{placeholder:n("project.node.replace_delimiter_tips")}},{type:"input",field:"targetHivePartitionKey",name:n("project.node.hive_partition_keys"),span:a,props:{placeholder:n("project.node.hive_partition_keys_tips")}},{type:"input",field:"targetHivePartitionValue",name:n("project.node.hive_partition_values"),span:a,props:{placeholder:n("project.node.hive_partition_values_tips")}},{type:"input",field:"targetHdfsTargetPath",name:n("project.node.target_dir"),span:r,props:{placeholder:n("project.node.target_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(g,R){if(r.value&&!R)return new Error(n("project.node.target_dir_tips"))}}},{type:"switch",field:"targetHdfsDeleteTargetDir",name:n("project.node.delete_target_dir"),span:r},{type:"radio",field:"targetHdfsCompressionCodec",name:n("project.node.compression_codec"),span:r,options:Xe},{type:"radio",field:"targetHdfsFileType",name:n("project.node.file_type"),span:r,options:et},{type:"input",field:"targetHdfsFieldsTerminated",name:n("project.node.fields_terminated"),span:r,props:{placeholder:n("project.node.fields_terminated_tips")}},{type:"input",field:"targetHdfsLinesTerminated",name:n("project.node.lines_terminated"),span:r,props:{placeholder:n("project.node.lines_terminated_tips")}},...je(e,i,"targetMysqlType","targetMysqlDatasource"),{type:"input",field:"targetMysqlTable",name:n("project.node.table"),span:o,props:{placeholder:n("project.node.table_tips")},validate:{trigger:["blur","input"],required:!0,validator(g,R){if(o.value&&!R)return new Error(n("project.node.table_tips"))}}},{type:"input",field:"targetMysqlColumns",name:n("project.node.column"),span:o,props:{placeholder:n("project.node.column_tips")}},{type:"input",field:"targetMysqlFieldsTerminated",name:n("project.node.fields_terminated"),span:o,props:{placeholder:n("project.node.fields_terminated_tips")}},{type:"input",field:"targetMysqlLinesTerminated",name:n("project.node.lines_terminated"),span:o,props:{placeholder:n("project.node.lines_terminated_tips")}},{type:"switch",field:"targetMysqlIsUpdate",span:o,name:n("project.node.is_update")},{type:"input",field:"targetMysqlTargetUpdateKey",name:n("project.node.update_key"),span:s,props:{placeholder:n("project.node.update_key_tips")}},{type:"radio",field:"targetMysqlUpdateMode",name:n("project.node.update_mode"),span:s,options:[{label:n("project.node.only_update"),value:"updateonly"},{label:n("project.node.allow_insert"),value:"allowinsert"}]}]}const Xe=[{label:"snappy",value:"snappy"},{label:"lzo",value:"lzo"},{label:"gzip",value:"gzip"},{label:"no",value:""}],et=[{label:"avro",value:"--as-avrodatafile"},{label:"sequence",value:"--as-sequencefile"},{label:"text",value:"--as-textfile"},{label:"parquet",value:"--as-parquetfile"}];function he({model:e,children:t,childrenField:n,name:a}){const{t:r}=m(),o=y(()=>e.dependTaskList.length?3:0);return ne(()=>{e.dependTaskList.forEach((i,s)=>{i[n].length===0&&e.dependTaskList.splice(s,1)})}),[{type:"custom",name:r(`project.node.${a}`),field:"relationLabel",span:24,class:K["relaction-label"]},{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:o,class:K["relaction-switch"]},{type:"custom-parameters",field:"dependTaskList",span:20,children:[{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:4,value:"AND",class:K["relaction-switch"]},t]}]}function tt(e){const{t}=m(),n=y(()=>e.timeoutShowFlag?24:0),a=y(()=>e.timeoutFlag&&e.timeoutShowFlag?12:0),r=[{label:t("project.node.timeout_alarm"),value:"WARN"},{label:t("project.node.timeout_failure"),value:"FAILED"}];return O(()=>e.timeoutFlag,o=>{e.timeoutShowFlag=o}),[{type:"switch",field:"timeoutShowFlag",name:t("project.node.timeout_alarm")},{type:"switch",field:"timeoutFlag",name:t("project.node.waiting_dependent_complete"),props:{"on-update:value":o=>{o&&(e.timeoutNotifyStrategy.length||(e.timeoutNotifyStrategy=["WARN"]),e.timeout||(e.timeout=30))}},span:n},{type:"input-number",field:"timeout",name:t("project.node.timeout_period"),span:a,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>t("project.node.minute")},validate:{trigger:["input"],validator(o,i){if(e.timeoutFlag&&!/^[1-9]\d*$/.test(String(i)))return new Error(t("project.node.timeout_period_tips"))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:t("project.node.timeout_strategy"),options:r,span:a,validate:{trigger:["input"],validator(o,i){if(e.waitCompleteTimeoutEnable&&!i.length)return new Error(t("project.node.timeout_strategy_tips"))}}}]}function be(e=24,t=p(!0),n=p(!0),a=p(!0)){const{t:r}=m(),o=p(de);return ne(()=>{o.value=de.filter(i=>{switch(i.value){case"cluster":return n.value;case"client":return t.value;case"local":return a.value;default:return!0}})}),{type:"radio",field:"deployMode",name:r("project.node.deploy_mode"),options:o,span:e}}const de=[{label:"cluster",value:"cluster"},{label:"client",value:"client"},{label:"local",value:"local"}];function rt(){const{t:e}=m();return{type:"input-number",field:"driverCores",name:e("project.node.driver_cores"),span:12,props:{placeholder:e("project.node.driver_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(t,n){if(!n)return new Error(e("project.node.driver_cores_tips"))}}}}function at(){const{t:e}=m();return{type:"input",field:"driverMemory",name:e("project.node.driver_memory"),span:12,props:{placeholder:e("project.node.driver_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(t,n){if(!n)return new Error(e("project.node.driver_memory_tips"));if(!Number.isInteger(parseInt(n)))return new Error(e("project.node.driver_memory")+e("project.node.positive_integer_tips"))}}}}function nt(){const{t:e}=m();return{type:"input-number",field:"numExecutors",name:e("project.node.executor_number"),span:12,props:{placeholder:e("project.node.executor_number_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(t,n){if(!n)return new Error(e("project.node.executor_number_tips"))}}}}function ot(){const{t:e}=m();return{type:"input",field:"executorMemory",name:e("project.node.executor_memory"),span:12,props:{placeholder:e("project.node.executor_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(t,n){if(!n)return new Error(e("project.node.executor_memory_tips"));if(!Number.isInteger(parseInt(n)))return new Error(e("project.node.executor_memory_tips")+e("project.node.positive_integer_tips"))}}}}function it(){const{t:e}=m();return{type:"input-number",field:"executorCores",name:e("project.node.executor_cores"),span:12,props:{placeholder:e("project.node.executor_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(t,n){if(!n)return new Error(e("project.node.executor_cores_tips"))}}}}function pe(e){const{t}=m(),n=p([]),a=$(),r=y(()=>e.programType==="SQL"?0:24),o=async i=>{const s=a.getMainJar(i);if(s){n.value=s;return}const l=await se({type:"FILE",programType:i});X.removeUselessChildren(l),n.value=l||[],a.updateMainJar(i,l)};return G(()=>{o(e.programType)}),O(()=>e.programType,i=>{i!=="SQL"&&o(i)}),{type:"tree-select",field:"mainJar",name:t("project.node.main_package"),span:r,props:{checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:t("project.node.main_package_tips"),keyField:"fullName",labelField:"name"},validate:{trigger:["input","blur"],required:e.programType!=="SQL",validator(i,s){if(!s&&e.programType!=="SQL")return new Error(t("project.node.main_package_tips"))}},options:n}}function W(e=24,t=!1,n=-1){const{t:a}=m(),r=p([]),o=p(!1),i=$(),s=p("Hello"),{copy:l,isSupported:u}=qe({source:s}),d=async()=>{if(i.resources.length){r.value=i.resources;return}if(o.value)return;o.value=!0;const g=await Ie({type:"FILE",fullName:""});X.removeUselessChildren(g),r.value=g||[],o.value=!1,i.updateResource(g)},c=(g,R,A)=>{const x=f=>f.dirctory&&new RegExp(`^${f.fullName}`).test(g),_=f=>(f.children||(f.children=[]),R.push(f.name),c(g,R,f.children));if(A.length>0)for(const f of A){if(x(f))return _(f);if(f.fullName===g)return!0}return v(g,R,A),!1},v=(g,R,A)=>{const x={fullName:g,name:j(g,R),dirctory:!1,disable:!0};A.push(x)},j=(g,R)=>{const A="/resources/"+R.join(""),x=g.indexOf(A);return x!==-1?g.substring(x+A.length):g},Y=async g=>{u.value?(event==null||event.stopPropagation(),await l(g),window.$message.success(a("project.node.copy_success"))):window.$message.error(a("project.node.copy_failed"))};return G(()=>{d()}),{type:"tree-select",field:"resourceList",class:"resource-select",name:a("project.node.resources"),span:e,options:r,props:{multiple:!0,checkable:!0,cascade:!0,showPath:!0,filterable:!0,clearFilterAfterSelect:!1,checkStrategy:"child",placeholder:a("project.node.resources_tips"),keyField:"fullName",labelField:"name",disabledField:"disable",loading:o,"render-tag":({option:g,handleClose:R})=>Q(Oe,{type:"success",closable:!0,onClose:()=>{R()}},{default:()=>g.currentDir,avatar:()=>Q(De,{tag:"div",type:"info",size:"tiny",onClick:()=>Y(g.currentDir)},{icon:()=>Q(ge,null,{default:()=>Q(Ce)})})})},validate:{trigger:["blur"],required:t,validator(g,R){if(R){const A=[];if(R.forEach(x=>{c(x,[],r.value)||A.push(x)}),A.length>0){let x=": ";return A.forEach(_=>{R.splice(R.indexOf(_),1),x+=j(_,[])+";"}),new Error(a("project.node.useless_resources_tips")+x)}}if(ce(t)?t.value:t){if(!R||R.length==0)return new Error(a("project.node.resources_tips"));const A=ce(n)?n.value:n;if(A>0&&R.length>A)return new Error(a("project.node.resources_limit_tips")+n)}}}}}const F=({projectCode:e,from:t=0,readonly:n,data:a,model:r})=>t===0?[]:[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName,taskCode:a==null?void 0:a.code})];function st(e){const{t}=m(),n=p([]),a=$(),r=y(()=>e.runType==="FAT_JAR"?24:0),o=async i=>{const s=a.getMainJar(i);if(s){n.value=s;return}const l=await se({type:"FILE",programType:i});X.removeUselessChildren(l),n.value=l||[],a.updateMainJar(i,l)};return G(()=>{o(e.programType)}),O(()=>e.programType,i=>{o(i)}),{type:"tree-select",field:"mainJar",name:t("project.node.main_package"),span:r,props:{checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:t("project.node.main_package_tips"),keyField:"fullName",labelField:"name"},validate:{trigger:["input","blur"],required:!0,validator(i,s){if(!s)return new Error(t("project.node.main_package_tips"))}},options:n}}function Se(e){const{t}=m();return[{type:"editor",field:"rawScript",name:t("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:t("project.node.script_tips")}},W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}function pt(e){const{t}=m(),n=y(()=>e.programType==="PYTHON"||e.programType==="SQL"?0:24),a=y(()=>e.programType==="PYTHON"||e.programType==="SQL"?0:24),r=y(()=>e.programType==="SQL"?0:24),o=y(()=>e.programType==="SQL"&&e.sqlExecutionType==="SCRIPT"?24:0),i=y(()=>e.programType!=="SQL"),s=p(e.programType==="SQL"&&e.sqlExecutionType==="FILE"),l=y(()=>e.programType==="SQL"&&e.sqlExecutionType==="FILE"?1:-1),u=y(()=>e.programType==="SQL"?12:0),d=[{label:t("project.node.sql_execution_type_from_script"),value:"SCRIPT"},{label:t("project.node.sql_execution_type_from_file"),value:"FILE"}];return O(()=>[e.sqlExecutionType,e.programType],()=>{s.value=e.programType==="SQL"&&e.sqlExecutionType==="FILE"}),[{type:"select",field:"programType",span:12,name:t("project.node.program_type"),options:lt,props:{"on-update:value":()=>{e.mainJar=null,e.mainClass=""}}},{type:"select",field:"sqlExecutionType",span:u,name:t("project.node.sql_execution_type"),options:d,validate:{trigger:["input","blur"],required:!0}},{type:"input",field:"mainClass",span:n,name:t("project.node.main_class"),props:{placeholder:t("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:e.programType!=="PYTHON"&&e.programType!=="SQL",validator(c,v){if(e.programType!=="PYTHON"&&!v&&e.programType!=="SQL")return new Error(t("project.node.main_class_tips"))}}},pe(e),{type:"editor",field:"rawScript",span:o,name:t("project.node.script"),props:{language:"sql"},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.script_tips")}},{type:"input",field:"master",span:a,name:t("project.node.master"),props:{placeholder:t("project.node.master_tips")},validate:{trigger:["input","blur"],required:!1,validator(c,v){if(e.programType!=="PYTHON"&&!v&&e.programType!=="SQL")return new Error(t("project.node.master_tips"))}}},be(24,p(!0),i),le(),{type:"input",field:"appName",name:t("project.node.app_name"),props:{placeholder:t("project.node.app_name_tips")}},rt(),at(),nt(),ot(),it(),ue(),{type:"input",field:"mainArgs",span:r,name:t("project.node.main_arguments"),props:{type:"textarea",placeholder:t("project.node.main_arguments_tips")}},{type:"input",field:"others",name:t("project.node.option_parameters"),props:{type:"textarea",placeholder:t("project.node.option_parameters_tips")}},W(24,s,l),...D({model:e,field:"localParams",isSimple:e.readonly})]}const lt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}];function ut(e){const{t}=m(),n=y(()=>e.programType==="PYTHON"||e.programType==="SQL"?0:24);return[{type:"select",field:"programType",span:12,name:t("project.node.program_type"),options:ct,props:{"on-update:value":()=>{e.mainJar=null,e.mainClass=""}},value:e.programType},{type:"input",field:"mainClass",span:n,name:t("project.node.main_class"),props:{placeholder:t("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:e.programType!=="PYTHON",validator(a,r){if(e.programType!=="PYTHON"&&!r)return new Error(t("project.node.main_class_tips"))}}},pe(e),{type:"input",field:"appName",name:t("project.node.app_name"),props:{placeholder:t("project.node.app_name_tips")}},ue(),{type:"input",field:"mainArgs",name:t("project.node.main_arguments"),props:{type:"textarea",placeholder:t("project.node.main_arguments_tips")}},{type:"input",field:"others",name:t("project.node.option_parameters"),props:{type:"textarea",placeholder:t("project.node.option_parameters_tips")}},W(),...D({model:e,field:"localParams",isSimple:!0})]}const ct=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"}];function Ee(e){const{t}=m(),n=y(()=>e.programType==="PYTHON"||e.programType==="SQL"?0:24),a=y(()=>e.programType==="SQL"?0:24),r=y(()=>e.programType==="SQL"?24:0),o=y(()=>e.programType==="SQL"?[{label:">=1.13",value:">=1.13"}]:mt),i=y(()=>e.flinkVersion==="<1.10"&&e.deployMode!=="local"?12:0),s=y(()=>e.deployMode!=="local"?12:0),l=y(()=>e.deployMode!=="local"?24:0),u=y(()=>e.programType==="SQL"?[{label:"per-job/cluster",value:"cluster"},{label:"local",value:"local"},{label:"standalone",value:"standalone"}]:e.flinkVersion==="<1.10"?[{label:"cluster",value:"cluster"},{label:"local",value:"local"}]:[{label:"per-job/cluster",value:"cluster"},{label:"application",value:"application"},{label:"local",value:"local"}]);return O(()=>e.flinkVersion,()=>{e.flinkVersion==="<1.10"&&e.deployMode==="application"&&(e.deployMode="cluster")}),ne(()=>{e.flinkVersion=e.programType==="SQL"?">=1.13":e.flinkVersion}),[{type:"select",field:"programType",span:24,name:t("project.node.program_type"),options:dt,props:{"on-update:value":()=>{e.mainJar=null,e.mainClass=""}}},{type:"input",field:"mainClass",span:n,name:t("project.node.main_class"),props:{placeholder:t("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:e.programType!=="PYTHON"&&e.programType!=="SQL",validator(d,c){if(e.programType!=="PYTHON"&&!c&&e.programType!=="SQL")return new Error(t("project.node.main_class_tips"))}}},pe(e),{type:"radio",field:"deployMode",name:t("project.node.deploy_mode"),options:u,span:24},{type:"editor",field:"initScript",span:r,name:t("project.node.init_script"),validate:{trigger:["input","trigger"],required:!1,message:t("project.node.init_script_tips")}},{type:"editor",field:"rawScript",span:r,name:t("project.node.script"),props:{language:"sql"},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.script_tips")}},{type:"select",field:"flinkVersion",name:t("project.node.flink_version"),options:o,value:e.flinkVersion,span:s},{type:"input",field:"appName",name:t("project.node.app_name"),props:{placeholder:t("project.node.app_name_tips")},span:l},{type:"input",field:"jobManagerMemory",name:t("project.node.job_manager_memory"),span:s,props:{placeholder:t("project.node.job_manager_memory_tips"),min:1},validate:{trigger:["input","blur"],validator(d,c){if(!!c&&!Number.isInteger(parseInt(c)))return new Error(t("project.node.job_manager_memory_tips")+t("project.node.positive_integer_tips"))}}},{type:"input",field:"taskManagerMemory",name:t("project.node.task_manager_memory"),span:s,props:{placeholder:t("project.node.task_manager_memory_tips")},validate:{trigger:["input","blur"],validator(d,c){if(!!c&&!Number.isInteger(parseInt(c)))return new Error(t("project.node.task_manager_memory")+t("project.node.positive_integer_tips"))}},value:e.taskManagerMemory},{type:"input-number",field:"slot",name:t("project.node.slot_number"),span:s,props:{placeholder:t("project.node.slot_number_tips"),min:1},value:e.slot},{type:"input-number",field:"taskManager",name:t("project.node.task_manager_number"),span:i,props:{placeholder:t("project.node.task_manager_number_tips"),min:1},value:e.taskManager},{type:"input-number",field:"parallelism",name:t("project.node.parallelism"),span:12,props:{placeholder:t("project.node.parallelism_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(d,c){if(!c)return new Error(t("project.node.parallelism_tips"))}},value:e.parallelism},ue(),{type:"input",field:"mainArgs",span:a,name:t("project.node.main_arguments"),props:{type:"textarea",placeholder:t("project.node.main_arguments_tips")}},{type:"input",field:"others",name:t("project.node.option_parameters"),props:{type:"textarea",placeholder:t("project.node.option_parameters_tips")}},W(),...D({model:e,field:"localParams",isSimple:!0})]}const dt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],mt=[{label:"<1.10",value:"<1.10"},{label:"1.11",value:"1.11"},{label:">=1.12",value:">=1.12"}];function ft(e){const{t}=m(),n=p(0),a=p(me),r=[{label:t("project.node.status_code_default"),value:"STATUS_CODE_DEFAULT"},{label:t("project.node.status_code_custom"),value:"STATUS_CODE_CUSTOM"},{label:t("project.node.body_contains"),value:"BODY_CONTAINS"},{label:t("project.node.body_not_contains"),value:"BODY_NOT_CONTAINS"}],o=()=>{switch(e.httpMethod){case"GET":case"DELETE":a.value=me;break;case"POST":case"PUT":a.value=_t;break}},i=()=>{switch(e.httpMethod){case"GET":case"DELETE":n.value=0;break;case"POST":case"PUT":n.value=24;break}};return O(()=>[e.httpMethod],()=>{i(),o()}),[{type:"input",class:"input-url-name",field:"url",name:t("project.node.http_url"),props:{placeholder:t("project.node.http_url_tips")},validate:{trigger:["input","blur"],required:!0,validator(s,l){if(!l)return new Error(t("project.node.http_url_tips"));if(l.search(new RegExp(/http[s]{0,1}:\/\/\S*/,"i")))return new Error(t("project.node.http_url_validator"))}}},{type:"select",field:"httpMethod",span:12,name:t("project.node.http_method"),options:yt},{type:"custom-parameters",field:"httpParams",name:t("project.node.http_parameters"),children:[{type:"input",field:"prop",span:6,props:{placeholder:t("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(s,l){if(!l)return new Error(t("project.node.prop_tips"));if(e.httpParams.filter(d=>d.prop===l).length>1)return new Error(t("project.node.prop_repeat"))}}},{type:"select",field:"httpParametersType",span:6,options:a,value:"HEADERS"},{type:"input",field:"value",span:6,props:{placeholder:t("project.node.value_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(s,l){if(!l)return new Error(t("project.node.value_required_tips"))}}}]},{type:"editor",field:"httpBody",name:t("project.node.http_body"),span:n,validate:{trigger:["blur","input"],required:!0,validator(s,l){if(n.value&&!l)return new Error(t("project.node.http_body_tips"))}}},{type:"select",field:"httpCheckCondition",name:t("project.node.http_check_condition"),options:r},{type:"input",field:"condition",name:t("project.node.http_condition"),props:{type:"textarea",placeholder:t("project.node.http_condition_tips")}},{type:"input-number",field:"connectTimeout",name:t("project.node.connect_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>t("project.node.ms")},validate:{trigger:["input","blur"],validator(s,l){if(!Number.isInteger(parseInt(l)))return new Error(t("project.node.connect_timeout")+t("project.node.positive_integer_tips"))}}},...D({model:e,field:"localParams",isSimple:!0})]}const yt=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],me=[{value:"PARAMETER",label:"Parameter"},{value:"HEADERS",label:"Headers"}],_t=[{value:"HEADERS",label:"Headers"}];function vt(e){const{t}=m(),n=y(()=>e.type==="HIVE"?24:0);return[{type:"input",field:"connParams",name:t("project.node.sql_parameter"),props:{placeholder:t("project.node.format_tips")+" key1=value1;key2=value2..."},span:n},{type:"editor",field:"sql",name:t("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:t("project.node.sql_empty_tips")},props:{language:"sql"}},...D({model:e,field:"localParams",isSimple:e.readonly}),{type:"multi-input",field:"preStatements",name:t("project.node.pre_sql_statement"),span:22,props:{placeholder:t("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:t("project.node.post_sql_statement"),span:22,props:{placeholder:t("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}}]}function gt(e){const{t}=m(),n=y(()=>e.isCustomTask?24:0),a=y(()=>e.isCustomTask?0:24),r=y(()=>e.isCustomTask?0:12);return[{type:"switch",field:"isCustomTask",name:t("project.node.custom_job")},{type:"input",field:"jobName",name:t("project.node.sqoop_job_name"),span:a,props:{placeholder:t("project.node.sqoop_job_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,i){if(!e.isCustomTask&&!i)return new Error(t("project.node.sqoop_job_name_tips"))}}},{type:"select",field:"modelType",name:t("project.node.direct"),span:a,options:Tt},...D({model:e,field:"hadoopCustomParams",name:"hadoop_custom_params",isSimple:!0,span:a}),...D({model:e,field:"sqoopAdvancedParams",name:"sqoop_advanced_parameters",isSimple:!0,span:a}),...ze(e,a),...Ze(e,a),{type:"input-number",field:"concurrency",name:t("project.node.concurrency"),span:r,props:{placeholder:t("project.node.concurrency_tips"),min:1}},{type:"input",field:"splitBy",name:t("project.node.concurrency_column"),span:r,props:{placeholder:t("project.node.concurrency_column_tips")}},{type:"editor",field:"customShell",name:t("project.node.custom_script"),span:n,validate:{trigger:["input","trigger"],required:!0,validator(o,i){if(n.value&&!i)return new Error(t("project.node.custom_script"))}}},...D({model:e,field:"localParams",name:"custom_parameters",isSimple:!0})]}const Tt=[{label:"import",value:"import"},{label:"export",value:"export"}];function jt(e){const{t}=m(),n=y(()=>e.useCustom?24:0),a=y(()=>e.useCustom?0:24),r=y(()=>e.startupScript.includes("flink")?24:0),o=y(()=>e.startupScript.includes("spark")||e.startupScript==="seatunnel.sh"?24:0),i=y(()=>e.startupScript.includes("spark")&&e.deployMode!=="local"?12:0),s=y(()=>e.startupScript.includes("spark")&&e.deployMode!=="local"&&(e.master==="SPARK"||e.master==="MESOS")?12:0),l=y(()=>e.startupScript.includes("spark")),u=y(()=>e.startupScript==="seatunnel.sh"),d=y(()=>e.startupScript.includes("flink")||e.startupScript==="seatunnel.sh"?24:0);return[{type:"select",field:"startupScript",span:15,name:t("project.node.startup_script"),options:ht,validate:{trigger:["input","blur"],required:!0,message:t("project.node.startup_script_tips")},props:{"on-update:value":c=>{c&&(e.startupScript==="seatunnel.sh"&&(e.deployMode="local"),e.startupScript.includes("spark")&&(e.deployMode="client"))}}},{type:"select",field:"runMode",name:t("project.node.run_mode"),options:bt,value:e.runMode,span:r},{type:"input",field:"others",name:t("project.node.option_parameters"),span:d,props:{type:"textarea",placeholder:t("project.node.option_parameters_tips")}},be(o,l,p(!0),u),{type:"select",field:"master",name:t("project.node.sea_tunnel_master"),options:St,value:e.master,span:i},{type:"input",field:"masterUrl",name:t("project.node.sea_tunnel_master_url"),value:e.masterUrl,span:s,props:{placeholder:t("project.node.sea_tunnel_master_url_tips")},validate:{trigger:["input","blur"],required:s.value!==0,validator(c,v){if(s.value!==0&&!v)return new Error(t("project.node.sea_tunnel_master_url_tips"))}}},{type:"switch",field:"useCustom",name:t("project.node.custom_config")},{type:"editor",field:"rawScript",name:t("project.node.script"),span:n,validate:{trigger:["input","trigger"],required:e.useCustom,validator(c,v){if(e.useCustom&&!v)return new Error(t("project.node.script_tips"))}}},W(a,!0,1),...D({model:e,field:"localParams",isSimple:!0})]}const ht=[{label:"seatunnel.sh",value:"seatunnel.sh"},{label:"start-seatunnel-flink-13-connector-v2.sh",value:"start-seatunnel-flink-13-connector-v2.sh"},{label:"start-seatunnel-flink-15-connector-v2.sh",value:"start-seatunnel-flink-15-connector-v2.sh"},{label:"start-seatunnel-flink-connector-v2.sh",value:"start-seatunnel-flink-connector-v2.sh"},{label:"start-seatunnel-flink.sh",value:"start-seatunnel-flink.sh"},{label:"start-seatunnel-spark-2-connector-v2.sh",value:"start-seatunnel-spark-2-connector-v2.sh"},{label:"start-seatunnel-spark-3-connector-v2.sh",value:"start-seatunnel-spark-3-connector-v2.sh"},{label:"start-seatunnel-spark-connector-v2.sh",value:"start-seatunnel-spark-connector-v2.sh"},{label:"start-seatunnel-spark.sh",value:"start-seatunnel-spark.sh"}],bt=[{label:"none",value:"NONE"},{label:"run",value:"RUN"},{label:"run-application",value:"RUN_APPLICATION"}],St=[{label:"yarn",value:"YARN"},{label:"local",value:"LOCAL"},{label:"spark://",value:"SPARK"},{label:"mesos://",value:"MESOS"}];function Et(e,t){const{t:n}=m(),a=$(),r=p(a.postTaskOptions),o=p(!1),i=async()=>{if(o.value)return;o.value=!0,r.value=[];const l=await ie(e.workflowDefinitionName,t);l==null||l.taskDefinitionList.forEach(u=>{u.code!=e.code&&r.value.push({label:u.name,value:u.code})}),o.value=!1,s(r.value)},s=l=>{var u,d;if(!l||!l.length){e.nextNode=null,(u=e.dependTaskList)==null||u.forEach(c=>{c.nextNode=null});return}te.exports.findIndex(r.value,c=>c.value==e.nextNode)===-1&&(e.nextNode=null),(d=e.dependTaskList)==null||d.forEach(c=>{te.exports.findIndex(r.value,v=>v.value==c.nextNode)===-1&&(c.nextNode=null)})};return O(()=>[e.workflowName,e.nextCode],()=>{e.workflowName&&i()}),G(async()=>{await fe(),s(r.value)}),[{type:"custom-parameters",field:"dependTaskList",name:n("project.node.switch_condition"),children:[{type:"input",field:"condition",span:24,props:{loading:o,type:"textarea",autosize:{minRows:2}}},{type:"select",field:"nextNode",span:22,name:n("project.node.switch_branch_flow"),options:r}]},{type:"select",field:"nextNode",span:24,name:n("project.node.switch_branch_flow_default"),props:{loading:o},options:r}]}function wt(e){const{t}=m(),n=[{label:`0(${t("project.node.unlimited")})`,value:0},{label:"1KB",value:1024},{label:"10KB",value:10240},{label:"50KB",value:51200},{label:"100KB",value:102400},{label:"512KB",value:524288}],a=[{label:`0(${t("project.node.unlimited")})`,value:0},{label:"500",value:500},{label:"1000",value:1e3},{label:"1500",value:1500},{label:"2000",value:2e3},{label:"2500",value:2500},{label:"3000",value:3e3}],r=[{label:"1G",value:1},{label:"2G",value:2},{label:"3G",value:3},{label:"4G",value:4}],o=p(24),i=p(0),s=p(12),l=p(8),u=p(22),d=p(12),c=p(0),v=()=>{e.customConfig?(o.value=0,i.value=24,s.value=0,l.value=0,u.value=0,d.value=0,c.value=24):(o.value=24,i.value=0,s.value=12,l.value=8,u.value=22,d.value=12,c.value=0)},j=["MYSQL","POSTGRESQL","ORACLE","SQLSERVER","CLICKHOUSE","DATABEND","HIVE","PRESTO","OCEANBASE"];return G(()=>{v()}),O(()=>e.customConfig,()=>{v()}),[{type:"switch",field:"customConfig",name:t("project.node.datax_custom_template")},...B(e,{typeField:"dsType",sourceField:"dataSource",span:s,supportedDatasourceType:j}),{type:"editor",field:"sql",name:t("project.node.sql_statement"),span:o,validate:{trigger:["input","trigger"],required:!0,message:t("project.node.sql_empty_tips")}},{type:"editor",field:"json",name:t("project.node.datax_json_template"),span:i,validate:{trigger:["input","trigger"],required:!0,message:t("project.node.sql_empty_tips")}},W(c),...B(e,{typeField:"dtType",sourceField:"dataTarget",span:l,supportedDatasourceType:j}),{type:"input",field:"targetTable",name:t("project.node.datax_target_table"),span:l,props:{placeholder:t("project.node.datax_target_table_tips")},validate:{trigger:["input","blur"],required:!0}},{type:"multi-input",field:"preStatements",name:t("project.node.datax_target_database_pre_sql"),span:u,props:{placeholder:t("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:t("project.node.datax_target_database_post_sql"),span:u,props:{placeholder:t("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"select",field:"jobSpeedByte",name:t("project.node.datax_job_speed_byte"),span:d,options:n,value:0},{type:"select",field:"jobSpeedRecord",name:t("project.node.datax_job_speed_record"),span:d,options:a,value:1e3},{type:"select",field:"xms",name:t("project.node.datax_job_runtime_memory_xms"),span:12,options:r,value:1},{type:"select",field:"xmx",name:t("project.node.datax_job_runtime_memory_xmx"),span:12,options:r,value:1},...D({model:e,field:"localParams",isSimple:!0})]}function kt(e){const{t}=m(),n=$(),a=n.preTaskOptions.filter(o=>n.preTasks.includes(Number(o.value))),r=[{label:t("project.node.success"),value:"success"},{label:t("project.node.failed"),value:"failed"}];return[{type:"select",field:"successNode",name:t("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"successBranch",name:t("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(o,i)=>{if(i&&i===e.failedBranch)return new Error(t("project.node.branch_tips"))}},options:n.getPostTaskOptions},{type:"select",field:"failedNode",name:t("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"failedBranch",name:t("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(o,i)=>{if(i&&i===e.successBranch)return new Error(t("project.node.branch_tips"))}},options:n.getPostTaskOptions},...I(e),...he({model:e,children:{type:"custom-parameters",field:"dependItemList",span:18,children:[{type:"select",field:"depTaskCode",span:10,options:a},{type:"select",field:"status",span:10,options:[{value:"SUCCESS",label:t("project.node.success")},{value:"FAILURE",label:t("project.node.failed")}]}]},childrenField:"dependItemList",name:"add_pre_task_check_condition"})]}function Lt(e){const{t}=m(),n=ye(),a=$(),r=y(()=>[{label:t("project.node.dependent_failure_policy_failure"),value:"DEPENDENT_FAILURE_FAILURE"},{label:t("project.node.dependent_failure_policy_waiting"),value:"DEPENDENT_FAILURE_WAITING"}]),o=y(()=>e.failurePolicy==="DEPENDENT_FAILURE_WAITING"?12:0),i=a.getDependentResult,s=Ye(t),l=p([]),u={},d={},c=p([]),v=[{value:"DEPENDENT_ON_WORKFLOW",label:t("project.node.dependent_on_workflow")},{value:"DEPENDENT_ON_TASK",label:t("project.node.dependent_on_task")}],j=[{value:"day",label:t("project.node.day")},{value:"hour",label:t("project.node.hour")},{value:"week",label:t("project.node.week")},{value:"month",label:t("project.node.month")}],Y={hour:[{value:"currentHour",label:t("project.node.current_hour")},{value:"last1Hour",label:t("project.node.last_1_hour")},{value:"last2Hours",label:t("project.node.last_2_hour")},{value:"last3Hours",label:t("project.node.last_3_hour")},{value:"last24Hours",label:t("project.node.last_24_hour")}],day:[{value:"today",label:t("project.node.today")},{value:"last1Days",label:t("project.node.last_1_days")},{value:"last2Days",label:t("project.node.last_2_days")},{value:"last3Days",label:t("project.node.last_3_days")},{value:"last7Days",label:t("project.node.last_7_days")}],week:[{value:"thisWeek",label:t("project.node.this_week")},{value:"lastWeek",label:t("project.node.last_week")},{value:"lastMonday",label:t("project.node.last_monday")},{value:"lastTuesday",label:t("project.node.last_tuesday")},{value:"lastWednesday",label:t("project.node.last_wednesday")},{value:"lastThursday",label:t("project.node.last_thursday")},{value:"lastFriday",label:t("project.node.last_friday")},{value:"lastSaturday",label:t("project.node.last_saturday")},{value:"lastSunday",label:t("project.node.last_sunday")}],month:[{value:"thisMonth",label:t("project.node.this_month")},{value:"thisMonthBegin",label:t("project.node.this_month_begin")},{value:"lastMonth",label:t("project.node.last_month")},{value:"lastMonthBegin",label:t("project.node.last_month_begin")},{value:"lastMonthEnd",label:t("project.node.last_month_end")}]},g=async()=>{const _=await He();return l.value=_.map(f=>({value:f.code,label:()=>Q(re,null,f.name),filterLabel:f.name})),l},R=async _=>{if(u[_])return u[_];const C=(await Ae(_)).map(T=>({value:T.code,label:()=>Q(re,null,T.name),filterLabel:T.name}));return u[_]=C,C},A=async(_,f)=>{if(d[f])return d[f];const T=(await Me(_,f)).map(H=>({value:H.code,label:()=>Q(re,null,H.name),filterLabel:H.name}));return T.unshift({value:-1,label:"ALL",filterLabel:"ALL"}),d[f]=T,T},x=_=>{var J,U;if(!_||n.currentRoute.value.name!=="workflow-instance-detail")return null;const f=`${_.projectCode}-${_.definitionCode}-${_.depTaskCode}-${_.dateValue}`,C=i[f];let T,H;return C?(T=(J=s[C])==null?void 0:J.icon,H=(U=s[C])==null?void 0:U.color):(T=s.RUNNING_EXECUTION.icon,H=s.RUNNING_EXECUTION.color),Q(ge,{size:24,color:H},()=>Q(T))};return G(()=>{g()}),O(()=>e.dependTaskList,_=>{c.value=[],_.forEach((f,C)=>{var H,J;if(!((H=f.dependItemList)!=null&&H.length))return;const T=p([]);(J=f.dependItemList)==null||J.forEach(async(U,ee)=>{T.value[ee]={},U.dependentType||(U.depTaskCode==0?U.dependentType="DEPENDENT_ON_WORKFLOW":U.dependentType="DEPENDENT_ON_TASK"),U.projectCode&&(T.value[ee].definitionCodeOptions=await R(U.projectCode)),U.projectCode&&U.definitionCode&&(T.value[ee].depTaskCodeOptions=await A(U.projectCode,U.definitionCode)),U.cycle&&(T.value[ee].dateOptions=Y[U.cycle])}),c.value[C]={},c.value[C].dependItemList=T.value})}),[...tt(e),...he({model:e,children:(_=0)=>({type:"custom-parameters",field:"dependItemList",span:18,children:[(f=0)=>({type:"select",field:"dependentType",name:t("project.node.dependent_type"),span:24,props:{onUpdateValue:C=>{const T=e.dependTaskList[_].dependItemList[f];T.definitionCode&&(T.depTaskCode=C==="DEPENDENT_ON_WORKFLOW"?0:-1)}},options:v,value:"DEPENDENT_ON_WORKFLOW"}),(f=0)=>({type:"select",field:"projectCode",name:t("project.node.project_name"),span:24,props:{filterable:!0,filter:(C,T)=>T.filterLabel.toLowerCase().includes(C.toLowerCase()),onUpdateValue:async C=>{const T=e.dependTaskList[_].dependItemList[f],H=(c==null?void 0:c.value[_])||{},J=(H==null?void 0:H.dependItemList)||[],U={};U.definitionCodeOptions=await R(C),J[f]=U,H.dependItemList=J,c.value[_]=H,T.depTaskCode=null,T.definitionCode=null,T.parameterPassing=!1}},options:l,path:`dependTaskList.${_}.dependItemList.${f}.projectCode`,rule:{required:!0,trigger:["input","blur"],validator(C,T){if(!T)return Error(t("project.node.project_name_tips"))}}}),(f=0)=>{var C,T;return{type:"select",field:"definitionCode",span:24,name:t("project.node.workflow_name"),props:{filterable:!0,filter:(H,J)=>J.filterLabel.toLowerCase().includes(H.toLowerCase()),onUpdateValue:async H=>{const J=e.dependTaskList[_].dependItemList[f];c.value[_].dependItemList[f].depTaskCodeOptions=await A(J.projectCode,H),J.depTaskCode=J.dependentType==="DEPENDENT_ON_WORKFLOW"?0:-1}},options:((T=(C=c.value[_])==null?void 0:C.dependItemList[f])==null?void 0:T.definitionCodeOptions)||[],path:`dependTaskList.${_}.dependItemList.${f}.definitionCode`,rule:{required:!0,trigger:["input","blur"],validator(H,J){if(!J)return Error(t("project.node.workflow_name_tips"))}}}},(f=0)=>{var C,T;return{type:"select",field:"depTaskCode",span:y(()=>e.dependTaskList[_].dependItemList[f].dependentType==="DEPENDENT_ON_WORKFLOW"?0:24),name:t("project.node.task_name"),props:{filterable:!0,filter:(H,J)=>J.filterLabel.toLowerCase().includes(H.toLowerCase())},options:((T=(C=c.value[_])==null?void 0:C.dependItemList[f])==null?void 0:T.depTaskCodeOptions)||[],path:`dependTaskList.${_}.dependItemList.${f}.depTaskCode`,rule:{required:!0,trigger:["input","blur"],validator(H,J){if(!J&&J!==0)return Error(t("project.node.task_name_tips"))}}}},(f=0)=>({type:"select",field:"cycle",span:10,name:t("project.node.cycle_time"),props:{onUpdateValue:C=>{c.value[_].dependItemList[f].dateOptions=Y[C],e.dependTaskList[_].dependItemList[f].dateValue=null}},options:j,value:j.length>0?j[0].value:"",path:`dependTaskList.${_}.dependItemList.${f}.cycle`,rule:{required:!0,trigger:["input","blur"],validator(C,T){if(!T)return Error(t("project.node.cycle_time_tips"))}}}),(f=0)=>{var C,T;return{type:"select",field:"dateValue",span:10,name:" ",options:((T=(C=c.value[_])==null?void 0:C.dependItemList[f])==null?void 0:T.dateOptions)||Y.day,value:Y.day[0].value,path:`dependTaskList.${_}.dependItemList.${f}.dateValue`,rule:{trigger:["input","blur"],validator(H,J){if(!J)return Error(t("project.node.date_tips"))}}}},(f=0)=>{var C;return{type:"custom",field:"state",span:2,name:" ",widget:x((C=e.dependTaskList[_])==null?void 0:C.dependItemList[f])}},(f=0)=>({type:"switch",field:"parameterPassing",span:20,name:t("project.node.dependent_task_parameter_passing"),path:`dependTaskList.${_}.dependItemList.${f}.parameterPassing`})]}),childrenField:"dependItemList",name:"add_dependency"}),{type:"input-number",field:"checkInterval",name:t("project.node.check_interval"),span:12,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>t("project.node.second")},validate:{trigger:["input"],validator(_,f){if(!f&&!/^[1-9]\d*$/.test(String(f)))return new Error(t("project.node.check_interval_tips"))}}},{type:"radio",field:"failurePolicy",name:t("project.node.dependent_failure_policy"),options:r,span:24},{type:"input-number",field:"failureWaitingTime",name:t("project.node.dependent_failure_waiting_time"),span:o,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>t("project.node.minute")},validate:{trigger:["input"],required:!0,validator(_,f){if(e.timeoutFlag||!/^[1-9]\d*$/.test(String(f)))return new Error(t("project.node.dependent_failure_waiting_time_tips"))}}}]}function Nt(e){const{t}=m(),n=y(()=>e.programType==="RUN_JOB_FLOW"?24:0),a=y(()=>e.programType==="ADD_JOB_FLOW_STEPS"?24:0);return[{type:"select",field:"programType",span:24,name:t("project.node.program_type"),options:Pt,validate:{required:!0}},{type:"editor",field:"jobFlowDefineJson",span:n,name:t("project.node.emr_flow_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.emr_flow_define_json_tips")}},{type:"editor",field:"stepsDefineJson",span:a,name:t("project.node.emr_steps_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.emr_steps_define_json_tips")}},...D({model:e,field:"localParams",isSimple:!0})]}const Pt=[{label:"RUN_JOB_FLOW",value:"RUN_JOB_FLOW"},{label:"ADD_JOB_FLOW_STEPS",value:"ADD_JOB_FLOW_STEPS"}];function Rt(e){const{t}=m();return[{type:"input",field:"noteId",name:t("project.node.zeppelin_note_id"),props:{placeholder:t("project.node.zeppelin_note_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.zeppelin_note_id_tips"))}}},{type:"input",field:"paragraphId",name:t("project.node.zeppelin_paragraph_id"),props:{placeholder:t("project.node.zeppelin_paragraph_id_tips")}},{type:"input",field:"productionNoteDirectory",name:t("project.node.zeppelin_production_note_directory"),props:{placeholder:t("project.node.zeppelin_production_note_directory_tips")}},{type:"input",field:"parameters",name:t("project.node.zeppelin_parameters"),props:{placeholder:t("project.node.zeppelin_parameters_tips")}},...D({model:e,field:"localParams",isSimple:e.readonly})]}function le(){const{t:e}=m(),t=p([]),n=p(!1),a=async()=>{if(n.value)return;n.value=!0;const o=await Fe();t.value=(o||[]).map(i=>({label:`${i.namespace}(${i.clusterName})`,value:JSON.stringify({name:i.namespace,cluster:i.clusterName})})),n.value=!1};G(()=>{a()});const r=o=>o.type==="group"?o.label:[o.label];return{type:"select",field:"namespace",name:e("project.node.namespace_cluster"),props:{loading:n,"render-label":r,clearable:!0},options:[{type:"group",label:e("project.node.namespace_cluster"),key:e("project.node.namespace_cluster"),children:t}]}}function At(e){const{t}=m();return[le(),{type:"input-number",field:"minCpuCores",span:12,props:{min:0},name:t("project.node.min_cpu"),slots:{suffix:()=>t("project.node.cores")}},{type:"input-number",field:"minMemorySpace",span:12,props:{min:0},name:t("project.node.min_memory"),slots:{suffix:()=>t("project.node.mb")}},{type:"input",field:"image",name:t("project.node.image"),span:18,props:{placeholder:t("project.node.image_tips")},validate:{trigger:["input","blur"],required:!0,message:t("project.node.image_tips")}},{type:"select",field:"imagePullPolicy",name:t("project.node.image_pull_policy"),span:6,options:Mt,validate:{trigger:["input","blur"],required:!0,message:t("project.node.image_pull_policy_tips")},value:"IfNotPresent"},{type:"input",field:"pullSecret",name:t("project.node.pull_secret"),props:{placeholder:t("project.node.pull_secret_tips")}},{type:"input",field:"command",name:t("project.node.command"),props:{placeholder:t("project.node.command_tips")}},{type:"input",field:"args",name:t("project.node.args"),props:{placeholder:t("project.node.args_tips")}},...$e({model:e,field:"customizedLabels",name:"custom_labels"}),...Be({model:e,field:"nodeSelectors",name:"node_selectors"}),...D({model:e,field:"localParams",isSimple:!1})]}const Mt=[{value:"IfNotPresent",label:"IfNotPresent"},{value:"Always",label:"Always"},{value:"Never",label:"Never"}];function It(e){const{t}=m();return[{type:"input",field:"condaEnvName",name:t("project.node.jupyter_conda_env_name"),props:{placeholder:t("project.node.jupyter_conda_env_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.jupyter_conda_env_name_tips"))}}},{type:"input",field:"inputNotePath",name:t("project.node.jupyter_input_note_path"),props:{placeholder:t("project.node.jupyter_input_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.jupyter_input_note_path_tips"))}}},{type:"input",field:"outputNotePath",name:t("project.node.jupyter_output_note_path"),props:{placeholder:t("project.node.jupyter_output_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.jupyter_output_note_path_tips"))}}},{type:"input",field:"parameters",name:t("project.node.jupyter_parameters"),props:{placeholder:t("project.node.jupyter_parameters_tips")}},{type:"input",field:"kernel",name:t("project.node.jupyter_kernel"),props:{placeholder:t("project.node.jupyter_kernel_tips")}},{type:"input",field:"engine",name:t("project.node.jupyter_engine"),props:{placeholder:t("project.node.jupyter_engine_tips")}},{type:"input",field:"executionTimeout",name:t("project.node.jupyter_execution_timeout"),props:{placeholder:t("project.node.jupyter_execution_timeout_tips")}},{type:"input",field:"startTimeout",name:t("project.node.jupyter_start_timeout"),props:{placeholder:t("project.node.jupyter_start_timeout_tips")}},{type:"input",field:"others",name:t("project.node.jupyter_others"),props:{placeholder:t("project.node.jupyter_others_tips")}},W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}const qt=[{label:"MLflow Models",value:"MLflow Models"},{label:"MLflow Projects",value:"MLflow Projects"}];function Ct(e){const{t}=m();return[{type:"input",field:"mlflowTrackingUri",name:t("project.node.mlflow_mlflowTrackingUri"),span:12,props:{placeholder:t("project.node.mlflow_mlflowTrackingUri_tips")},validate:{trigger:["input","blur"],required:!1,validator(n,a){if(!a)return new Error(t("project.node.mlflow_mlflowTrackingUri_error_tips"))}}},{type:"select",field:"mlflowTaskType",name:t("project.node.mlflow_taskType"),span:12,options:qt},...Dt(e),...Ut(e),W(),...D({model:e,field:"localParams",isSimple:!0})]}function Dt(e){const{t}=m(),n=p(0),a=p(0),r=p(0),o=p(0),i=p(0),s=p(0),l=()=>{e.isProjects=e.mlflowTaskType==="MLflow Projects"},u=()=>{n.value=e.isProjects?12:0,o.value=e.isProjects?12:0,s.value=e.isProjects?24:0,a.value=e.isProjects&&e.mlflowJobType!="CustomProject"?6:0,i.value=e.isProjects&&e.mlflowJobType!="CustomProject"?24:0};return O(()=>[e.mlflowTaskType,e.mlflowJobType],()=>{l(),u()}),O(()=>[e.registerModel],()=>{r.value=e.isProjects&&e.registerModel?6:0}),l(),u(),[{type:"select",field:"mlflowJobType",name:t("project.node.mlflow_jobType"),span:o,options:Ht},{type:"input",field:"experimentName",name:t("project.node.mlflow_experimentName"),span:n,props:{placeholder:t("project.node.mlflow_experimentName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"switch",field:"registerModel",name:t("project.node.mlflow_registerModel"),span:a},{type:"input",field:"modelName",name:t("project.node.mlflow_modelName"),span:r,props:{placeholder:t("project.node.mlflow_modelName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"input",field:"dataPath",name:t("project.node.mlflow_dataPath"),span:i,props:{placeholder:t("project.node.mlflow_dataPath_tips")}},{type:"input",field:"params",name:t("project.node.mlflow_params"),span:s,props:{placeholder:t("project.node.mlflow_params_tips")},validate:{trigger:["input","blur"],required:!1}},...Ot(e),...Ft(e),...xt(e)]}function Ot(e){const{t}=m(),n=p(0),a=p(0),r=()=>{e.isBasicAlgorithm=e.mlflowJobType==="BasicAlgorithm"&&e.mlflowTaskType==="MLflow Projects"},o=()=>{n.value=e.isBasicAlgorithm?24:0,a.value=e.isBasicAlgorithm?24:0};return O(()=>[e.mlflowTaskType,e.mlflowJobType],()=>{r(),o()}),r(),o(),[{type:"select",field:"algorithm",name:t("project.node.mlflow_algorithm"),span:n,options:Yt},{type:"input",field:"searchParams",name:t("project.node.mlflow_searchParams"),props:{placeholder:t("project.node.mlflow_searchParams_tips")},span:a,validate:{trigger:["input","blur"],required:!1}}]}function Ft(e){const{t}=m(),n=p(0),a=()=>{e.isAutoML=e.mlflowJobType==="AutoML"&&e.mlflowTaskType==="MLflow Projects"},r=()=>{n.value=e.isAutoML?12:0};return O(()=>[e.mlflowTaskType,e.mlflowJobType],()=>{a(),r()}),a(),r(),[{type:"select",field:"automlTool",name:t("project.node.mlflow_automlTool"),span:n,options:Jt}]}function xt(e){const{t}=m(),n=p(0),a=p(0),r=p(0),o=()=>{e.isCustomProject=e.mlflowJobType==="CustomProject"&&e.mlflowTaskType==="MLflow Projects"},i=()=>{n.value=e.isCustomProject?24:0,a.value=e.isCustomProject?12:0,r.value=e.isCustomProject?24:0};return O(()=>[e.mlflowTaskType,e.mlflowJobType],()=>{o(),i()}),o(),i(),[{type:"input",field:"mlflowProjectRepository",name:t("project.node.mlflowProjectRepository"),span:n,props:{placeholder:t("project.node.mlflowProjectRepository_tips")}},{type:"input",field:"mlflowProjectVersion",name:t("project.node.mlflowProjectVersion"),span:a,props:{placeholder:t("project.node.mlflowProjectVersion_tips")}}]}const Ht=[{label:"Custom Project",value:"CustomProject"},{label:"AutoML",value:"AutoML"},{label:"BasicAlgorithm",value:"BasicAlgorithm"}],Yt=[{label:"svm",value:"svm"},{label:"lr",value:"lr"},{label:"lightgbm",value:"lightgbm"},{label:"xgboost",value:"xgboost"}],Jt=[{label:"flaml",value:"flaml"},{label:"autosklearn",value:"autosklearn"}];function Ut(e){const{t}=m(),n=p(0),a=p(0),r=p(0),o=()=>{e.isModels=e.mlflowTaskType==="MLflow Models"},i=()=>{n.value=e.isModels?12:0,a.value=e.isModels?24:0,r.value=e.isModels?12:0};return O(()=>[e.mlflowTaskType],()=>{o(),i()}),o(),i(),[{type:"select",field:"deployType",name:t("project.node.mlflow_deployType"),span:n,options:Gt},{type:"input",field:"deployModelKey",name:t("project.node.mlflow_deployModelKey"),span:a},{type:"input",field:"deployPort",name:t("project.node.mlflow_deployPort"),span:r}]}const Gt=[{label:"MLFLOW",value:"MLFLOW"},{label:"DOCKER",value:"DOCKER"}];function Wt(e){const{t}=m(),n=[{label:t("project.node.openmldb_execute_mode_offline"),value:"offline"},{label:t("project.node.openmldb_execute_mode_online"),value:"online"}];return[{type:"input",field:"zk",name:t("project.node.openmldb_zk_address"),props:{placeholder:t("project.node.openmldb_zk_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(t("project.node.openmldb_zk_address_tips"))}}},{type:"input",field:"zkPath",name:t("project.node.openmldb_zk_path"),props:{placeholder:t("project.node.openmldb_zk_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(t("project.node.openmldb_zk_path_tips"))}}},{type:"radio",field:"executeMode",name:t("project.node.openmldb_execute_mode"),options:n},{type:"editor",field:"sql",name:t("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:t("project.node.sql_empty_tips")}},W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}const Qt=[{label:"Upload",value:"Upload"},{label:"Download",value:"Download"},{label:"Init DVC",value:"Init DVC"}];function Vt(e){const{t}=m(),n=p(0),a=p(0),r=p(0),o=p(0),i=p(0),s=()=>{e.isUpload=e.dvcTaskType==="Upload",e.isDownload=e.dvcTaskType==="Download",e.isInit=e.dvcTaskType==="Init DVC"},l=()=>{n.value=e.isUpload||e.isDownload?24:0,a.value=e.isUpload||e.isDownload?24:0,r.value=e.isUpload||e.isDownload?24:0,o.value=e.isUpload?24:0,i.value=e.isInit?24:0};return O(()=>[e.dvcTaskType],()=>{s(),l()}),s(),l(),[{type:"select",field:"dvcTaskType",name:t("project.node.dvc_task_type"),span:12,options:Qt},{type:"input",field:"dvcRepository",name:t("project.node.dvc_repository"),span:24,props:{placeholder:t("project.node.dvc_repository_tips")},validate:{trigger:["input","blur"],required:!0,message:t("project.node.dvc_empty_tips")}},{type:"input",field:"dvcDataLocation",name:t("project.node.dvc_data_location"),props:{placeholder:"dvcDataLocation"},span:a,validate:{trigger:["input","blur"],required:!0,validator(u,d){if((e.isUpload||e.isDownload)&&!d)return new Error(t("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcLoadSaveDataPath",name:t("project.node.dvc_load_save_data_path"),span:n,validate:{trigger:["input","blur"],required:!0,validator(u,d){if((e.isUpload||e.isDownload)&&!d)return new Error(t("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcVersion",name:t("project.node.dvc_version"),span:r,props:{placeholder:t("project.node.dvc_version_tips")},validate:{trigger:["input","blur"],required:!0,validator(u,d){if((e.isUpload||e.isDownload)&&!d)return new Error(t("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcMessage",name:t("project.node.dvc_message"),span:o,validate:{trigger:["input","blur"],required:!0,validator(u,d){if(e.isUpload&&!d)return new Error(t("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcStoreUrl",name:t("project.node.dvc_store_url"),span:i,validate:{trigger:["input","blur"],required:!0,validator(u,d){if(!e.isInit&&d)return new Error(t("project.node.dvc_empty_tips"))}}}]}function $t(e){const{t}=m();return[{type:"input",field:"address",name:t("project.node.dinky_address"),props:{placeholder:t("project.node.dinky_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.dinky_address_tips"))}}},{type:"input",field:"taskId",name:t("project.node.dinky_task_id"),props:{placeholder:t("project.node.dinky_task_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.dinky_task_id_tips"))}}},{type:"switch",field:"online",name:t("project.node.dinky_online")},...D({model:e,field:"localParams",isSimple:e.readonly})]}function Bt(e){return[{type:"editor",field:"sagemakerRequestJson",name:"SagemakerRequestJson",props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...D({model:e,field:"localParams",isSimple:e.readonly})]}function Kt(e){const{t}=m(),n=p([]),a=$(),r=y(()=>e.runType==="NORMAL_JAR"?24:0),o=async i=>{const s=a.getMainJar(i);if(s){n.value=s;return}const l=await se({type:"FILE",programType:i});X.removeUselessChildren(l),n.value=l||[],a.updateMainJar(i,l)};return G(()=>{o(e.programType)}),O(()=>e.programType,i=>{o(i)}),[{type:"input",field:"mainClass",name:t("project.node.main_class"),span:r,props:{type:"textarea",placeholder:t("project.node.main_class_tips")},validate:{trigger:["input","blur"],validator(i,s){return s&&!/^([A-Za-z_$][A-Za-z\d_$]*\.)*[A-Za-z_$][A-Za-z\d_$]*$/.test(s.trim())?new Error(t("project.node.main_class_invalid")):!0}}},{type:"tree-select",field:"mainJar",name:t("project.node.main_package"),span:r,props:{checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:t("project.node.main_package_tips"),keyField:"fullName",labelField:"name"},validate:{trigger:["input","blur"],required:!0,validator(i,s){return s?!0:new Error(t("project.node.main_package_tips"))}},options:n}]}function zt(e){const{t}=m();return[{type:"select",field:"runType",span:12,name:t("project.node.run_type"),options:Zt,value:e.runType},{type:"switch",field:"isModulePath",span:24,name:t("project.node.is_module_path"),value:e.isModulePath},{type:"input",field:"mainArgs",name:t("project.node.main_arguments"),props:{type:"textarea",placeholder:t("project.node.main_arguments_tips")}},{type:"input",field:"jvmArgs",name:t("project.node.jvm_args"),props:{type:"textarea",placeholder:t("project.node.jvm_args_tips")}},st(e),...Kt(e),W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}const Zt=[{label:"FAT_JAR",value:"FAT_JAR"},{label:"NORMAL_JAR",value:"NORMAL_JAR"}];function Xt(e){const{t}=m(),n=p(0),a=p(0),r=()=>{n.value=24,a.value=24};return G(()=>{r()}),[{type:"editor",field:"json",name:t("project.node.chunjun_json_template"),span:n,validate:{trigger:["input","trigger"],required:!0,message:t("project.node.sql_empty_tips")}},{type:"custom-parameters",field:"localParams",name:t("project.node.custom_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:t("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,i){if(!i)return new Error(t("project.node.prop_tips"));if(e.localParams.filter(l=>l.prop===i).length>1)return new Error(t("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:t("project.node.value_tips"),maxLength:256}}]},er(24),{type:"input",field:"others",name:t("project.node.option_parameters"),props:{type:"textarea",placeholder:t("project.node.option_parameters_tips")}}]}function er(e=24){const{t}=m();return{type:"radio",field:"deployMode",name:t("project.node.deploy_mode"),options:tr,span:e}}const tr=[{label:"local",value:"local"},{label:"standlone",value:"standlone"},{label:"yarn-session",value:"yarn-session"},{label:"yarn-per-job",value:"yarn-per-job"}];function rr(e){const{t}=m(),n=p(0),a=p(0),r=p(0),o=p(0),i=p(0),s=p(0),l=()=>{e.showCreateEnvironment=e.isCreateEnvironment&&e.otherParams,e.showCreateConda=!!(e.showCreateEnvironment&&e.pythonEnvTool==="conda"),e.showCreateEnv=!!(e.showCreateEnvironment&&e.pythonEnvTool==="virtualenv")},u=()=>{n.value=e.otherParams?12:0,a.value=e.otherParams?24:0,r.value=e.showCreateEnvironment?12:0,o.value=~e.showCreateEnvironment&e.otherParams?12:0,i.value=e.showCreateEnvironment?24:0,s.value=e.showCreateConda?24:0};return O(()=>[e.isCreateEnvironment,e.pythonEnvTool,e.otherParams],()=>{l(),u()}),[{type:"input",field:"script",name:t("project.node.pytorch_script"),span:24},{type:"input",field:"scriptParams",name:t("project.node.pytorch_script_params"),span:24},{type:"switch",field:"otherParams",name:t("project.node.pytorch_other_params"),span:24},{type:"input",field:"pythonPath",name:t("project.node.pytorch_python_path"),span:a},{type:"switch",field:"isCreateEnvironment",name:t("project.node.pytorch_is_create_environment"),span:n},{type:"input",field:"pythonLauncher",name:t("project.node.pytorch_python_launcher"),span:o,props:{placeholder:t("project.node.pytorch_python_launcher_tips")}},{type:"select",field:"pythonEnvTool",name:t("project.node.pytorch_python_env_tool"),span:r,options:ar},{type:"input",field:"requirements",name:t("project.node.pytorch_requirements"),span:i},{type:"input",field:"condaPythonVersion",name:t("project.node.pytorch_conda_python_version"),span:s,props:{placeholder:t("project.node.pytorch_conda_python_version_tips")}},W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}const ar=[{label:"conda",value:"conda"},{label:"virtualenv",value:"virtualenv"}];function nr(e){const{t}=m(),n=y(()=>e.hiveCliTaskExecutionType==="SCRIPT"?24:0),a=p(e.hiveCliTaskExecutionType!=="SCRIPT"),r=y(()=>e.hiveCliTaskExecutionType==="SCRIPT"?-1:1),o=[{label:t("project.node.sql_execution_type_from_script"),value:"SCRIPT"},{label:t("project.node.sql_execution_type_from_file"),value:"FILE"}];return O(()=>e.hiveCliTaskExecutionType,()=>{a.value=e.hiveCliTaskExecutionType!=="SCRIPT"}),[{type:"select",field:"hiveCliTaskExecutionType",span:12,name:t("project.node.sql_execution_type"),options:o,validate:{trigger:["input","blur"],required:!0}},{type:"editor",field:"hiveSqlScript",name:t("project.node.hive_sql_script"),props:{language:"sql"},validate:{trigger:["input","blur"],required:!0},span:n},{type:"input",field:"hiveCliOptions",name:t("project.node.hive_cli_options"),props:{placeholder:t("project.node.hive_cli_options_tips")}},W(24,a,r),...D({model:e,field:"localParams",isSimple:e.readonly})]}function or(e){const t=p(0),n=p(0),a=p(0),r=p(0),o=p(0),i=p(0),s=p(0),l=p(0),u=()=>{e.isCreateAndNotJson=!e.isRestartTask&&!e.isJsonFormat,e.isRestartAndNotJson=!!(e.isRestartTask&&!e.isJsonFormat)},d=()=>{t.value=e.isJsonFormat?24:0,n.value=e.isRestartAndNotJson?24:0,s.value=e.isCreateAndNotJson?24:0,r.value=e.isCreateAndNotJson?24:0,a.value=e.isCreateAndNotJson?24:0,o.value=e.isCreateAndNotJson?24:0,i.value=e.isCreateAndNotJson?24:0,l.value=e.isCreateAndNotJson?24:0};return O(()=>[e.isRestartTask,e.isJsonFormat],()=>{u(),d()}),u(),d(),[{type:"switch",field:"isRestartTask",name:"isRestartTask",span:12},{type:"switch",field:"isJsonFormat",name:"isJsonFormat",span:12},{type:"editor",field:"jsonData",name:"jsonData",span:t},{type:"select",field:"migrationType",name:"migrationType",span:s,options:ir},{type:"input",field:"replicationTaskIdentifier",name:"replicationTaskIdentifier",span:a},{type:"input",field:"replicationInstanceArn",name:"replicationInstanceArn",span:i},{type:"input",field:"sourceEndpointArn",name:"sourceEndpointArn",span:r},{type:"input",field:"targetEndpointArn",name:"targetEndpointArn",span:o},{type:"editor",field:"tableMappings",name:"tableMappings",span:l},{type:"input",field:"replicationTaskArn",name:"replicationTaskArn",span:n},W(),...D({model:e,field:"localParams",isSimple:e.readonly})]}const ir=[{label:"full-load",value:"full-load"},{label:"cdc",value:"cdc"},{label:"full-load-and-cdc",value:"full-load-and-cdc"}];function sr(e){const t=p(0),n=p(0),a=p(0),r=p(0),o=p(0),{t:i}=m(),s=()=>{t.value=e.jsonFormat?24:0,n.value=e.jsonFormat?0:24,a.value=e.jsonFormat?0:24,r.value=e.jsonFormat?0:24,o.value=e.jsonFormat?0:24};return O(()=>[e.jsonFormat],()=>{s()}),s(),[{type:"switch",field:"jsonFormat",name:"jsonFormat",span:12},{type:"editor",field:"json",name:"json",span:t,validate:{trigger:["input","blur"],validator(){if(e.json&&!X.isJson(e.json))return new Error(i("project.node.json_format_tips"))}}},{type:"input",field:"destinationLocationArn",name:"destinationLocationArn",span:n},{type:"input",field:"sourceLocationArn",name:"sourceLocationArn",span:a},{type:"input",field:"name",name:"name",span:r},{type:"input",field:"cloudWatchLogGroupArn",name:"cloudWatchLogGroupArn",span:o},...D({model:e,field:"localParams",isSimple:e.readonly})]}function pr(e){return[le(),{type:"editor",field:"yamlContent",name:"yamlContent",props:{language:"yaml"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...D({model:e,field:"localParams",isSimple:e.readonly})]}function lr(e){const{t}=m(),n=y(()=>e.useCustom?24:0),a=y(()=>e.useCustom?0:24);return y(()=>e.useCustom?0:24),[{type:"switch",field:"useCustom",name:t("project.node.custom_config")},{type:"custom-parameters",field:"paramScript",name:t("project.node.option_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:t("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(r,o){if(!o)return new Error(t("project.node.prop_tips"));if(e.localParams.filter(s=>s.prop===o).length>1)return new Error(t("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:t("project.node.value_tips"),maxLength:256}}]},{type:"editor",field:"rawScript",name:t("project.node.script"),span:n,validate:{trigger:["input","trigger"],required:e.useCustom,validator(r,o){if(e.useCustom&&!o)return new Error(t("project.node.script_tips"))}}},...D({model:e,field:"localParams",isSimple:!0})]}function ur(){return oe({url:"/cloud/azure/datafactory/factories",method:"get"})}function cr(){return oe({url:"/cloud/azure/datafactory/resourceGroups",method:"get"})}function dr(e){return oe({url:"/cloud/azure/datafactory/pipelines",method:"get",params:e})}function mr(e){const{t}=m(),n=p(!1),a=p(!1),r=p(!1),o=p([]),i=p([]),s=p([]),l=async()=>{if(n.value)return;n.value=!0;const v=await ur();o.value=v.map(j=>({label:j,value:j})),n.value=!1},u=async()=>{if(a.value)return;a.value=!0;const v=await cr();i.value=v.map(j=>({label:j,value:j})),a.value=!1},d=async(v,j)=>{if(r.value)return;r.value=!0;const Y=await dr({factoryName:v,resourceGroupName:j});s.value=Y.map(g=>({label:g,value:g})),r.value=!1},c=()=>{e.pipelineName="",e.factoryName&&e.resourceGroupName&&d(e.factoryName,e.resourceGroupName)};return O(()=>e.pipelineName,()=>{e.pipelineName&&s.value.length===0&&d(e.factoryName,e.resourceGroupName)}),G(()=>{l(),u()}),[{type:"select",field:"factoryName",span:24,name:t("project.node.factory_name"),options:o,props:{"on-update:value":c,loading:n},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.factory_tips")}},{type:"select",field:"resourceGroupName",span:24,name:t("project.node.resource_group_name"),options:i,props:{"on-update:value":c,loading:a},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.resource_group_tips")}},{type:"select",field:"pipelineName",span:24,name:t("project.node.pipeline_name"),options:s,props:{loading:r},validate:{trigger:["input","trigger"],required:!0,message:t("project.node.pipeline_tips")}},...D({model:e,field:"localParams",isSimple:!0})]}function fr(e){const{t}=m();return[{type:"editor",field:"rawScript",name:t("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:t("project.node.script_tips")}},...D({model:e,field:"localParams",isSimple:e.readonly})]}function ue(){const{t:e}=m();return{type:"input",field:"yarnQueue",name:e("project.node.yarn_queue"),span:12,props:{placeholder:e("project.node.yarn_queue_tips")}}}function yr(e){const{t}=m();return[{type:"input",field:"workspaceId",name:t("project.node.workspace_id"),props:{placeholder:t("project.node.workspace_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.workspace_id_tips"))}}},{type:"input",field:"resourceQueueId",name:t("project.node.resource_queue_id"),props:{placeholder:t("project.node.resource_queue_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.resource_queue_id_tips"))}}},{type:"input",field:"codeType",name:t("project.node.code_type"),props:{placeholder:t("project.node.code_type_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.code_type_tips"))}}},{type:"input",field:"jobName",name:t("project.node.job_name"),props:{placeholder:t("project.node.job_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.job_name_tips"))}}},{type:"input",field:"entryPoint",name:t("project.node.entry_point"),props:{placeholder:t("project.node.entry_point_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.entry_point_tips"))}}},{type:"input",field:"entryPointArguments",name:t("project.node.entry_point_arguments"),props:{placeholder:t("project.node.entry_point_arguments_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.entry_point_arguments_tips"))}}},{type:"input",field:"sparkSubmitParameters",name:t("project.node.spark_submit_parameters"),props:{placeholder:t("project.node.spark_submit_parameters_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,a){if(!a)return new Error(t("project.node.spark_submit_parameters_tips"))}}},{type:"input",field:"engineReleaseVersion",name:t("project.node.engine_release_version"),props:{placeholder:t("project.node.engine_release_version_tips")}},{type:"input",field:"templateId",name:t("project.node.template_id"),props:{placeholder:t("project.node.template_id_tips")}},{type:"switch",field:"isProduction",name:t("project.node.is_production"),span:12},...D({model:e,field:"localParams",isSimple:e.readonly})]}function _r({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"FLINK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Ee(r),N()],model:r}}function vr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"FLINK_STREAM",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),q(r),...Ee(r),N()],model:r}}function gr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"SHELL",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,rawScript:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...Se(r),N()],model:r}}function Tr({projectCode:e,from:t=0,readonly:n,data:a}){const o=ye().currentRoute.value.params.code,i=h({taskType:"SUB_WORKFLOW",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:i}),k(),L(),b(),S(e),E(i,!(a!=null&&a.id)),...P(i,e),...I(i),Je({model:i,projectCode:e,from:t,workflowName:a==null?void 0:a.workflowDefinitionName,code:t===1?0:Number(o)}),N()],model:i}}function jr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"PYTHON",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,rawScript:"",timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...Se(r),N()],model:r}}function hr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"SPARK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",rawScript:"",master:"",deployMode:"",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,yarnQueue:"",timeoutNotifyStrategy:["WARN"],sqlExecutionType:"SCRIPT"});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...pt(r),N()],model:r}}function br({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"MR",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...ut(r),N()],model:r}}function Sr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"HTTP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,httpMethod:"GET",httpBody:"",httpCheckCondition:"STATUS_CODE_DEFAULT",httpParams:[],url:"",condition:"",connectTimeout:6e4,socketTimeout:6e4,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...ft(r),N()],model:r}}function Er({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"SQL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"MYSQL",displayRows:10,sql:"",sqlType:"0",preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...Ue(r),...vt(r),N()],model:r}}function wr({projectCode:e,from:t=0,readonly:n,data:a}){var o,i,s,l;const r=h({name:"",taskType:"PROCEDURE",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:(o=a==null?void 0:a.taskParams)!=null&&o.type?(i=a==null?void 0:a.taskParams)==null?void 0:i.type:"MYSQL",datasource:(s=a==null?void 0:a.taskParams)==null?void 0:s.datasource,method:(l=a==null?void 0:a.taskParams)==null?void 0:l.method,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...We(r),N()],model:r}}function kr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"SQOOP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,isCustomTask:!1,hadoopCustomParams:[],sqoopAdvancedParams:[],mapColumnHive:[],mapColumnJava:[],modelType:"import",sourceType:"MYSQL",srcQueryType:"1",srcColumnType:"0",targetType:"HIVE",sourceMysqlType:"MYSQL",targetHdfsDeleteTargetDir:!0,targetHdfsCompressionCodec:"snappy",targetHdfsFileType:"--as-avrodatafile",targetMysqlType:"MYSQL",targetMysqlUpdateMode:"allowinsert",targetHiveCreateTable:!1,targetHiveDropDelimiter:!1,targetHiveOverWrite:!0,concurrency:1,splitBy:"",timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...gt(r),N()],model:r}}function Lr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"SEATUNNEL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,startupScript:"seatunnel.sh",runMode:"RUN",useCustom:!0,deployMode:"client",master:"YARN",masterUrl:"",resourceFiles:[],timeoutNotifyStrategy:["WARN"],rawScript:`env {
  execution.parallelism = 2
  job.mode = "BATCH"
  checkpoint.interval = 10000
}

source {
  FakeSource {
    parallelism = 2
    result_table_name = "fake"
    row.num = 16
    schema = {
      fields {
        name = "string"
        age = "int"
      }
    }
  }
}

sink {
  Console {
  }
}`});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...jt(r),N()],model:r}}function Nr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"SWITCH",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,rawScript:"",switchResult:{},dependTaskList:[],nextNode:void 0,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Et(r,e),N()],model:r}}function Pr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"CONDITIONS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",timeout:30,relation:"AND",dependTaskList:[],preTasks:[],successNode:"success",failedNode:"failed",timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...kt(r),N()],model:r}}function Rr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"DATAX",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,customConfig:!1,dsType:"MYSQL",dtType:"MYSQL",preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...wt(r),N()],model:r}}function Ar({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({taskType:"DEPENDENT",name:"",flag:"YES",description:"",timeoutShowFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,relation:"AND",dependTaskList:[],preTasks:[],timeoutNotifyStrategy:[],timeout:30,timeoutFlag:!1,failurePolicy:"DEPENDENT_FAILURE_FAILURE",checkInterval:10,...a});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...Lt(r),N()],model:r}}function Mr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"EMR",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"ADD_JOB_FLOW_STEPS",timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Nt(r),N()],model:r}}function Ir({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"ZEPPELIN",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"ZEPPELIN",displayRows:10,timeoutNotifyStrategy:["WARN"],restEndpoint:"",username:"",password:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...Rt(r),N()],model:r}}function qr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"K8S",flag:"YES",description:"",timeoutFlag:!1,localParams:[],customizedLabels:[],nodeSelectors:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"K8S",displayRows:10,timeoutNotifyStrategy:["WARN"],kubeConfig:"",namespace:""});return{json:[w(),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...At(r),N()],model:r}}function Cr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"JUPYTER",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...It(r),N()],model:r}}function Dr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",algorithm:"svm",mlflowTrackingUri:"http://127.0.0.1:5000",mlflowTaskType:"MLflow Projects",deployType:"MLFLOW",deployPort:"7000",mlflowJobType:"CustomProject",automlTool:"flaml",mlflowCustomProjectParameters:[],delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Ct(r),N()],model:r}}function Or({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"OPENMLDB",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,zk:"",zkPath:"",executeMode:"offline"});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Wt(r),N()],model:r}}function Fr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],dvcTaskType:"Upload"});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Vt(r),N()],model:r}}function xr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"JAVA",flag:"YES",description:"",localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,isModulePath:!1,rawScript:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,mainJar:void 0,runType:"FAT_JAR",mainArgs:"",jvmArgs:"",mainClass:"",programType:"JAVA"});let o=[];return t===1&&(o=[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName})]),{json:[w(t),...o,k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...zt(r),N()],model:r}}function Hr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"DINKY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...$t(r),N()],model:r}}function Yr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"SAGEMAKER",displayRows:10,timeoutNotifyStrategy:["WARN"],username:"",password:"",awsRegion:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...Bt(r),N()],model:r}}function Jr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"CHUNJUN",flag:"YES",description:"",deployMode:"local",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,customConfig:!0,preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...Xt(r),N()],model:r}}function Ur({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"PYTORCH",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],pythonEnvTool:"conda",pythonLauncher:"${PYTHON_LAUNCHER}",condaPythonVersion:"3.7",requirements:"requirements.txt",pythonPath:"."});let o=[];return t===1&&(o=[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName})]),{json:[w(t),...o,k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...rr(r),N()],model:r}}function Gr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"HIVECLI",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,hiveCliTaskExecutionType:"SCRIPT"});let o=[];return t===1&&(o=[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName})]),{json:[w(t),...o,k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...nr(r),N()],model:r}}function Wr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"DMS",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],isRestartTask:!1});let o=[];return t===1&&(o=[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName})]),{json:[w(t),...o,k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...or(r),N()],model:r}}function Qr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"DATASYNC",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});let o=[];return t===1&&(o=[z(r,n),Z({model:r,projectCode:e,isCreate:!(a!=null&&a.id),from:t,workflowName:a==null?void 0:a.workflowDefinitionName})]),{json:[w(t),...o,k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...sr(r),N()],model:r}}function Vr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"KUBEFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...pr(r),N()],model:r}}function $r({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"LINKIS",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],useCustom:!1,paramScript:[],rawScript:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...lr(r),N()],model:r}}function Br({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"DATA_FACTORY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],factoryName:"",resourceGroupName:"",pipelineName:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...mr(r),N()],model:r}}function Kr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"REMOTESHELL",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,type:"SSH",rawScript:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),...V(),q(r),...I(r),...B(r,{supportedDatasourceType:["SSH"]}),...fr(r),N()],model:r}}function zr({projectCode:e,from:t=0,readonly:n,data:a}){const r=h({name:"",taskType:"ALIYUN_SERVERLESS_SPARK",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"ALIYUN_SERVERLESS_SPARK",displayRows:10,timeoutNotifyStrategy:["WARN"],restEndpoint:"",username:"",password:""});return{json:[w(t),...F({projectCode:e,from:t,readonly:n,data:a,model:r}),k(),L(),b(),S(e),E(r,!(a!=null&&a.id)),...P(r,e),...M(),q(r),...I(r),...B(r),...yr(r),N()],model:r}}const Zr={SHELL:gr,SUB_WORKFLOW:Tr,PYTHON:jr,SPARK:hr,MR:br,FLINK:_r,HTTP:Sr,SQL:Er,PROCEDURE:wr,SQOOP:kr,SEATUNNEL:Lr,SWITCH:Nr,CONDITIONS:Pr,DATAX:Rr,DEPENDENT:Ar,EMR:Mr,ZEPPELIN:Ir,K8S:qr,JUPYTER:Cr,MLFLOW:Dr,OPENMLDB:Or,DVC:Fr,DINKY:Hr,SAGEMAKER:Yr,CHUNJUN:Jr,FLINK_STREAM:vr,JAVA:xr,PYTORCH:Ur,HIVECLI:Gr,DMS:Wr,DATASYNC:Qr,KUBEFLOW:Vr,LINKIS:$r,DATA_FACTORY:Br,REMOTESHELL:Kr,ALIYUN_SERVERLESS_SPARK:zr};function Xr({data:e,projectCode:t,from:n,readonly:a,definition:r}){const o=$();o.updateDefinition(ae(r),e==null?void 0:e.code);const i=p([]),s=p([]),l=p({}),u={projectCode:t,from:n,readonly:a,data:e,jsonRef:i,updateElements:()=>{v()}},{model:d,json:c}=Zr[e.taskType||"SHELL"](u);i.value=c,d.preTasks=o.getPreTasks,d.name=o.getName,d.taskExecuteType=_e[e.taskType||"SHELL"].taskExecuteType||"BATCH";const v=()=>{const{rules:j,elements:Y}=we(i.value,d);s.value=Y,l.value=j};return v(),{elementsRef:s,rulesRef:l,model:d}}const vn=Le({name:"NodeDetail",emits:["taskTypeChange"],setup(e,{expose:t,emit:n}){const a=$(),r=p(),o=Pe("data")||{projectCode:0,data:{taskType:"SHELL"},readonly:!1,from:0},{data:i,projectCode:s,from:l,readonly:u,definition:d}=ae(o),{elementsRef:c,rulesRef:v,model:j}=Xr({data:i,projectCode:s,from:l,readonly:u,definition:d});return O(()=>j.taskType,async Y=>{a.updateName(j.name||""),n("taskTypeChange",Y)}),t(r),()=>Ne(ke,{ref:r,meta:{model:j,rules:v.value,elements:c.value,disabled:ae(u)},layout:{xGap:10}},null)}});export{vn as default};
