import{M as u}from"./index.08dd828f.js";import{N as f,s as k}from"./index.module.d033057f.js";import{u as h,E as G,r as p,d as w,G as M,H as g,I as W,c as d}from"./index.02a17cf1.js";import{q as b}from"./index.e5f69831.js";import{q as C,a as v}from"./index.7552dd4e.js";import"./index.fe057c74.js";import"./Button.1b3ea9f7.js";import"./is-browser.e7afaa57.js";import"./use-form-item.96cfc8ba.js";import"./resolve-slot.92499a18.js";import"./Modal.920fa101.js";import"./keysOf.843c523b.js";import"./Card.f8db533a.js";import"./index.5f9a33e7.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./utils.eff12f29.js";import"./index.21198e00.js";import"./Space.8a344b95.js";import"./get-slot.eeb09d52.js";import"./use-locale.47aab0f5.js";import"./Empty.249462a1.js";import"./cssr.f561ccf0.js";import"./next-frame-once.50ecadf2.js";import"./Checkbox.c8f5c3b1.js";import"./use-merged-state.2bdc3563.js";import"./Input.59461546.js";import"./Suffix.62982c61.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";function y(o,s){const{t:a}=h(),r=G({model:{workerGroupOptions:[],assignedWorkerGroups:p([])}}),i=()=>{r.model.workerGroupOptions=[],b().then(e=>{for(const t of e)r.model.workerGroupOptions.push({label:t,value:t})})},n=e=>{r.model.assignedWorkerGroups=p([]),C(e).then(t=>{t.data.forEach(c=>{r.model.assignedWorkerGroups.push(c.workerGroup)})})};i();const l=()=>{m(),s.emit("confirmModal",o.showModalRef)},m=async()=>{if(o.row.code){const e={workerGroups:r.model.assignedWorkerGroups.length>0?r.model.assignedWorkerGroups.join(","):""};v(e,o.row.code)}};return{variables:r,t:a,handleValidate:l,initAssignedWorkerGroups:n}}const R={showModalRef:{type:Boolean,default:!1},row:{type:Object,default:{}}},lo=w({name:"WorkerGroupModal",props:R,emits:["cancelModal","confirmModal"],setup(o,s){var t;const{variables:a,t:r,handleValidate:i,initAssignedWorkerGroups:n}=y(o,s),l=()=>{s.emit("cancelModal",o.showModalRef)},m=(t=M())==null?void 0:t.appContext.config.globalProperties.trim,e=()=>{i()};return g(()=>o.showModalRef,()=>{o.showModalRef&&n(o.row.code)}),{...W(a),t:r,cancelModal:l,confirmModal:e,trim:m}},render(){const{t:o}=this;return d(u,{title:o("project.list.assign_worker_group"),class:"assign-worker-group-modal",show:this.showModalRef,onConfirm:this.confirmModal,onCancel:this.cancelModal,confirmClassName:"btn-submit",cancelClassName:"btn-cancel"},{default:()=>[d(f,{virtualScroll:!0,class:k.transfer,options:this.model.workerGroupOptions,value:this.model.assignedWorkerGroups,"onUpdate:value":s=>this.model.assignedWorkerGroups=s},null)]})}});export{lo as default};
