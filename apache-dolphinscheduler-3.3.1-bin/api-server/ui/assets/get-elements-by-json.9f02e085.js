import{d as Z,h as c,r as K,a6 as pt,a7 as kt,bS as Xn,aM as xt,af as wt,W as Jn,U as Be,am as St,P as Rt,a4 as Ct,ab as kn,a1 as Y,g as A,o as Nt,bh as Kt,al as Ft,l as I,k as me,n as z,bT as Un,p as Re,$ as Ge,ak as xn,b as Qn,f as Tt,e as an,a2 as We,Y as T,H as on,a3 as wn,R as Zn,t as et,ag as Pt,T as Dt,J as It,bb as At,b9 as Ot,ba as Nn,E as Et,I as Lt,c as ln,an as Mn,bs as ye,i as _t,M as Kn}from"./index.02a17cf1.js";import{N as Bt}from"./Form.de76c832.js";import{a as dn,g as Ut,b as Mt,N as sn}from"./Grid.1918be0a.js";import{N as Vt}from"./Spin.4db05d4b.js";import{l as _}from"./lodash.3a74b132.js";import{N as nt}from"./Input.59461546.js";import{N as Vn}from"./Radio.4578e023.js";import{N as Ye}from"./Space.8a344b95.js";import{N as $t}from"./RadioGroup.7b709552.js";import{M as zt}from"./index.7b2dcdb8.js";import{u as cn}from"./use-form-item.96cfc8ba.js";import{D as Fn}from"./DeleteOutlined.d3b97bbb.js";import{N as Ue}from"./Button.1b3ea9f7.js";import{N as jt,b as qt,c as Ht}from"./FormItem.aeb1ee46.js";import{k as $n,c as Gt}from"./index.8a81335d.js";import{N as Wt}from"./Switch.a01ace9e.js";import{N as Yt}from"./InputNumber.cad532d0.js";import{h as Sn,c as tt,g as zn,i as Xt,u as Jt,f as Qt,F as Zt,N as eo}from"./Select.51d2f90f.js";import{a as Rn,N as no}from"./Checkbox.c8f5c3b1.js";import{i as to}from"./is-browser.e7afaa57.js";import{p as oo,a as lo}from"./index.5f9a33e7.js";import{u as De}from"./use-merged-state.2bdc3563.js";import{c as L,b as ot,r as ro}from"./resolve-slot.92499a18.js";import{V as ao,N as lt}from"./Empty.249462a1.js";import{X as jn,g as io}from"./Scrollbar.988383de.js";import{f as so}from"./fade-in-scale-up.cssr.d8408fe5.js";import{u as co}from"./use-locale.47aab0f5.js";import{m as uo}from"./index.21198e00.js";import{u as Cn,V as fo,b as ho,c as go}from"./Popover.92dc7b00.js";function rt(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const vo=Z({name:"Switcher",render(){return c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c("path",{d:"M12 8l10 8l-10 8z"}))}}),mo=Object.assign(Object.assign({},Ut),qt),un=Z({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:mo,setup(){const e=K(null);return{formItemInstRef:e,validate:(...o)=>{const{value:r}=e;if(r)return r.validate(...o)},restoreValidation:()=>{const{value:o}=e;if(o)return o.restoreValidation()}}},render(){return c(dn,$n(this.$.vnode.props||{},Mt),{default:()=>{const e=$n(this.$props,Ht);return c(jt,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),yo=e=>{const{popoverColor:n,boxShadow2:l,borderRadius:o,heightMedium:r,dividerColor:d,textColor2:h}=e;return{menuPadding:"4px",menuColor:n,menuBoxShadow:l,menuBorderRadius:o,menuHeight:`calc(${r} * 7.6)`,actionDividerColor:d,actionTextColor:h,actionPadding:"8px 12px"}},bo=pt({name:"TreeSelect",common:kt,peers:{Tree:Xn,Empty:xt,InternalSelection:wt},self:yo}),po=bo,Tn=Jn("n-tree-select"),Xe=Jn("n-tree"),ko=Z({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:n}=Be(Xe,null);return()=>{const{clsPrefix:l}=e;return c("span",{"data-switcher":!0,class:[`${l}-tree-node-switcher`,{[`${l}-tree-node-switcher--expanded`]:e.expanded,[`${l}-tree-node-switcher--hide`]:e.hide}],onClick:e.onClick},c("div",{class:`${l}-tree-node-switcher__icon`},c(St,null,{default:()=>{if(e.loading)return c(Rt,{clsPrefix:l,key:"loading",radius:85,strokeWidth:20});const{value:o}=n;return o?o():c(Ct,{clsPrefix:l,key:"switcher"},{default:()=>c(vo,null)})}})))}}}),xo=Z({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const n=Be(Xe);function l(r){const{onCheck:d}=e;if(d)return d(r)}function o(r){e.indeterminate?l(!1):l(r)}return{handleUpdateValue:o,mergedTheme:n.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:n,checked:l,indeterminate:o,disabled:r,focusable:d,handleUpdateValue:h}=this;return c("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},c(Rn,{focusable:d,disabled:r,theme:n.peers.Checkbox,themeOverrides:n.peerOverrides.Checkbox,checked:l,indeterminate:o,onUpdateChecked:h}))}}),wo=Z({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:n,renderPrefixRef:l,renderSuffixRef:o,labelFieldRef:r}=Be(Xe),d=K(null);function h(s){const{onClick:g}=e;g&&g(s)}function u(s){h(s)}return{selfRef:d,renderLabel:n,renderPrefix:l,renderSuffix:o,labelField:r,handleClick:u}},render(){const{clsPrefix:e,labelField:n,nodeProps:l,checked:o=!1,selected:r=!1,renderLabel:d,renderPrefix:h,renderSuffix:u,handleClick:s,onDragstart:g,tmNode:{rawNode:y,rawNode:{prefix:S,suffix:k,[n]:p}}}=this;return c("span",Object.assign({},l,{ref:"selfRef",class:[`${e}-tree-node-content`,l==null?void 0:l.class],onClick:s,draggable:g===void 0?void 0:!0,onDragstart:g}),h||S?c("div",{class:`${e}-tree-node-content__prefix`},h?h({option:y,selected:r,checked:o}):kn(S)):null,c("div",{class:`${e}-tree-node-content__text`},d?d({option:y,selected:r,checked:o}):kn(p)),u||k?c("div",{class:`${e}-tree-node-content__suffix`},u?u({option:y,selected:r,checked:o}):kn(k)):null)}});function qn({position:e,offsetLevel:n,indent:l,el:o}){const r={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")r.left=0,r.top=0,r.bottom=0,r.borderRadius="inherit",r.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const d=e==="before"?"top":"bottom";r[d]=0,r.left=`${o.offsetLeft+6-n*l}px`,r.height="2px",r.backgroundColor="var(--n-drop-mark-color)",r.transformOrigin=d,r.borderRadius="1px",r.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return c("div",{style:r})}function So({dropPosition:e,node:n}){return n.isLeaf===!1||n.children?!0:e!=="inside"}function Se(e,n){return!!e.rawNode[n]}function at(e,n,l,o){e==null||e.forEach(r=>{l(r),at(r[n],n,l,o),o(r)})}function Ro(e,n,l,o,r){const d=new Set,h=new Set,u=[];return at(e,o,s=>{if(u.push(s),r(n,s)){h.add(s[l]);for(let g=u.length-2;g>=0;--g)if(!d.has(u[g][l]))d.add(u[g][l]);else return}},()=>{u.pop()}),{expandedKeys:Array.from(d),highlightKeySet:h}}if(to&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Co(e,n,l,o,r){const d=new Set,h=new Set,u=new Set,s=[],g=[],y=[];function S(p){p.forEach(x=>{if(y.push(x),n(l,x)){d.add(x[o]),u.add(x[o]);for(let O=y.length-2;O>=0;--O){const M=y[O][o];if(!h.has(M))h.add(M),d.has(M)&&d.delete(M);else break}}const N=x[r];N&&S(N),y.pop()})}S(e);function k(p,x){p.forEach(N=>{const O=N[o],M=d.has(O),P=h.has(O);if(!M&&!P)return;const j=N[r];if(j)if(M)x.push(N);else{s.push(O);const W=Object.assign(Object.assign({},N),{[r]:[]});x.push(W),k(j,W[r])}else x.push(N)})}return k(e,g),{filteredTree:g,highlightKeySet:u,expandedKeys:s}}const No=Z({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const n=Be(Xe),{droppingNodeParentRef:l,droppingMouseNodeRef:o,draggingNodeRef:r,droppingPositionRef:d,droppingOffsetLevelRef:h,nodePropsRef:u,indentRef:s,blockLineRef:g,checkboxPlacementRef:y,checkOnClickRef:S,disabledFieldRef:k}=n,p=Y(()=>!!e.tmNode.rawNode.checkboxDisabled),x=Y(()=>Se(e.tmNode,k.value)),N=Y(()=>n.disabledRef.value||x.value),O=A(()=>{const{value:m}=u;if(!!m)return m({option:e.tmNode.rawNode})}),M=K(null),P={value:null};Nt(()=>{P.value=M.value.$el});function j(){const{tmNode:m}=e;if(!m.isLeaf&&!m.shallowLoaded){if(!n.loadingKeysRef.value.has(m.key))n.loadingKeysRef.value.add(m.key);else return;const{onLoadRef:{value:F}}=n;F&&F(m.rawNode).then(()=>{n.handleSwitcherClick(m)}).finally(()=>{n.loadingKeysRef.value.delete(m.key)})}else n.handleSwitcherClick(m)}const W=Y(()=>!x.value&&n.selectableRef.value&&(n.internalTreeSelect?n.mergedCheckStrategyRef.value!=="child"||n.multipleRef.value&&n.cascadeRef.value||e.tmNode.isLeaf:!0)),q=Y(()=>n.checkableRef.value&&(n.cascadeRef.value||n.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),oe=Y(()=>n.displayedCheckedKeysRef.value.includes(e.tmNode.key)),ge=Y(()=>{const{value:m}=q;if(!m)return!1;const{value:F}=S;return typeof F=="boolean"?F:F(e.tmNode.rawNode)});function ae(m){const{value:F}=n.expandOnClickRef,{value:U}=W,{value:pe}=ge;if(!U&&!F&&!pe||Sn(m,"checkbox")||Sn(m,"switcher"))return;const{tmNode:le}=e;U&&n.handleSelect(le),F&&!le.isLeaf&&j(),pe&&se(!oe.value)}function ie(m){var F,U;g.value||(N.value||ae(m),(U=(F=O.value)===null||F===void 0?void 0:F.onClick)===null||U===void 0||U.call(F,m))}function be(m){var F,U;!g.value||(N.value||ae(m),(U=(F=O.value)===null||F===void 0?void 0:F.onClick)===null||U===void 0||U.call(F,m))}function se(m){n.handleCheck(e.tmNode,m)}function Ie(m){n.handleDragStart({event:m,node:e.tmNode})}function X(m){m.currentTarget===m.target&&n.handleDragEnter({event:m,node:e.tmNode})}function ce(m){m.preventDefault(),n.handleDragOver({event:m,node:e.tmNode})}function J(m){n.handleDragEnd({event:m,node:e.tmNode})}function Me(m){m.currentTarget===m.target&&n.handleDragLeave({event:m,node:e.tmNode})}function ee(m){m.preventDefault(),d.value!==null&&n.handleDrop({event:m,node:e.tmNode,dropPosition:d.value})}return{showDropMark:Y(()=>{const{value:m}=r;if(!m)return;const{value:F}=d;if(!F)return;const{value:U}=o;if(!U)return;const{tmNode:pe}=e;return pe.key===U.key}),showDropMarkAsParent:Y(()=>{const{value:m}=l;if(!m)return!1;const{tmNode:F}=e,{value:U}=d;return U==="before"||U==="after"?m.key===F.key:!1}),pending:Y(()=>n.pendingNodeKeyRef.value===e.tmNode.key),loading:Y(()=>n.loadingKeysRef.value.has(e.tmNode.key)),highlight:Y(()=>{var m;return(m=n.highlightKeySetRef.value)===null||m===void 0?void 0:m.has(e.tmNode.key)}),checked:oe,indeterminate:Y(()=>n.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Y(()=>n.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Y(()=>n.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:N,checkable:q,mergedCheckOnClick:ge,checkboxDisabled:p,selectable:W,expandOnClick:n.expandOnClickRef,internalScrollable:n.internalScrollableRef,draggable:n.draggableRef,blockLine:g,nodeProps:O,checkboxFocusable:n.internalCheckboxFocusableRef,droppingPosition:d,droppingOffsetLevel:h,indent:s,checkboxPlacement:y,contentInstRef:M,contentElRef:P,handleCheck:se,handleDrop:ee,handleDragStart:Ie,handleDragEnter:X,handleDragOver:ce,handleDragEnd:J,handleDragLeave:Me,handleLineClick:be,handleContentClick:ie,handleSwitcherClick:j}},render(){const{tmNode:e,clsPrefix:n,checkable:l,expandOnClick:o,selectable:r,selected:d,checked:h,highlight:u,draggable:s,blockLine:g,indent:y,disabled:S,pending:k,internalScrollable:p,nodeProps:x,checkboxPlacement:N}=this,O=s&&!S?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,M=p?rt(e.key):void 0,P=N==="right",j=l?c(xo,{right:P,focusable:this.checkboxFocusable,disabled:S||this.checkboxDisabled,clsPrefix:n,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return c("div",Object.assign({class:`${n}-tree-node-wrapper`},O),c("div",Object.assign({},g?x:void 0,{class:[`${n}-tree-node`,{[`${n}-tree-node--selected`]:d,[`${n}-tree-node--checkable`]:l,[`${n}-tree-node--highlight`]:u,[`${n}-tree-node--pending`]:k,[`${n}-tree-node--disabled`]:S,[`${n}-tree-node--selectable`]:r,[`${n}-tree-node--clickable`]:r||o||this.mergedCheckOnClick},x==null?void 0:x.class],"data-key":M,draggable:s&&g,onClick:this.handleLineClick,onDragstart:s&&g&&!S?this.handleDragStart:void 0}),Kt(e.level,c("div",{class:`${n}-tree-node-indent`},c("div",{style:{width:`${y}px`}}))),c(ko,{clsPrefix:n,expanded:this.expanded,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),P?null:j,c(wo,{ref:"contentInstRef",clsPrefix:n,checked:h,selected:d,onClick:this.handleContentClick,nodeProps:g?void 0:x,onDragstart:s&&!g&&!S?this.handleDragStart:void 0,tmNode:e}),s?this.showDropMark?qn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:y}):this.showDropMarkAsParent?qn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:y}):null:null,P?j:null))}}),it=No;function Ko({props:e,fNodesRef:n,mergedExpandedKeysRef:l,mergedSelectedKeysRef:o,handleSelect:r,handleSwitcherClick:d}){const{value:h}=o,u=Be(Tn,null),s=u?u.pendingNodeKeyRef:K(h.length?h[h.length-1]:null);function g(y){if(!e.keyboard)return;const{value:S}=s;if(S===null){if((y.key==="ArrowDown"||y.key==="ArrowUp")&&y.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(y.key)&&S===null){const{value:k}=n;let p=0;for(;p<k.length;){if(!k[p].disabled){s.value=k[p].key;break}p+=1}}}else{const{value:k}=n;let p=k.findIndex(x=>x.key===S);if(!~p)return;if(y.key==="Enter")r(k[p]);else if(y.key==="ArrowDown")for(y.preventDefault(),p+=1;p<k.length;){if(!k[p].disabled){s.value=k[p].key;break}p+=1}else if(y.key==="ArrowUp")for(y.preventDefault(),p-=1;p>=0;){if(!k[p].disabled){s.value=k[p].key;break}p-=1}else if(y.key==="ArrowLeft"){const x=k[p];if(x.isLeaf||!l.value.includes(S)){const N=x.getParent();N&&(s.value=N.key)}else d(x)}else if(y.key==="ArrowRight"){const x=k[p];if(x.isLeaf)return;if(!l.value.includes(S))d(x);else for(p+=1;p<k.length;){if(!k[p].disabled){s.value=k[p].key;break}p+=1}}}}return{pendingNodeKeyRef:s,handleKeydown:g}}const Fo=Z({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return c(Ft,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>c("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:oo(this.height)}},this.nodes.map(n=>c(it,{clsPrefix:e,tmNode:n})))})}}),To=I("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[me("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),me(">",[I("tree-node",[me("&:first-child",{marginTop:0})])]),I("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),I("tree-motion-wrapper",[z("expand",[Un({duration:"0.2s"})]),z("collapse",[Un({duration:"0.2s",reverse:!0})])]),I("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),I("tree-node",`
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[z("highlight",[I("tree-node-content",[Re("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),z("disabled",[I("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ge("disabled",[z("clickable",[I("tree-node-content",`
 cursor: pointer;
 `)])])]),z("block-node",[I("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ge("block-line",[I("tree-node",[Ge("disabled",[I("tree-node-content",[me("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),z("selectable",[I("tree-node-content",[me("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),z("pending",[I("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),z("selected",[I("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),z("block-line",[I("tree-node",[Ge("disabled",[me("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),z("pending",`
 background-color: var(--n-node-color-hover);
 `),z("selectable",[Ge("selected",[me("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),z("selected",{backgroundColor:"var(--n-node-color-active)"})]),z("disabled",`
 cursor: not-allowed;
 `)])]),I("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Re("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[I("icon",[xn()]),I("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[xn()]),I("base-icon",[xn()])]),z("hide",{visibility:"hidden"}),z("expanded",{transform:"rotate(90deg)"})]),I("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[z("right","margin-left: 4px;")]),z("checkable",[I("tree-node-content",`
 padding: 0 6px;
 `)]),I("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[me("&:last-child",{marginBottom:0}),Re("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Re("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Re("suffix",`
 display: inline-flex;
 `)]),Re("empty","margin: auto;")]);var Po=globalThis&&globalThis.__awaiter||function(e,n,l,o){function r(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function u(y){try{g(o.next(y))}catch(S){h(S)}}function s(y){try{g(o.throw(y))}catch(S){h(S)}}function g(y){y.done?d(y.value):r(y.value).then(u,s)}g((o=o.apply(e,n||[])).next())})};const rn=30;function dt(e,n,l){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren(o){return o[n]},getDisabled(o){return!!(o[l]||o.checkboxDisabled)}}}const st={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},Do=Object.assign(Object.assign(Object.assign(Object.assign({},an.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:So},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),st),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Io=Z({name:"Tree",props:Do,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:l,mergedRtlRef:o}=Qn(e),r=Tt("Tree",o,n),d=an("Tree","-tree",To,Xn,e,n),h=K(null),u=K(null),s=K(null);function g(){var t;return(t=s.value)===null||t===void 0?void 0:t.listElRef}function y(){var t;return(t=s.value)===null||t===void 0?void 0:t.itemsElRef}const S=A(()=>{const{pattern:t}=e;return t?!t.length||!Ke.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Co(e.data,Ke.value,t,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),k=A(()=>tt(e.showIrrelevantNodes?e.data:S.value.filteredTree,dt(e.keyField,e.childrenField,e.disabledField))),p=Be(Tn,null),x=e.internalTreeSelect?p.dataTreeMate:k,{watchProps:N}=e,O=K([]);N!=null&&N.includes("defaultCheckedKeys")?We(()=>{O.value=e.defaultCheckedKeys}):O.value=e.defaultCheckedKeys;const M=T(e,"checkedKeys"),P=De(M,O),j=A(()=>x.value.getCheckedKeys(P.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),W=A(()=>e.leafOnly?"child":e.checkStrategy),q=A(()=>j.value.checkedKeys),oe=A(()=>{const{indeterminateKeys:t}=e;return t!==void 0?t:j.value.indeterminateKeys}),ge=K([]);N!=null&&N.includes("defaultSelectedKeys")?We(()=>{ge.value=e.defaultSelectedKeys}):ge.value=e.defaultSelectedKeys;const ae=T(e,"selectedKeys"),ie=De(ae,ge),be=K([]),se=t=>{be.value=e.defaultExpandAll?x.value.getNonLeafKeys():t===void 0?e.defaultExpandedKeys:t};N!=null&&N.includes("defaultExpandedKeys")?We(()=>se(void 0)):We(()=>se(e.defaultExpandedKeys));const Ie=T(e,"expandedKeys"),X=De(Ie,be),ce=A(()=>k.value.getFlattenedNodes(X.value)),{pendingNodeKeyRef:J,handleKeydown:Me}=Ko({props:e,mergedSelectedKeysRef:ie,fNodesRef:ce,mergedExpandedKeysRef:X,handleSelect:de,handleSwitcherClick:E});let ee=null,m=null;const F=K(new Set),U=A(()=>e.internalHighlightKeySet||S.value.highlightKeySet),pe=De(U,F),le=K(new Set),Je=A(()=>X.value.filter(t=>!le.value.has(t)));let Ve=0;const ne=K(null),Ae=K(null),Oe=K(null),Ce=K(null),Ne=K(0),ue=A(()=>{const{value:t}=Ae;return t?t.parent:null}),Ke=A(()=>{const{filter:t}=e;if(t)return t;const{labelField:a}=e;return(v,b)=>{if(!v.length)return!0;const w=b[a];return typeof w=="string"?w.toLowerCase().includes(v.toLowerCase()):!1}});on(T(e,"data"),()=>{le.value.clear(),J.value=null,re()},{deep:!1});let $e=!1;const ze=()=>{$e=!0,wn(()=>{$e=!1})};let Fe;on(T(e,"pattern"),(t,a)=>{if(e.showIrrelevantNodes)if(Fe=void 0,t){const{expandedKeys:v,highlightKeySet:b}=Ro(e.data,e.pattern,e.keyField,e.childrenField,Ke.value);F.value=b,ze(),xe(v,te(v))}else F.value=new Set;else if(!t.length)Fe!==void 0&&(ze(),xe(Fe,te(Fe)));else{a.length||(Fe=X.value);const{expandedKeys:v}=S.value;v!==void 0&&(ze(),xe(v,te(v)))}});function Te(t){return Po(this,void 0,void 0,function*(){const{onLoad:a}=e;if(!a)return yield Promise.resolve();const{value:v}=le;return yield new Promise(b=>{v.has(t.key)||(v.add(t.key),a(t.rawNode).then(()=>{v.delete(t.key),b()}).catch(w=>{console.error(w),R()}))})})}We(()=>{var t;const{value:a}=k;if(!a)return;const{getNode:v}=a;(t=X.value)===null||t===void 0||t.forEach(b=>{const w=v(b);w&&!w.shallowLoaded&&Te(w)})});const ke=K(!1),fe=K([]);on(Je,(t,a)=>{if(!e.animated||$e){wn(Ee);return}const v=new Set(a);let b=null,w=null;for(const B of t)if(!v.has(B)){if(b!==null)return;b=B}const H=new Set(t);for(const B of a)if(!H.has(B)){if(w!==null)return;w=B}if(b===null&&w===null)return;const{virtualScroll:$}=e,ve=($?s.value.listElRef:h.value).offsetHeight,Pe=Math.ceil(ve/rn)+1;let he;if(b!==null&&(he=a),w!==null&&(he===void 0?he=t:he=he.filter(B=>B!==w)),ke.value=!0,fe.value=k.value.getFlattenedNodes(he),b!==null){const B=fe.value.findIndex(G=>G.key===b);if(~B){const G=fe.value[B].children;if(G){const we=zn(G,t);fe.value.splice(B+1,0,{__motion:!0,mode:"expand",height:$?we.length*rn:void 0,nodes:$?we.slice(0,Pe):we})}}}if(w!==null){const B=fe.value.findIndex(G=>G.key===w);if(~B){const G=fe.value[B].children;if(!G)return;ke.value=!0;const we=zn(G,t);fe.value.splice(B+1,0,{__motion:!0,mode:"collapse",height:$?we.length*rn:void 0,nodes:$?we.slice(0,Pe):we})}}});const fn=A(()=>Xt(ce.value)),hn=A(()=>ke.value?fe.value:ce.value);function Ee(){const{value:t}=u;t&&t.sync()}function gn(){ke.value=!1,e.virtualScroll&&wn(Ee)}function te(t){const{getNode:a}=x.value;return t.map(v=>{var b;return((b=a(v))===null||b===void 0?void 0:b.rawNode)||null})}function xe(t,a){const{"onUpdate:expandedKeys":v,onUpdateExpandedKeys:b}=e;be.value=t,v&&L(v,t,a),b&&L(b,t,a)}function Qe(t,a){const{"onUpdate:checkedKeys":v,onUpdateCheckedKeys:b}=e;O.value=t,b&&L(b,t,a),v&&L(v,t,a)}function Ze(t,a){const{"onUpdate:indeterminateKeys":v,onUpdateIndeterminateKeys:b}=e;v&&L(v,t,a),b&&L(b,t,a)}function je(t,a){const{"onUpdate:selectedKeys":v,onUpdateSelectedKeys:b}=e;ge.value=t,b&&L(b,t,a),v&&L(v,t,a)}function vn(t){const{onDragenter:a}=e;a&&L(a,t)}function mn(t){const{onDragleave:a}=e;a&&L(a,t)}function yn(t){const{onDragend:a}=e;a&&L(a,t)}function en(t){const{onDragstart:a}=e;a&&L(a,t)}function qe(t){const{onDragover:a}=e;a&&L(a,t)}function nn(t){const{onDrop:a}=e;a&&L(a,t)}function re(){i(),f()}function i(){ne.value=null}function f(){Ne.value=0,Ae.value=null,Oe.value=null,Ce.value=null,R()}function R(){ee&&(window.clearTimeout(ee),ee=null),m=null}function C(t,a){if(e.disabled||Se(t,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){de(t);return}const{checkedKeys:v,indeterminateKeys:b}=x.value[a?"check":"uncheck"](t.key,q.value,{cascade:e.cascade,checkStrategy:W.value,allowNotLoaded:e.allowCheckingNotLoaded});Qe(v,te(v)),Ze(b,te(b))}function V(t){if(e.disabled)return;const{key:a}=t,{value:v}=X,b=v.findIndex(w=>w===a);if(~b){const w=Array.from(v);w.splice(b,1),xe(w,te(w))}else{const w=k.value.getNode(a);if(!w||w.isLeaf)return;let H;if(e.accordion){const $=new Set(t.siblings.map(({key:ve})=>ve));H=v.filter(ve=>!$.has(ve)),H.push(a)}else H=v.concat(a);xe(H,te(H))}}function E(t){e.disabled||ke.value||V(t)}function de(t){if(!(e.disabled||!e.selectable)){if(J.value=t.key,e.internalUnifySelectCheck){const{value:{checkedKeys:a,indeterminateKeys:v}}=j;e.multiple?C(t,!(a.includes(t.key)||v.includes(t.key))):Qe([t.key],te([t.key]))}if(e.multiple){const a=Array.from(ie.value),v=a.findIndex(b=>b===t.key);~v?e.cancelable&&a.splice(v,1):~v||a.push(t.key),je(a,te(a))}else ie.value.includes(t.key)?e.cancelable&&je([],[]):je([t.key],te([t.key]))}}function Le(t){if(ee&&(window.clearTimeout(ee),ee=null),t.isLeaf)return;m=t.key;const a=()=>{if(m!==t.key)return;const{value:v}=Oe;if(v&&v.key===t.key&&!X.value.includes(t.key)){const b=X.value.concat(t.key);xe(b,te(b))}ee=null,m=null};t.shallowLoaded?ee=window.setTimeout(()=>{a()},1e3):ee=window.setTimeout(()=>{Te(t).then(()=>{a()})},1e3)}function tn({event:t,node:a}){!e.draggable||e.disabled||Se(a,e.disabledField)||(An({event:t,node:a},!1),vn({event:t,node:a.rawNode}))}function He({event:t,node:a}){!e.draggable||e.disabled||Se(a,e.disabledField)||mn({event:t,node:a.rawNode})}function ct(t){t.target===t.currentTarget&&f()}function ut({event:t,node:a}){re(),!(!e.draggable||e.disabled||Se(a,e.disabledField))&&yn({event:t,node:a.rawNode})}function ft({event:t,node:a}){!e.draggable||e.disabled||Se(a,e.disabledField)||(Ve=t.clientX,ne.value=a,en({event:t,node:a.rawNode}))}function An({event:t,node:a},v=!0){var b;if(!e.draggable||e.disabled||Se(a,e.disabledField))return;const{value:w}=ne;if(!w)return;const{allowDrop:H,indent:$}=e;v&&qe({event:t,node:a.rawNode});const ve=t.currentTarget,{height:Pe,top:he}=ve.getBoundingClientRect(),B=t.clientY-he;let G;H({node:a.rawNode,dropPosition:"inside",phase:"drag"})?B<=8?G="before":B>=Pe-8?G="after":G="inside":B<=Pe/2?G="before":G="after";const{value:bt}=fn;let D,Q;const bn=bt(a.key);if(bn===null){f();return}let Ln=!1;G==="inside"?(D=a,Q="inside"):G==="before"?a.isFirstChild?(D=a,Q="before"):(D=ce.value[bn-1],Q="after"):(D=a,Q="after"),!D.isLeaf&&X.value.includes(D.key)&&(Ln=!0,Q==="after"&&(D=ce.value[bn+1],D?Q="before":(D=a,Q="inside")));const _n=D;if(Oe.value=_n,!Ln&&w.isLastChild&&w.key===D.key&&(Q="after"),Q==="after"){let Bn=Ve-t.clientX,pn=0;for(;Bn>=$/2&&D.parent!==null&&D.isLastChild&&pn<1;)Bn-=$,pn+=1,D=D.parent;Ne.value=pn}else Ne.value=0;if((w.contains(D)||Q==="inside"&&((b=w.parent)===null||b===void 0?void 0:b.key)===D.key)&&!(w.key===_n.key&&w.key===D.key)){f();return}if(!H({node:D.rawNode,dropPosition:Q,phase:"drag"})){f();return}if(w.key===D.key)R();else if(m!==D.key)if(Q==="inside"){if(e.expandOnDragenter){if(Le(D),!D.shallowLoaded&&m!==D.key){re();return}}else if(!D.shallowLoaded){re();return}}else R();else Q!=="inside"&&R();Ce.value=Q,Ae.value=D}function ht({event:t,node:a,dropPosition:v}){if(!e.draggable||e.disabled||Se(a,e.disabledField))return;const{value:b}=ne,{value:w}=Ae,{value:H}=Ce;if(!(!b||!w||!H)&&!!e.allowDrop({node:w.rawNode,dropPosition:H,phase:"drag"})&&b.key!==w.key){if(H==="before"){const $=b.getNext({includeDisabled:!0});if($&&$.key===w.key){f();return}}if(H==="after"){const $=b.getPrev({includeDisabled:!0});if($&&$.key===w.key){f();return}}nn({event:t,node:w.rawNode,dragNode:b.rawNode,dropPosition:v}),re()}}function gt(){Ee()}function vt(){Ee()}function mt(t){var a;if(e.virtualScroll||e.internalScrollable){const{value:v}=u;if(!((a=v==null?void 0:v.containerRef)===null||a===void 0)&&a.contains(t.relatedTarget))return;J.value=null}else{const{value:v}=h;if(v!=null&&v.contains(t.relatedTarget))return;J.value=null}}on(J,t=>{var a,v;if(t!==null){if(e.virtualScroll)(a=s.value)===null||a===void 0||a.scrollTo({key:t});else if(e.internalScrollable){const{value:b}=u;if(b===null)return;const w=(v=b.contentRef)===null||v===void 0?void 0:v.querySelector(`[data-key="${rt(t)}"]`);if(!w)return;b.scrollTo({el:w})}}}),Zn(Xe,{loadingKeysRef:le,highlightKeySetRef:pe,displayedCheckedKeysRef:q,displayedIndeterminateKeysRef:oe,mergedSelectedKeysRef:ie,mergedExpandedKeysRef:X,mergedThemeRef:d,mergedCheckStrategyRef:W,nodePropsRef:T(e,"nodeProps"),disabledRef:T(e,"disabled"),checkableRef:T(e,"checkable"),selectableRef:T(e,"selectable"),expandOnClickRef:T(e,"expandOnClick"),onLoadRef:T(e,"onLoad"),draggableRef:T(e,"draggable"),blockLineRef:T(e,"blockLine"),indentRef:T(e,"indent"),cascadeRef:T(e,"cascade"),checkOnClickRef:T(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Oe,droppingNodeParentRef:ue,draggingNodeRef:ne,droppingPositionRef:Ce,droppingOffsetLevelRef:Ne,fNodesRef:ce,pendingNodeKeyRef:J,disabledFieldRef:T(e,"disabledField"),internalScrollableRef:T(e,"internalScrollable"),internalCheckboxFocusableRef:T(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:T(e,"renderLabel"),renderPrefixRef:T(e,"renderPrefix"),renderSuffixRef:T(e,"renderSuffix"),renderSwitcherIconRef:T(e,"renderSwitcherIcon"),labelFieldRef:T(e,"labelField"),multipleRef:T(e,"multiple"),handleSwitcherClick:E,handleDragEnd:ut,handleDragEnter:tn,handleDragLeave:He,handleDragStart:ft,handleDrop:ht,handleDragOver:An,handleSelect:de,handleCheck:C});function yt(t){var a;(a=s.value)===null||a===void 0||a.scrollTo(t)}const On={handleKeydown:Me,scrollTo:yt},En=A(()=>{const{common:{cubicBezierEaseInOut:t},self:{fontSize:a,nodeBorderRadius:v,nodeColorHover:b,nodeColorPressed:w,nodeColorActive:H,arrowColor:$,loadingColor:ve,nodeTextColor:Pe,nodeTextColorDisabled:he,dropMarkColor:B}}=d.value;return{"--n-arrow-color":$,"--n-loading-color":ve,"--n-bezier":t,"--n-font-size":a,"--n-node-border-radius":v,"--n-node-color-active":H,"--n-node-color-hover":b,"--n-node-color-pressed":w,"--n-node-text-color":Pe,"--n-node-text-color-disabled":he,"--n-drop-mark-color":B}}),_e=l?et("tree",void 0,En,e):void 0;return{mergedClsPrefix:n,mergedTheme:d,rtlEnabled:r,fNodes:hn,aip:ke,selfElRef:h,virtualListInstRef:s,scrollbarInstRef:u,handleFocusout:mt,handleDragLeaveTree:ct,handleScroll:gt,getScrollContainer:g,getScrollContent:y,handleAfterEnter:gn,handleResize:vt,handleKeydown:On.handleKeydown,scrollTo:On.scrollTo,cssVars:l?void 0:En,themeClass:_e==null?void 0:_e.themeClass,onRender:_e==null?void 0:_e.onRender}},render(){var e;const{fNodes:n,internalRenderEmpty:l}=this;if(!n.length&&l)return l();const{mergedClsPrefix:o,blockNode:r,blockLine:d,draggable:h,disabled:u,internalFocusable:s,checkable:g,handleKeydown:y,rtlEnabled:S,handleFocusout:k}=this,p=s&&!u,x=p?"0":void 0,N=[`${o}-tree`,S&&`${o}-tree--rtl`,g&&`${o}-tree--checkable`,(d||r)&&`${o}-tree--block-node`,d&&`${o}-tree--block-line`],O=P=>"__motion"in P?c(Fo,{height:P.height,nodes:P.nodes,clsPrefix:o,mode:P.mode,onAfterEnter:this.handleAfterEnter}):c(it,{key:P.key,tmNode:P,clsPrefix:o});if(this.virtualScroll){const{mergedTheme:P,internalScrollablePadding:j}=this,W=lo(j||"0");return c(jn,{ref:"scrollbarInstRef",onDragleave:h?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:N,theme:P.peers.Scrollbar,themeOverrides:P.peerOverrides.Scrollbar,tabindex:x,onKeydown:p?y:void 0,onFocusout:p?k:void 0},{default:()=>{var q;return(q=this.onRender)===null||q===void 0||q.call(this),c(ao,{ref:"virtualListInstRef",items:this.fNodes,itemSize:rn,ignoreItemResize:this.aip,paddingTop:W.top,paddingBottom:W.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:W.left,paddingRight:W.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:oe})=>O(oe)})}})}const{internalScrollable:M}=this;return N.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),M?c(jn,{class:N,tabindex:x,onKeydown:p?y:void 0,onFocusout:p?k:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>c("div",{onDragleave:h?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(O))}):c("div",{class:N,tabindex:x,ref:"selfElRef",style:this.cssVars,onKeydown:p?y:void 0,onFocusout:p?k:void 0,onDragleave:h?this.handleDragLeaveTree:void 0},n.length?n.map(O):ot(this.$slots.empty,()=>[c(lt,{class:`${o}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}});function Hn(e,n){const{rawNode:l}=e;return Object.assign(Object.assign({},l),{label:l[n],value:e.key})}function Gn(e,n,l,o){const{rawNode:r}=e;return Object.assign(Object.assign({},r),{value:e.key,label:n.map(d=>d.rawNode[o]).join(l)})}const Ao=me([I("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),I("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[I("tree","max-height: var(--n-menu-height);"),Re("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Re("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),so()])]),Oo=Object.assign(Object.assign(Object.assign(Object.assign({},an.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:Cn.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function}),st),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),Eo=Z({name:"TreeSelect",props:Oo,setup(e){const n=K(null),l=K(null),o=K(null),r=K(null),{mergedClsPrefixRef:d,namespaceRef:h,inlineThemeDisabled:u}=Qn(e),{localeRef:s}=co("Select"),{mergedSizeRef:g,mergedDisabledRef:y,mergedStatusRef:S,nTriggerFormBlur:k,nTriggerFormChange:p,nTriggerFormFocus:x,nTriggerFormInput:N}=cn(e),O=K(e.defaultValue),M=T(e,"value"),P=De(M,O),j=K(e.defaultShow),W=T(e,"show"),q=De(W,j),oe=K(""),ge=A(()=>{const{filter:i}=e;if(i)return i;const{labelField:f}=e;return(R,C)=>R.length?C[f].toLowerCase().includes(R.toLowerCase()):!0}),ae=A(()=>tt(e.options,dt(e.keyField,e.childrenField,e.disabledField))),{value:ie}=P,be=K(e.checkable?null:Array.isArray(ie)&&ie.length?ie[ie.length-1]:null),se=A(()=>e.multiple&&e.cascade&&e.checkable),Ie=K(e.defaultExpandAll?void 0:e.defaultExpandedKeys||e.expandedKeys),X=T(e,"expandedKeys"),ce=De(X,Ie),J=K(!1),Me=A(()=>{const{placeholder:i}=e;return i!==void 0?i:s.value.placeholder}),ee=A(()=>e.checkable?[]:m.value),m=A(()=>{const{value:i}=P;return e.multiple?Array.isArray(i)?i:[]:i===null||Array.isArray(i)?[]:[i]}),F=A(()=>{const{multiple:i,showPath:f,separator:R,labelField:C}=e;if(i)return null;const{value:V}=P;if(!Array.isArray(V)&&V!==null){const{value:E}=ae,de=E.getNode(V);if(de!==null)return f?Gn(de,E.getPath(V).treeNodePath,R,C):Hn(de,C)}return null}),U=A(()=>{const{multiple:i,showPath:f,separator:R}=e;if(!i)return null;const{value:C}=P;if(Array.isArray(C)){const V=[],{value:E}=ae,{checkedKeys:de}=E.getCheckedKeys(C,{checkStrategy:e.checkStrategy,cascade:se.value,allowNotLoaded:e.allowCheckingNotLoaded}),{labelField:Le}=e;return de.forEach(tn=>{const He=E.getNode(tn);He!==null&&V.push(f?Gn(He,E.getPath(tn).treeNodePath,R,Le):Hn(He,Le))}),V}return[]}),pe=A(()=>{const{self:{menuPadding:i}}=qe.value;return i});function le(){var i;(i=l.value)===null||i===void 0||i.focus()}function Je(){var i;(i=l.value)===null||i===void 0||i.focusInput()}function Ve(i){const{onUpdateShow:f,"onUpdate:show":R}=e;f&&L(f,i),R&&L(R,i),j.value=i}function ne(i,f){const{onUpdateValue:R,"onUpdate:value":C}=e;R&&L(R,i,f),C&&L(C,i,f),O.value=i,N(),p()}function Ae(i,f){const{onUpdateIndeterminateKeys:R,"onUpdate:indeterminateKeys":C}=e;R&&L(R,i,f),C&&L(C,i,f)}function Oe(i,f){const{onUpdateExpandedKeys:R,"onUpdate:expandedKeys":C}=e;R&&L(R,i,f),C&&L(C,i,f),Ie.value=i}function Ce(i){const{onFocus:f}=e;f&&f(i),x()}function Ne(i){ue();const{onBlur:f}=e;f&&f(i),k()}function ue(){Ve(!1)}function Ke(){y.value||(oe.value="",Ve(!0),e.filterable&&Je())}function $e(){oe.value=""}function ze(i){var f;q.value&&(!((f=l.value)===null||f===void 0)&&f.$el.contains(io(i))||ue())}function Fe(){y.value||(q.value?e.filterable||ue():Ke())}function Te(i){const{value:{getNode:f}}=ae;return i.map(R=>{var C;return((C=f(R))===null||C===void 0?void 0:C.rawNode)||null})}function ke(i){const f=Te(i);e.multiple?(ne(i,f),e.filterable&&(Je(),e.clearFilterAfterSelect&&(oe.value=""))):(i.length?ne(i[0],f[0]||null):ne(null,null),ue(),le())}function fe(i){e.checkable&&Ae(i,Te(i))}function fn(i){var f;!((f=r.value)===null||f===void 0)&&f.contains(i.relatedTarget)||(J.value=!0,Ce(i))}function hn(i){var f;!((f=r.value)===null||f===void 0)&&f.contains(i.relatedTarget)||(J.value=!1,Ne(i))}function Ee(i){var f,R,C;((f=r.value)===null||f===void 0?void 0:f.contains(i.relatedTarget))||((C=(R=l.value)===null||R===void 0?void 0:R.$el)===null||C===void 0?void 0:C.contains(i.relatedTarget))||(J.value=!0,Ce(i))}function gn(i){var f,R,C;((f=r.value)===null||f===void 0?void 0:f.contains(i.relatedTarget))||((C=(R=l.value)===null||R===void 0?void 0:R.$el)===null||C===void 0?void 0:C.contains(i.relatedTarget))||(J.value=!1,Ne(i))}function te(i){i.stopPropagation();const{multiple:f}=e;!f&&e.filterable&&ue(),f?ne([],[]):ne(null,null)}function xe(i){const{value:f}=P;if(Array.isArray(f)){const{value:R}=ae,{checkedKeys:C}=R.getCheckedKeys(f,{cascade:se.value,allowNotLoaded:e.allowCheckingNotLoaded}),V=C.findIndex(E=>E===i.value);if(~V)if(e.checkable){const{checkedKeys:E}=R.uncheck(i.value,C,{checkStrategy:e.checkStrategy,cascade:se.value,allowNotLoaded:e.allowCheckingNotLoaded});ne(E,Te(E))}else{const E=Array.from(C);E.splice(V,1),ne(E,Te(E))}}}function Qe(i){const{value:f}=i.target;oe.value=f}function Ze(i){const{value:f}=o;f&&f.handleKeydown(i)}function je(i){i.key==="Enter"?(q.value?(Ze(i),e.multiple||(ue(),le())):Ke(),i.preventDefault()):i.key==="Escape"?q.value&&(uo(i),ue(),le()):q.value?Ze(i):i.key==="ArrowDown"&&Ke()}function vn(){ue(),le()}function mn(i){Sn(i,"action")||i.preventDefault()}const yn=A(()=>{const{renderTag:i}=e;if(!!i)return function({option:R,handleClose:C}){const{value:V}=R;if(V!==void 0){const E=ae.value.getNode(V);if(E)return i({option:E.rawNode,handleClose:C})}return V}});Zn(Tn,{pendingNodeKeyRef:be,dataTreeMate:ae});function en(){var i;!q.value||(i=n.value)===null||i===void 0||i.syncPosition()}Jt(r,en);const qe=an("TreeSelect","-tree-select",Ao,po,e,d),nn=A(()=>{const{common:{cubicBezierEaseInOut:i},self:{menuBoxShadow:f,menuBorderRadius:R,menuColor:C,menuHeight:V,actionPadding:E,actionDividerColor:de,actionTextColor:Le}}=qe.value;return{"--n-menu-box-shadow":f,"--n-menu-border-radius":R,"--n-menu-color":C,"--n-menu-height":V,"--n-bezier":i,"--n-action-padding":E,"--n-action-text-color":Le,"--n-action-divider-color":de}}),re=u?et("tree-select",void 0,nn,e):void 0;return{menuElRef:r,mergedStatus:S,triggerInstRef:l,followerInstRef:n,treeInstRef:o,mergedClsPrefix:d,mergedValue:P,mergedShow:q,namespace:h,adjustedTo:Cn(e),isMounted:Pt(),focused:J,menuPadding:pe,mergedPlaceholder:Me,mergedExpandedKeys:ce,treeSelectedKeys:ee,treeCheckedKeys:m,mergedSize:g,mergedDisabled:y,selectedOption:F,selectedOptions:U,pattern:oe,pendingNodeKey:be,mergedCascade:se,mergedFilter:ge,selectionRenderTag:yn,handleTriggerOrMenuResize:en,doUpdateExpandedKeys:Oe,handleMenuLeave:$e,handleTriggerClick:Fe,handleMenuClickoutside:ze,handleUpdateCheckedKeys:ke,handleUpdateIndeterminateKeys:fe,handleTriggerFocus:fn,handleTriggerBlur:hn,handleMenuFocusin:Ee,handleMenuFocusout:gn,handleClear:te,handleDeleteOption:xe,handlePatternInput:Qe,handleKeydown:je,handleTabOut:vn,handleMenuMousedown:mn,mergedTheme:qe,cssVars:u?void 0:nn,themeClass:re==null?void 0:re.themeClass,onRender:re==null?void 0:re.onRender}},render(){const{mergedTheme:e,mergedClsPrefix:n,$slots:l}=this;return c("div",{class:`${n}-tree-select`},c(fo,null,{default:()=>[c(ho,null,{default:()=>c(Qt,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:n,theme:e.peers.InternalSelection,themeOverrides:e.peerOverrides.InternalSelection,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var o,r;return[(r=(o=this.$slots).arrow)===null||r===void 0?void 0:r.call(o)]}})}),c(go,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Cn.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>c(Dt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var o;if(!this.mergedShow)return null;const{mergedClsPrefix:r,checkable:d,multiple:h,menuProps:u,options:s}=this;return(o=this.onRender)===null||o===void 0||o.call(this),It(c("div",Object.assign({},u,{class:[`${r}-tree-select-menu`,u==null?void 0:u.class,this.themeClass],ref:"menuElRef",style:[(u==null?void 0:u.style)||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),c(Io,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,filter:this.mergedFilter,data:s,cancelable:h,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:e.peers.Tree,themeOverrides:e.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:d,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>c("div",{class:`${r}-tree-select-menu__empty`},ot(l.empty,()=>[c(lt,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),ro(l.action,g=>g?c("div",{class:`${r}-tree-select-menu__action`,"data-action":!0},g):null),c(Zt,{onFocus:this.handleTabOut})),[[Gt,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}}),Lo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},_o=Nn("defs",null,null,-1),Bo=Nn("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),Uo=Nn("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),Mo=[_o,Bo,Uo],Pn=Z({name:"PlusOutlined",render:function(n,l){return At(),Ot("svg",Lo,Mo)}});function Vo(){const e=Et({formRef:K()}),n=async(...h)=>{await e.formRef.validate(...h)},l=h=>{const u=Object.keys(e.formRef.model);for(const s of u)Object.keys(h).includes(s)||delete e.formRef.model[s];o(h)},o=h=>{for(const[u,s]of Object.entries(h))e.formRef.model[u]=s};return{state:e,validate:n,setValues:o,getValues:()=>e.formRef.model,resetValues:l,restoreValidation:()=>{e.formRef.restoreValidation()}}}function Wn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!_t(e)}const $o={meta:{type:Object,default:{},required:!0},layout:{type:Object},loading:{type:Boolean,default:!1}},Ol=Z({name:"DSForm",props:$o,setup(e,{expose:n}){const{state:l,...o}=Vo();return n({...o}),{...Lt(l)}},render(e){let n;const{loading:l,layout:o,meta:r}=e,{elements:d=[],...h}=r;return ln(Vt,{show:l},{default:()=>[ln(Bt,Mn(h,{rules:r.rules,ref:"formRef"}),{default:()=>[ln(sn,o,Wn(n=d.map(u=>{let s;const{span:g=24,path:y,widget:S,...k}=u;return ln(un,Mn(k,{span:ye(g)===void 0?24:ye(g),path:y,key:y||String(Date.now()+Math.random())}),Wn(s=c(S))?s:{default:()=>[s]})}))?n:{default:()=>[n]})]})]})}});function Dn(e){return e?(Array.isArray(e)&&e.forEach(n=>(n!=null&&n.message||delete n.message,n)),e.message||delete e.message,e):{}}function zo(e,n){const{props:l,field:o}=_.exports.isFunction(e)?e():e;return c(nt,{...l,value:n[o],onUpdateValue:r=>void(n[o]=r)})}function jo(e,n){const{props:l,field:o,options:r}=_.exports.isFunction(e)?e():e;return r?c($t,{...l,value:n[o],onUpdateValue:d=>void(n[o]=d)},()=>c(Ye,null,()=>ye(r).map(d=>c(Vn,d,()=>d.label)))):c(Vn,{...l,value:n[o],onUpdateChecked:d=>void(n[o]=d)})}function qo(e,n){const{props:l,field:o}=_.exports.isFunction(e)?e():e;return c(zt,{options:l,value:n[o],onUpdateValue:r=>void(n[o]=r)})}const Ho=Z({name:"CustomParameters",emits:["add"],setup(e,n){const l=cn({});return{onAdd:()=>void n.emit("add"),disabled:l.mergedDisabledRef}},render(){const{disabled:e,$slots:n,onAdd:l}=this;return c(Ye,{vertical:!0,style:{width:"100%"}},{default:()=>[Kn(n,"default",{disabled:e}),c(Ue,{circle:!0,size:"small",type:"info",class:"btn-create-custom-parameter",disabled:e,onClick:l},{icon:()=>c(Pn)})]})}}),Go=e=>{const n={},l={},o=(r,d,h)=>{r.forEach(u=>{const s=_.exports.isFunction(u)?u():u;if(Array.isArray(s.children)){const g={},y={};o(s.children,g,y),d[s.field]=[g],h[s.field]={type:"array",fields:y};return}else d[s.field]=s.value||null,s.validate&&(h[s.field]=Dn(s.validate))})};return o(e,n,l),{defaultValue:n,ruleItem:l}};function Wo(e,n,l){const o=_.exports.isFunction(e)?e():e,{field:r,children:d=[]}=o,{defaultValue:h,ruleItem:u}=Go(d);l.push(u);const s=(y,S,k)=>d.map(p=>{const x=_.exports.isFunction(p)?p(S):p;return c(un,{showLabel:!!x.name,path:x.path||`${r}[${S}].${x.field}`,label:x.name,span:ye(x.span),class:x.class,rule:x.rule},()=>In(x,y))});return c(Ho,{onAdd:()=>{l.push(u),n[r].push({...h})}},{default:({disabled:y})=>n[r].map((S,k)=>c(sn,{xGap:10},()=>[...s(S,k),c(dn,{span:2},()=>c(Ue,{circle:!0,type:"error",size:"small",disabled:y,class:"btn-delete-custom-parameter",onClick:()=>{n[r].splice(k,1),l.splice(k,1)}},{icon:()=>c(Fn)}))]))})}function Yo(e,n){const{props:l,field:o,slots:r={}}=_.exports.isFunction(e)?e():e;return c(Wt,{...l,value:n[o],onUpdateValue:d=>void(n[o]=d)},{...r})}function Xo(e,n){const{props:l,field:o,slots:r={}}=_.exports.isFunction(e)?e():e;return c(Yt,{...l,value:n[o],onUpdateValue:d=>void(n[o]=d)},{...r})}function Jo(e,n){const{props:l,field:o,options:r=[]}=_.exports.isFunction(e)?e():e;return c(eo,{...l,value:n[o],onUpdateValue:d=>{n[o]=d,l!=null&&l.onUpdateValue&&l.onUpdateValue(d)},options:ye(r)})}function Qo(e,n){const{props:l,field:o,options:r}=_.exports.isFunction(e)?e():e;return r?c(no,{value:n[o],onUpdateValue:d=>void(n[o]=d)},()=>c(Ye,null,()=>ye(r).map(d=>c(Rn,{...d})))):c(Rn,{...l,value:n[o],onUpdateChecked:d=>void(n[o]=d)})}function Zo(e,n){const{props:l={},field:o,options:r=[]}=_.exports.isFunction(e)?e():e;return c(Eo,{...l,value:n[o],onUpdateValue:d=>void(n[o]=d),options:ye(r)})}const el=Z({name:"MultiInput",emits:["add"],setup(e,n){const l=cn({});return{onAdd:()=>void n.emit("add"),disabled:l.mergedDisabledRef}},render(){const{disabled:e,$slots:n,onAdd:l}=this;return c(Ye,{vertical:!0,style:{width:"100%"}},{default:()=>[Kn(n,"default",{disabled:e}),c(Ue,{circle:!0,size:"small",type:"info",disabled:e,onClick:l},{icon:()=>c(Pn)})]})}});function nl(e,n,l){const{field:o}=_.exports.isFunction(e)?e():e,r=(h,u)=>{const s=_.exports.isFunction(e)?e():e;return c(un,{showLabel:!1,path:`${s.field}[${u}]`,span:ye(s.span)},()=>c(nt,{...s.props,value:h,onUpdateValue:g=>void(n[s.field][u]=g)}))};return c(el,{name:o,onAdd:()=>{n[o].push("")}},{default:({disabled:h})=>n[o].map((u,s)=>c(sn,{xGap:10},()=>[r(u,s),c(dn,{span:2},()=>c(Ue,{circle:!0,type:"error",size:"small",disabled:h,onClick:()=>{n[o].splice(s,1)}},{icon:()=>c(Fn)}))]))})}const tl=Z({name:"MultiCondition",emits:["add"],setup(e,n){const l=cn({});return{onAdd:()=>void n.emit("add"),disabled:l.mergedDisabledRef}},render(){const{disabled:e,$slots:n,onAdd:l}=this;return c(Ye,{vertical:!0,style:{width:"100%"}},{default:()=>[Kn(n,"default",{disabled:e}),c(Ue,{circle:!0,size:"tiny",type:"info",disabled:e,onClick:l},{icon:()=>c(Pn)})]})}});function ol(e,n){const l={},{field:o,children:r=[]}=_.exports.isFunction(e)?e():e;r.forEach(u=>{const s=_.exports.isFunction(u)?u():u;s.validate&&(l[s.field]=Dn(s.validate))});const d=(u,s)=>r.map(g=>{const y=_.exports.isFunction(g)?g():g;return c(un,{showLabel:!!g.name,label:g.name?g.name:"",path:`${n[o]}[${s}].${y.field}`,span:ye(y.span)},()=>In(g,n[o][s]))});return c(tl,{name:o,onAdd:()=>{const u={};r.map(s=>{const{field:g}=_.exports.isFunction(s)?s():s;g&&(u[g]=null)}),n[o].push(u)}},{default:({disabled:u})=>n[o].map((s,g)=>c(sn,{xGap:10},()=>[...d(s,g),c(dn,{span:2,style:{alignSelf:"center"}},()=>c(Ue,{circle:!0,type:"error",size:"tiny",disabled:u,onClick:()=>{n[o].splice(g,1)}},{icon:()=>c(Fn)}))]))})}const Yn=Object.freeze(Object.defineProperty({__proto__:null,renderInput:zo,renderRadio:jo,renderEditor:qo,renderCustomParameters:Wo,renderSwitch:Yo,renderInputNumber:Xo,renderSelect:Jo,renderCheckbox:Qo,renderTreeSelect:Zo,renderMultiInput:nl,renderMultiCondition:ol},Symbol.toStringTag,{value:"Module"})),ll=["input","radio","editor","custom-parameters","custom-labels","switch","input-number","select","checkbox","tree-select","multi-input","custom","multi-condition"],In=(e,n,l)=>{const{type:o="input",widget:r,field:d}=_.exports.isFunction(e)?e():e;if(!ll.includes(o))return null;const h=`render${_.exports.upperFirst(_.exports.camelCase(o))}`;if(o==="custom")return r||null;if(o==="custom-parameters"){let u=[];return l&&!l[d]&&(u=l[d]=[]),Yn[h](e,n,u)}return Yn[h](e,n)};function El(e,n){const l={},o={},r=[];for(const d of e){const h=_.exports.isFunction(d)?d():d,{name:u,value:s,field:g,children:y,validate:S,...k}=h;(s||s===0)&&(n[g]=s,o[g]=s),S&&(l[g]=Dn(S));const p={showLabel:!!u,..._.exports.omit(k,["type","props","options"]),label:u,path:y?"":g,widget:()=>In(d,n,l),span:T(h,"span")};r.push(p)}return{rules:l,elements:r,initialValues:o}}export{Ol as F,El as g};
