import{d as c,u as m,bH as h,c as e}from"./index.02a17cf1.js";import{_ as d}from"./lodash.3a74b132.js";import{f as g}from"./common.a16f92ec.js";import{d as w,e as y}from"./index.b0aa157e.js";import{F as N}from"./FormOutlined.0c6aa81a.js";import{U as R}from"./UploadOutlined.bbed6507.js";import{E as b}from"./EditOutlined.8be88705.js";import{D as F}from"./DownloadOutlined.bd8b049e.js";import{D as v}from"./DeleteOutlined.d3b97bbb.js";import{N as s}from"./Tooltip.76a430fa.js";import{N as n}from"./Button.1b3ea9f7.js";import{N as u}from"./Icon.0cd298dd.js";import{N as D}from"./Popconfirm.98866df0.js";import{N as x}from"./Space.8a344b95.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./index.8474b6bf.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./Popover.92dc7b00.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./use-false-until-truthy.e57d8f60.js";import"./_baseMap.d8d47059.js";import"./get.852d0cd9.js";import"./cssr.f561ccf0.js";import"./utils.eff12f29.js";import"./format-length.a6a40b1f.js";import"./resolve-slot.92499a18.js";import"./use-merged-state.2bdc3563.js";import"./use-compitable.cd47f4ac.js";import"./next-frame-once.50ecadf2.js";import"./is-browser.e7afaa57.js";import"./use-form-item.96cfc8ba.js";import"./use-locale.47aab0f5.js";import"./keysOf.843c523b.js";import"./get-slot.eeb09d52.js";import"./index.5f9a33e7.js";const _={show:{type:Boolean,default:!1},row:{type:Object,default:{name:"",description:"",user_name:""}}},be=c({name:"TableAction",props:_,emits:["updateList","reuploadResource","renameResource"],setup(r,{emit:i}){const{t:p}=m(),f=h();return{t:p,rtDisb:(t,l)=>{const o=t.lastIndexOf("."),a=t.substring(o,t.length);return!(d.includes(g,d.trimStart(a,"."))&&l<1e6)},handleEditFile:t=>{f.push({name:"resource-file-edit",query:{prefix:t.fullName,tenantCode:t.user_name,alias:t.alias}})},handleDeleteFile:t=>{w(t).then(()=>i("updateList"))},handleReuploadFile:(t,l,o,a)=>{i("reuploadResource",t,l,o,a)},handleRenameFile:(t,l,o,a)=>{i("renameResource",t,l,o,a)},...r}},render(){const{t:r}=m();return e(x,null,{default:()=>[e(s,{trigger:"hover"},{default:()=>r("resource.file.edit"),trigger:()=>e(n,{size:"tiny",type:"info",disabled:this.rtDisb(this.row.name,this.row.size),tag:"div",onClick:()=>{this.handleEditFile({fullName:this.row.fullName,user_name:this.row.user_name,alias:this.row.alias})},style:{marginRight:"-5px"},circle:!0,class:"btn-edit"},{default:()=>[e(u,null,{default:()=>[e(N,null,null)]})]})}),e(s,{trigger:"hover"},{default:()=>r("resource.file.reupload"),trigger:()=>{var i;return e(n,{size:"tiny",type:"info",onClick:()=>this.handleReuploadFile(this.row.name,this.row.description,this.row.fullName,this.row.user_name),disabled:!!((i=this.row)!=null&&i.directory),style:{marginRight:"-5px"},circle:!0,class:"btn-reupload"},{default:()=>[e(u,null,{default:()=>[e(R,null,null)]})]})}}),e(s,{trigger:"hover"},{default:()=>r("resource.file.rename"),trigger:()=>e(n,{size:"tiny",type:"info",onClick:()=>{this.handleRenameFile(this.row.name,this.row.description,this.row.fullName,this.row.user_name)},style:{marginRight:"-5px"},circle:!0,class:"btn-rename"},{default:()=>[e(u,null,{default:()=>[e(b,null,null)]})]})}),e(s,{trigger:"hover"},{default:()=>r("resource.file.download"),trigger:()=>{var i;return e(n,{size:"tiny",type:"info",disabled:!!((i=this.row)!=null&&i.directory),tag:"div",circle:!0,style:{marginRight:"-5px"},onClick:()=>y({fullName:this.row.fullName}),class:"btn-download"},{default:()=>[e(u,null,{default:()=>[e(F,null,null)]})]})}}),e(s,{trigger:"hover"},{default:()=>r("resource.file.delete"),trigger:()=>e(D,{"positive-text":r("resource.file.confirm"),"negative-text":r("resource.file.cancel"),onPositiveClick:()=>{this.handleDeleteFile({fullName:this.row.fullName,tenantCode:this.row.user_name})}},{default:()=>r("resource.file.delete_confirm"),trigger:()=>e(n,{size:"tiny",type:"error",circle:!0,class:"btn-delete"},{default:()=>[e(u,null,{default:()=>[e(v,null,null)]})]})})})]})}});export{be as default};
