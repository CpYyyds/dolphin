import{G as l}from"./index.7d2218cd.js";import{l as v}from"./lodash.3a74b132.js";import{b as _}from"./index.9b0cc109.js";import{D as N,d as b,r,o as k,H as z,c as i,F as S}from"./index.02a17cf1.js";function T(e,t){const a=v.exports.debounce(()=>{if(e){const n=e.offsetWidth,s=e.offsetHeight;t.resize(n,s)}},200);_(e,a)}function j(e,t){return new l({container:e,scroller:!0,grid:{size:10,visible:!0},minimap:{enabled:!0,width:200,height:120,container:t}})}const u="dag-node",R="200",W="50",P="rect";function w(){return{inherit:P}}const g=N({id:"dag-store",state:()=>({tasks:[]}),persist:!0,getters:{getDagTasks(){return this.tasks}},actions:{setDagTasks(e){this.tasks=e}}});function C(e){const t=g().getDagTasks;e.addNode(t.at(-1))}const G="_container_14j0i_17",y="_minimap_14j0i_27",d={container:G,"dag-container":"_dag-container_14j0i_22",minimap:y},H=b({name:"DagCanvas",emits:["drop"],setup(e,t){const a=r(),n=r(),s=r(),o=r(),p=g().getDagTasks;o.value&&T(n.value,o.value);const h=()=>{o.value=j(a.value,s.value)},m=()=>{l.unregisterNode(u),l.registerNode(u,w())},f=c=>{c.preventDefault()},D=c=>{t.emit("drop",c)};return k(()=>{h(),m()}),z(p,()=>{C(o.value)}),{container:a,"dag-container":n,minimapContainer:s,handlePreventDefault:f,handleDrop:D}},render(){return i(S,null,[i("div",{ref:"container",class:d.container,onDrop:this.handleDrop,onDragenter:this.handlePreventDefault,onDragover:this.handlePreventDefault,onDragleave:this.handlePreventDefault},[i("div",{ref:"dag-container",class:d["dag-container"]},null)]),i("div",{ref:"minimapContainer",class:d.minimap},null)])}}),A=Object.freeze(Object.defineProperty({__proto__:null,DagCanvas:H},Symbol.toStringTag,{value:"Module"}));export{H as D,R as N,W as a,P as b,A as d,g as u};
