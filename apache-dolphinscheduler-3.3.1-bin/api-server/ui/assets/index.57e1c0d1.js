import{u as m,bH as h,E as N,r as b,bs as _,d as g,G as v,I as x,c as r,i as C}from"./index.02a17cf1.js";import{C as y}from"./index.ef447d1d.js";import{M as w}from"./index.7b2dcdb8.js";import{u as R}from"./file.ec0c9e7e.js";import{o as E}from"./index.b0aa157e.js";import{f as I}from"./common.a16f92ec.js";import{s as a}from"./index.module.9c9bd97f.js";import{N as S}from"./Form.de76c832.js";import{N as f}from"./FormItem.aeb1ee46.js";import{N as O}from"./Input.59461546.js";import{N as j}from"./Select.51d2f90f.js";import{N as c}from"./Button.1b3ea9f7.js";import"./Card.f8db533a.js";import"./resolve-slot.92499a18.js";import"./index.5f9a33e7.js";import"./keysOf.843c523b.js";import"./use-form-item.96cfc8ba.js";import"./service.ade35c11.js";import"./ui-setting.7e6814b1.js";import"./lodash.3a74b132.js";import"./SettingOutlined.901415e1.js";import"./PauseCircleOutlined.6f50ffc5.js";import"./CloseCircleOutlined.d6e82e31.js";import"./CheckCircleOutlined.b15d9580.js";import"./EditOutlined.8be88705.js";import"./index.8474b6bf.js";import"./format-length.a6a40b1f.js";import"./get.852d0cd9.js";import"./use-locale.47aab0f5.js";import"./use-merged-state.2bdc3563.js";import"./Scrollbar.988383de.js";import"./VResizeObserver.f80d6e55.js";import"./Suffix.62982c61.js";import"./fade-in-scale-up.cssr.d8408fe5.js";import"./use-compitable.cd47f4ac.js";import"./cssr.f561ccf0.js";import"./Popover.92dc7b00.js";import"./index.8a81335d.js";import"./flatten.8ad131a2.js";import"./use-false-until-truthy.e57d8f60.js";import"./_baseMap.d8d47059.js";import"./utils.eff12f29.js";import"./next-frame-once.50ecadf2.js";import"./Empty.249462a1.js";import"./index.21198e00.js";import"./is-browser.e7afaa57.js";function V(t){const{t:i}=m(),e=h(),o=R();return{handleCreateFile:()=>{const s=o.getCurrentDir||"/";t.fileFormRef.validate(async l=>{l||(await E({...t.fileForm,currentDir:s}),window.$message.success(i("resource.file.success")),e.go(-1))})}}}const d=()=>({pid:-1,type:"FILE",suffix:"sh",fileName:"",description:"",content:"",currentDir:"/"});function k(){const{t}=m(),i=()=>{e.fileForm=Object.assign(_(e.fileForm),d())},e=N({fileFormRef:b(),fileForm:d(),rules:{fileName:{required:!0,trigger:["input","blur"],validator(){if(e.fileForm.fileName==="")return new Error(t("resource.file.enter_name_tips"));if(e.fileForm.fileName.endsWith(`.${e.fileForm.suffix}`))return new Error(t("resource.file.duplicate_suffix_tips"))}},suffix:{required:!0,trigger:["input","blur"],validator(){if(e.fileForm.suffix==="")return new Error(t("resource.file.enter_suffix_tips"))}},content:{required:!0,trigger:["input","blur"],validator(){if(e.fileForm.content==="")return new Error(t("resource.file.enter_content_tips"))}}}});return{state:e,resetForm:i}}function F(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!C(t)}const Re=g({name:"ResourceCreate",setup(){var p;const t=h(),{state:i}=k(),{handleCreateFile:e}=V(i),o=I.map(n=>({key:n,label:n,value:n})),u=()=>{e()},s=()=>{t.go(-1)},l=(p=v())==null?void 0:p.appContext.config.globalProperties.trim;return{fileSuffixOptions:o,handleFile:u,handleReturn:s,...x(i),trim:l}},render(){let t,i;const{t:e}=m();return r(y,{title:e("resource.file.file_details")},{default:()=>[r(S,{rules:this.rules,ref:"fileFormRef",class:a["form-content"]},{default:()=>[r(f,{label:e("resource.file.file_name"),path:"fileName"},{default:()=>[r(O,{allowInput:this.trim,value:this.fileForm.fileName,"onUpdate:value":o=>this.fileForm.fileName=o,placeholder:e("resource.file.enter_name_tips"),style:{width:"300px"},class:"input-file-name"},null)]}),r(f,{label:e("resource.file.file_format"),path:"suffix"},{default:()=>[r(j,{defaultValue:[this.fileForm.suffix],value:this.fileForm.suffix,"onUpdate:value":o=>this.fileForm.suffix=o,options:this.fileSuffixOptions,style:{width:"100px"},class:"select-file-format"},null)]}),r(f,{label:e("resource.file.file_content"),path:"content"},{default:()=>[r("div",{style:{width:"90%"}},[r(w,{value:this.fileForm.content,"onUpdate:value":o=>this.fileForm.content=o},null)])]}),r("div",{class:a["file-edit-content"]},[r("div",{class:a.submit},[r(c,{type:"info",size:"small",round:!0,onClick:this.handleFile,class:"btn-submit"},F(t=e("resource.file.save"))?t:{default:()=>[t]}),r(c,{type:"info",size:"small",text:!0,style:{marginLeft:"15px"},onClick:this.handleReturn,class:"btn-cancel"},F(i=e("resource.file.return"))?i:{default:()=>[i]})])])]})]})}});export{Re as default};
