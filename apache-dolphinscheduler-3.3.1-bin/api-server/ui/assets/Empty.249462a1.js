import{r as z,g as R,a1 as _,R as ae,d as F,U as te,aa as ce,o as de,aE as fe,aF as me,Y as $,h as g,an as he,l as ve,p as V,k as ge,b as pe,e as ne,t as ye,a4 as we,aM as xe,aB as Ce,j as q}from"./index.02a17cf1.js";import{V as U}from"./VResizeObserver.f80d6e55.js";import{c as Re,a as D}from"./cssr.f561ccf0.js";import{d as G,p as B}from"./index.5f9a33e7.js";import{b as Ie}from"./next-frame-once.50ecadf2.js";import{u as be}from"./use-locale.47aab0f5.js";function Fe(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function J(e){return e&-e}class ie{constructor(n,l){this.l=n,this.min=l;const u=new Array(n+1);for(let r=0;r<n+1;++r)u[r]=0;this.ft=u}add(n,l){if(l===0)return;const{l:u,ft:r}=this;for(n+=1;n<=u;)r[n]+=l,n+=J(n)}get(n){return this.sum(n+1)-this.sum(n)}sum(n){if(n===void 0&&(n=this.l),n<=0)return 0;const{ft:l,min:u,l:r}=this;if(n>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=n*u;for(;n>0;)s+=l[n],n-=J(n);return s}getBound(n){let l=0,u=this.l;for(;u>l;){const r=Math.floor((l+u)/2),s=this.sum(r);if(s>n){u=r;continue}else if(s<n){if(l===r)return this.sum(l+1)<=n?l+1:r;l=r}else return r}return l}}let W;function Se(){return typeof document>"u"?!1:(W===void 0&&("matchMedia"in window?W=window.matchMedia("(pointer:coarse)").matches:W=!1),W)}let K;function Q(){return typeof document>"u"?1:(K===void 0&&(K="chrome"in window?window.devicePixelRatio:1),K)}const le="VVirtualListXScroll";function ze({columnsRef:e,renderColRef:n,renderItemWithColsRef:l}){const u=z(0),r=z(0),s=R(()=>{const o=e.value;if(o.length===0)return null;const a=new ie(o.length,0);return o.forEach((f,w)=>{a.add(w,f.width)}),a}),x=_(()=>{const o=s.value;return o!==null?Math.max(o.getBound(r.value)-1,0):0}),C=o=>{const a=s.value;return a!==null?a.sum(o):0},c=_(()=>{const o=s.value;return o!==null?Math.min(o.getBound(r.value+u.value)+1,e.value.length-1):0});return ae(le,{startIndexRef:x,endIndexRef:c,columnsRef:e,renderColRef:n,renderItemWithColsRef:l,getLeft:C}),{listWidthRef:u,scrollLeftRef:r}}const ee=F({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:e,endIndexRef:n,columnsRef:l,getLeft:u,renderColRef:r,renderItemWithColsRef:s}=te(le);return{startIndex:e,endIndex:n,columns:l,renderCol:r,renderItemWithCols:s,getLeft:u}},render(){const{startIndex:e,endIndex:n,columns:l,renderCol:u,renderItemWithCols:r,getLeft:s,item:x}=this;if(r!=null)return r({itemIndex:this.index,startColIndex:e,endColIndex:n,allColumns:l,item:x,getLeft:s});if(u!=null){const C=[];for(let c=e;c<=n;++c){const o=l[c];C.push(u({column:o,left:s(c),item:x}))}return C}return null}}),Te=D(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[D("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[D("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Ne=F({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const n=ce();Te.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:Re,ssr:n}),de(()=>{const{defaultScrollIndex:t,defaultScrollKey:i}=e;t!=null?L({index:t}):i!=null&&L({key:i})});let l=!1,u=!1;fe(()=>{if(l=!1,!u){u=!0;return}L({top:I.value,left:x.value})}),me(()=>{l=!0,u||(u=!0)});const r=_(()=>{if(e.renderCol==null&&e.renderItemWithCols==null||e.columns.length===0)return;let t=0;return e.columns.forEach(i=>{t+=i.width}),t}),s=R(()=>{const t=new Map,{keyField:i}=e;return e.items.forEach((d,h)=>{t.set(d[i],h)}),t}),{scrollLeftRef:x,listWidthRef:C}=ze({columnsRef:$(e,"columns"),renderColRef:$(e,"renderCol"),renderItemWithColsRef:$(e,"renderItemWithCols")}),c=z(null),o=z(void 0),a=new Map,f=R(()=>{const{items:t,itemSize:i,keyField:d}=e,h=new ie(t.length,i);return t.forEach((v,p)=>{const m=v[d],y=a.get(m);y!==void 0&&h.add(p,y)}),h}),w=z(0),I=z(0),T=_(()=>Math.max(f.value.getBound(I.value-G(e.paddingTop))-1,0)),N=R(()=>{const{value:t}=o;if(t===void 0)return[];const{items:i,itemSize:d}=e,h=T.value,v=Math.min(h+Math.ceil(t/d+1),i.length-1),p=[];for(let m=h;m<=v;++m)p.push(i[m]);return p}),L=(t,i)=>{if(typeof t=="number"){M(t,i,"auto");return}const{left:d,top:h,index:v,key:p,position:m,behavior:y,debounce:b=!0}=t;if(d!==void 0||h!==void 0)M(d,h,y);else if(v!==void 0)X(v,y,b);else if(p!==void 0){const j=s.value.get(p);j!==void 0&&X(j,y,b)}else m==="bottom"?M(0,Number.MAX_SAFE_INTEGER,y):m==="top"&&M(0,0,y)};let E,H=null;function X(t,i,d){const{value:h}=f,v=h.sum(t)+G(e.paddingTop);if(!d)c.value.scrollTo({left:0,top:v,behavior:i});else{E=t,H!==null&&window.clearTimeout(H),H=window.setTimeout(()=>{E=void 0,H=null},16);const{scrollTop:p,offsetHeight:m}=c.value;if(v>p){const y=h.get(t);v+y<=p+m||c.value.scrollTo({left:0,top:v+y-m,behavior:i})}else c.value.scrollTo({left:0,top:v,behavior:i})}}function M(t,i,d){c.value.scrollTo({left:t,top:i,behavior:d})}function oe(t,i){var d,h,v;if(l||e.ignoreItemResize||Z(i.target))return;const{value:p}=f,m=s.value.get(t),y=p.get(m),b=(v=(h=(d=i.borderBoxSize)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.blockSize)!==null&&v!==void 0?v:i.contentRect.height;if(b===y)return;b-e.itemSize===0?a.delete(t):a.set(t,b-e.itemSize);const k=b-y;if(k===0)return;p.add(m,k);const S=c.value;if(S!=null){if(E===void 0){const A=p.sum(m);S.scrollTop>A&&S.scrollBy(0,k)}else if(m<E)S.scrollBy(0,k);else if(m===E){const A=p.sum(m);b+A>S.scrollTop+S.offsetHeight&&S.scrollBy(0,k)}O()}w.value++}const Y=!Se();let P=!1;function re(t){var i;(i=e.onScroll)===null||i===void 0||i.call(e,t),(!Y||!P)&&O()}function se(t){var i;if((i=e.onWheel)===null||i===void 0||i.call(e,t),Y){const d=c.value;if(d!=null){if(t.deltaX===0&&(d.scrollTop===0&&t.deltaY<=0||d.scrollTop+d.offsetHeight>=d.scrollHeight&&t.deltaY>=0))return;t.preventDefault(),d.scrollTop+=t.deltaY/Q(),d.scrollLeft+=t.deltaX/Q(),O(),P=!0,Ie(()=>{P=!1})}}}function ue(t){if(l||Z(t.target))return;if(e.renderCol==null&&e.renderItemWithCols==null){if(t.contentRect.height===o.value)return}else if(t.contentRect.height===o.value&&t.contentRect.width===C.value)return;o.value=t.contentRect.height,C.value=t.contentRect.width;const{onResize:i}=e;i!==void 0&&i(t)}function O(){const{value:t}=c;t!=null&&(I.value=t.scrollTop,x.value=t.scrollLeft)}function Z(t){let i=t;for(;i!==null;){if(i.style.display==="none")return!0;i=i.parentElement}return!1}return{listHeight:o,listStyle:{overflow:"auto"},keyToIndex:s,itemsStyle:R(()=>{const{itemResizable:t}=e,i=B(f.value.sum());return w.value,[e.itemsStyle,{boxSizing:"content-box",width:B(r.value),height:t?"":i,minHeight:t?i:"",paddingTop:B(e.paddingTop),paddingBottom:B(e.paddingBottom)}]}),visibleItemsStyle:R(()=>(w.value,{transform:`translateY(${B(f.value.sum(T.value))})`})),viewportItems:N,listElRef:c,itemsElRef:z(null),scrollTo:L,handleListResize:ue,handleListScroll:re,handleListWheel:se,handleItemResize:oe}},render(){const{itemResizable:e,keyField:n,keyToIndex:l,visibleItemsTag:u}=this;return g(U,{onResize:this.handleListResize},{default:()=>{var r,s;return g("div",he(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?g("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[g(u,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:x,renderItemWithCols:C}=this;return this.viewportItems.map(c=>{const o=c[n],a=l.get(o),f=x!=null?g(ee,{index:a,item:c}):void 0,w=C!=null?g(ee,{index:a,item:c}):void 0,I=this.$slots.default({item:c,renderedCols:f,renderedItemWithCols:w,index:a})[0];return e?g(U,{key:o,onResize:T=>this.handleItemResize(o,T)},{default:()=>I}):(I.key=o,I)})}})]):(s=(r=this.$slots).empty)===null||s===void 0?void 0:s.call(r)])}})}}),Le=F({name:"Empty",render(){return g("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),g("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Ee=ve("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[V("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[ge("+",[V("description",`
 margin-top: 8px;
 `)])]),V("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),V("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),ke=Object.assign(Object.assign({},ne.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),Pe=F({name:"Empty",props:ke,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:l}=pe(e),u=ne("Empty","-empty",Ee,xe,e,n),{localeRef:r}=be("Empty"),s=te(Ce,null),x=R(()=>{var a,f,w;return(a=e.description)!==null&&a!==void 0?a:(w=(f=s==null?void 0:s.mergedComponentPropsRef.value)===null||f===void 0?void 0:f.Empty)===null||w===void 0?void 0:w.description}),C=R(()=>{var a,f;return((f=(a=s==null?void 0:s.mergedComponentPropsRef.value)===null||a===void 0?void 0:a.Empty)===null||f===void 0?void 0:f.renderIcon)||(()=>g(Le,null))}),c=R(()=>{const{size:a}=e,{common:{cubicBezierEaseInOut:f},self:{[q("iconSize",a)]:w,[q("fontSize",a)]:I,textColor:T,iconColor:N,extraTextColor:L}}=u.value;return{"--n-icon-size":w,"--n-font-size":I,"--n-bezier":f,"--n-text-color":T,"--n-icon-color":N,"--n-extra-text-color":L}}),o=l?ye("empty",R(()=>{let a="";const{size:f}=e;return a+=f[0],a}),c,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:C,localizedDescription:R(()=>x.value||r.value.description),cssVars:l?void 0:c,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:l}=this;return l==null||l(),g("div",{class:[`${n}-empty`,this.themeClass],style:this.cssVars},this.showIcon?g("div",{class:`${n}-empty__icon`},e.icon?e.icon():g(we,{clsPrefix:n},{default:this.mergedRenderIcon})):null,this.showDescription?g("div",{class:`${n}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?g("div",{class:`${n}-empty__extra`},e.extra()):null)}});export{Pe as N,Ne as V,Fe as g};
